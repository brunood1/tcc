\documentclass[a4paper, 11pt]{book}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage[margin=1in]{geometry}
\usepackage{amsmath, amsfonts, amsthm, amssymb, amsxtra}

\usepackage{graphicx}
\usepackage{float}

\usepackage[portuguese]{babel}

\usepackage[dvipsnames]{xcolor}

\usepackage{cmbright}

\usepackage{tabularray}
\usepackage{enumitem}
\usepackage{multicol}

\usepackage{caption} 
\captionsetup{justification=centering} 

\usepackage{hyperref}
\hypersetup{hidelinks}

\usepackage{tikz}
\usetikzlibrary{intersections, angles, calc, positioning}
\usetikzlibrary{shapes.geometric, arrows.meta}
\usetikzlibrary{decorations.pathmorphing, decorations.pathreplacing}

\usepackage[explicit]{titlesec}
\usepackage[letterspace=100]{microtype}
\usepackage{fmtcount}

\titleformat{\chapter}[display]
{\bfseries\large\sf\lsstyle}
{\huge\filleft\mbox{\MakeUppercase{\chaptertitlename} \NUMBERstring{chapter}}}
{1.5ex}
{\titlerule
\vspace*{1.1ex}%
\MakeUppercase{#1}}
[\vspace*{1.5ex}%
\titlerule]
\titlespacing*{\chapter}{0pt}{-10pt}{25pt}

\titleformat{\section}{\Large\bfseries\sffamily\centering}{\thesection}{0.5em}{#1}

\usepackage{thmtools}
\usepackage{thm-restate}
\usepackage[framemethod=TikZ]{mdframed}
\mdfsetup{skipabove=1em,skipbelow=0em, 
innertopmargin=9pt, innerbottommargin=8pt,
innerleftmargin=8pt, innerrightmargin=8pt}

\renewcommand{\qedsymbol}{$\Box$}

\theoremstyle{definition}

\declaretheoremstyle[headfont=\bfseries\sffamily, bodyfont=\normalfont, mdframed={nobreak}]{thmbox}
\declaretheorem[style=thmbox, name=Definição, numberwithin=chapter]{dbox}
\declaretheorem[style=thmbox, name=Teorema, numberwithin=chapter, sibling=dbox]{tbox}
\declaretheorem[style=thmbox, name=Proposição, numberwithin=chapter, sibling=dbox]{pbox}
\declaretheorem[style=thmbox, name=Corolário, numberwithin=chapter, sibling=dbox]{cbox}
\declaretheorem[style=thmbox, name=Lema, numberwithin=chapter, sibling=dbox]{lbox}

\declaretheoremstyle[headfont=\bfseries\sffamily, bodyfont=\normalfont]{exp}
\declaretheorem[style=exp, name=Exemplo, numberwithin=chapter, sibling=dbox]{ex}

\declaretheoremstyle[headfont=\sffamily\itshape, bodyfont=\normalfont]{pr}
\declaretheorem[numbered=no, style=pr, name=Demonstração, qed=\qedsymbol]{prf}

\newcommand{\obs}{\noindent{\textbf{\textcolor{black}{\sffamily Observação:}}}~}

\setlength{\parskip}{5pt}

\newcommand{\medcup}{\mathsf{U}}

\newcommand{\bN}{\mathbb{N}}
\newcommand{\bZ}{\mathbb{Z}}
\newcommand{\bQ}{\mathbb{Q}}
\newcommand{\bR}{\mathbb{R}}
\newcommand{\bC}{\mathbb{C}}
\newcommand{\bK}{\mathbb{K}}

\newcommand{\bz}{\mathbf{0}}

\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathfrak{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cW}{\mathcal{W}}

\newcommand{\supp}{\mathrm{supp}\,}
\newcommand{\esssup}{\mathrm{ess\,sup}\,}
\newcommand{\loc}{\mathrm{loc}}
\newcommand{\sgn}{\mathrm{sgn}}


\usepackage{csquotes}
\usepackage[backend=biber, maxbibnames=5, minbibnames=3, sorting=none, url=false, isbn=false, doi=false, defernumbers=true]{biblatex}
\addbibresource{bibliography.bib}


\begin{document}

\tableofcontents

\addcontentsline{toc}{chapter}{Lista de Símbolos}
\chapter*{Lista de Símbolos}
\begin{tblr}{
    colspec={ll},
    column{1} = {leftsep=0pt, rightsep=15pt}
    }
    $\cB$               & Álgebra de Borel\\
    $\widehat\cB$       & Álgebra de Borel em $\overline\bR$\\
    $\chi_E$            & Função caracteristica do conjunto $E$\\
    $\eth$              & $\sigma$-álgebra\\
    $f^+$               & Parte positiva da função $f$\\
    $f^-$               & Parte negativa da função $f$\\
    $f \sim_\mu g$      & $f$ e $g$ são $\mu$-equivalentes i.e., $f = g$ em quase toda parte em $X$.\\
    $\cL(X,\eth,\mu)$   & Espaço das funções integraveis em relação a medida $\mu$.\\
    $\cL^p(X,\eth,\mu)$ & Espaço de Lebesgue $\cL^p$.\\
    $\cM(X,\eth)$       & Espaço das funções $f: X \to \overline\bR$ mensuráveis\\
    $\cM^+(X,\eth)$     & Espaço das funções $f: X \to \overline\bR$ mensuráveis não negativas\\
    $\mu(E)$            & Medida do conjunto $E$\\
    $N_\mu(\,\cdot\,)$  & Semi-norma em relação a medida $\mu$.\\
    $\cP(X)$            & Conjunto das partes do conjunto $X$\\
    $\overline\bR$      & Reta extendida i.e., $\bR \cup \{-\infty,+\infty\}$\\
    $\cW^{k,p}(\Omega)$ & Espaço de Sobolev
\end{tblr}

\chapter{Introdução à Teoria da Medida}

A teoria da medida é um ramo fundamental da matemática que estuda a generalização da noção de tamanho, volume e probabilidade. Originada das necessidades da análise e da teoria da probabilidade, essa teoria oferece uma estrutura rigorosa para tratar de conjuntos, funções e integrais em contextos mais abstratos e complexos. Este capítulo explora os conceitos-chave da teoria da medida, suas principais definições e teoremas.

\section{Espaços e funções mensuráveis}

Nesta seção trataremos especificamente dos conceitos de espaços e funções mensuráveis. Para este fim, precisamos inicialmente definir o significado de $\sigma$-álgebra. A partir deste conceito estaremos prontos para estabelecer o que chamamos de espaços mensuráveis

\begin{dbox}
    Seja $X$ um conjunto não vazio. Uma família $\eth$ de subconjuntos de $X$ é uma $\sigma$-álgebra se satisfaz as seguintes condições
    \begin{enumerate}[leftmargin=*]
        \item $\emptyset, X \in \eth$
        \item Se $S \in \eth$ então $S^{\mathcal{C}} = X \smallsetminus S \in \eth$
        \item Se $(S_n)$ é uma sequência de elementos de $\eth$ então $\bigcup \limits_{n=1}^{\infty} S_n \in \eth$
    \end{enumerate} 
    O par $(X, \eth)$ é dito espaço mensurável e os subconjuntos de $\eth$ são chamados de conjuntos mensuráveis (ou $\eth$-mensuráveis)
\end{dbox}

\begin{ex}
    Seja $X$ um conjunto não vazio e considere $\eth = \{\emptyset, X\}$. 
    Afirmamos que $\eth$ é uma $\sigma$-álgebra.
    Com efeito,
    \begin{enumerate}[leftmargin=*]
        \item $\emptyset, X \in \eth$ pela definição.
        \item $\emptyset^{\mathcal{C}} = X \in \eth$ e $X^{\mathcal{C}} = \emptyset \in \eth$
        \item $\medcup \emptyset = \emptyset \in \eth$ ou $\medcup X = X \in \eth$
    \end{enumerate}
\end{ex}

\begin{ex}
    Seja $X = \{a, b, c, d\}$. $\eth = \{\emptyset, \{a,b\}, \{a,c\}, \{a,b,c,d\}\}$ não é uma $\sigma$-álgebra de $X$ pois $\{a,b\}^{\mathcal{C}} = \{c,d\} \not\in \eth$
\end{ex}

\obs Seja $(S_\alpha)$ uma coleção de conjuntos quaisquer. Pela Regra de De Morgan tem-se
\[
    \left( \bigcup_{\alpha} S_\alpha \right)^\cC \!\! = \,\bigcap_\alpha S_\alpha^\cC \;\text{ e }  \left( \bigcap_{\alpha} S_\alpha \right)^\cC \!\! = \,\bigcup_\alpha S_\alpha^\cC
\]
Dessa forma, se $(S_n)$ é uma sequência de elementos de uma $\sigma$-álgebra, então $\bigcap_{n=1}^\infty S_n \in \eth$

\obs (união finita)

\obs (interseção finita)

\begin{ex}
    Seja $X$ um conjunto não enumerável e considere
    \[
        \eth = \{ S \subseteq X \,; \text{$S$ é enumerável ou $S^{\mathcal{C}}$ é enumerável} \}
    \]
    Afirmamos que $\eth$ é uma $\sigma$-álgebra. De fato
    \begin{enumerate}[leftmargin=*]
        \item $\emptyset \in \eth$ pois é enumerável e $X \in \eth$ pois $X^\cC = \emptyset$ que é enumerável

        \item se $S \in \eth$ temos as seguintes possibilidades

        $S$ é enumerável, então $S^\cC \in \eth$ pois $(S^\cC)^\cC = S$ é enumerável

        $S^\cC$ é enumerável, então pela definição da $\sigma$-álgebra, $S^\cC \in \eth$

        \item Seja $(S_n)$ uma sequência de subconjuntos em $\eth$, isto é, $S_n \in \eth$ para todo $n \in \bN$, aqui temos três possibilidades a serem consideradas
        
        $S_n$ é enumerável para todo $n \in \bN$. Então $\bigcup_{n=1}^\infty S_n$ é enumerável, portanto está em $\eth$

        $S_n^\cC$ é enumerável para todo $n \in \bN$. Então
        \[
            \left( \bigcup_{n=1}^\infty \right)^\cC \!\! = \, \bigcap S_n^\cC \subseteq S_{n_0}^\cC
        \]
        é enumerável pois é subconjunto de um conjunto enumerável $S_{n_0}^\cC$, portanto está em $\eth$

        Se existem $i,j \in \bN$ tais que
        \[
            S_i \subseteq X \;\text{ e }\; S_j^\cC \subseteq X \;\text{ são enumeráveis}
        \]
        podemos afirmar que $\bigcup_{n=1}^\infty S_n$ não é enumerável, pois $S_j^\cC$ é enumerável, e como $X$ não é enumerável, segue que $S_j$ também não é enumerável, fazendo com que a união se torne não enumerável. Dito isso, mostremos que $ \left( \bigcup_{n=1}^\infty S_n \right)^\cC$ é enumerável. Com efeito, observe que
        \[
            \left( \bigcup_{n=1}^\infty S_n \right)^\cC = \bigcap_{n=1}^\infty S_n^\cC \subseteq S_j^\cC
        \]
        ou seja, o complementar da união é subconjunto de um conjunto enumerável, logo é um conjunto enumerável. Portanto $\bigcup_{n=1}^\infty S_n \in \eth$.
    \end{enumerate}
    Dessa forma, $\eth$ é uma $\sigma$-álgebra
\end{ex}

\begin{ex}
    Seja $X$ um conjunto não vazio. Se $\eth_1$ e $\eth_2$ são $\sigma$-álgebras de $X$ então $\eth = \eth_1 \cap \eth_2$ também é uma $\sigma$-álgebra de $X$.
\end{ex}

Dado um conjunto cujos elementos são subconjuntos de $X$, o resultado abaixo nos diz como encontrar a menor $\sigma$-álgebra contendo este.

\begin{pbox}
    Sejam $X$ um conjunto não vazio e $A \subseteq \mathcal{P}(X)$ uma coleção não vazia de subconjuntos de $X$. Então a interseção de todas as $\sigma$-álgebras de subconjuntos de $X$ que contem $A$ é a menor $\sigma$-álgebra que contém $A$.
\end{pbox}
\begin{prf}
    ~
\end{prf}

\obs ($\sigma$-álgebra gerada)

Agora definimos uma $\sigma$-álgebra bastante importante para o estudo da teoria da medida conhecida como álgebra de Borel

\begin{dbox}
    Seja $\bR$ o conjunto dos números reais. A álgebra de Borel é a $\sigma$-álgebra $\cB$ gerada por todos os intervalos abertos $(x,y)$ em $\bR$, ou seja, considerando o conjunto
    \[
        A = \{(x_\alpha, y_\alpha) \,; x_\alpha, y_\alpha \in \bR, x_\alpha < y_\alpha\}  
    \]
    temos que
    \[
        \cB = \bigcap_\alpha \eth_\alpha,
    \]
    onde cada $\eth_\alpha$ é uma $\sigma$-álgebra que contem $A$.
\end{dbox}

Equivalentemente, podemos dizer que $\cB$ é a $\sigma$-álgebra gerada por todos conjuntos abertos de $\bR$.
É fácil ver que essa equivalência é válida pois qualquer conjunto aberto de $\bR$ pode ser expresso como união de intervalos abertos. 
Ainda mais, expressndo $\cB$ dessa forma é possível ver que não precisamos que $\cB$ seja uma $\sigma$-álgebra de $\bR$ mas sim de qualquer espaço topólogico $(X,\cT)$, nesse caso dizemos que $\cB$ é a $\sigma$-álgebra gerada pela topólogia $\cT$.
Nesse trabalho a notação $\cB$ será utilizada apenas para a álgebra de Borel em $\bR$.

O resultado abaixo apresenta uma outra forma de definir a álgebra de Borel

\begin{pbox}
    $\cB$ é a $\sigma$-álgebra gerada por todos intervalos fechados
\end{pbox}
\begin{prf}
    % Sejam $\cB$ a álgebra de Borel e $A = \{(x_\alpha, y_\alpha) \,; x_\alpha, y_\alpha \in \bR, x_\alpha < y_\alpha\} \subseteq \cP(\bR)$ o conjunto que gera $\cB$.
    % Considere o conjunto $E = \{[x_\alpha, y_\alpha] \,; x_\alpha, y_\alpha \in \bR, x_\alpha < y_\alpha\} \subseteq \cP(\bR)$ e $\eth_E$ a $\sigma$-álgebra gerada por $E$.
    % Mostremos que $\eth_A = \cB = \eth_E$, para isso, primeiramente vamos verificar que $\cB \subseteq \eth_E$. 
    % Com efeito seja $(x_a,y_\alpha) \in A$. 
    % Afirmamos que
    % \[
    %     (x_\alpha, y_\alpha) = \bigcup_{n=1}^{\infty} \left[ x_a + \frac{1}{n}, y_\alpha - \frac{1}{n} \right].
    % \]
    % De fato, se $c = (x_\alpha, y_\alpha)$ temos que
    % \[
    %     x_\alpha < c < y_\alpha \iff c - x_\alpha > 0 \;\text{ e }\; b_\alpha - c > 0.
    % \]
    % Pela propiedade Arquimediana, existem $\bar n, \tilde n \in \bN$ tais que
    % \[
    %     \frac{1}{c - x_\alpha} < \bar n \;\text{ e }\; \frac{1}{y_\alpha - c} < \tilde n,
    % \]
    % considerando $n_0 = \max\{\bar n, \tilde n\}$, temos
    % \[
    %     \frac{1}{c - x_\alpha} < n_0 \;\text{ e }\; \frac{1}{y_\alpha - c} < n_0 \implies c \in \left(x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right).
    % \]
    % Como
    % \[
    %     \left(x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right) \subseteq \left[x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right] \subseteq \bigcup_{n=1}^{\infty} \left[x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right] 
    % \]
    % segue que $x \in \bigcup_{n=1}^{\infty}\left[x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right] \in \eth_E$.
    % Logo
    % \[
    %     (x_\alpha, y_\alpha) \subseteq \bigcup_{n=1}^{\infty}\left[x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right]. 
    % \]

    % Por outro lado, considere
    % \[
    %     U_\alpha = \bigcup_{n=1}^{\infty} \left[x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right].
    % \]
    % Seja $\alpha$ um elemento arbitrário e $c \in U_\alpha$ fixo.
    % Então, existe $n_0 \in \bN$ tal que $x \in \left[x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right]$.
    % Assim
    % \[
    %     x_\alpha < x_\alpha + \frac{1}{n_0} < c < y_\alpha - \frac{1}{n_0} < y_\alpha \implies x \in (x_\alpha, y_\alpha).
    % \]
    % Portanto
    % \[
    %     (x_\alpha, y_\alpha) = \bigcup_{n=1}^\infty \left[x_\alpha + \frac{1}{n_0}, y_\alpha - \frac{1}{n_0}\right]. 
    % \]

    % Assim, para cada $\alpha$ temos que $(x_\alpha, y_\alpha)$ é uma união enumerável de elementos de $\eth_E$. 
    % Consequentemente $(x_\alpha, y_\alpha) \in \eth_E$ para todo $\alpha$, implicando em $A \subseteq \eth_E$. 
    % Como $\cB$ é a menor $\sigma$-álgebra que contem $A$, temos que $\cB \subseteq \eth_E$.

    % Agora precisamos verificar que $\eth_E \subseteq \cB$. 
    % Com efeito.
    % Afirmamos que
    % \[
    %     [x_\alpha, y_\alpha] = \bigcap_{n=1}^{\infty} \left( x_\alpha - \frac{1}{n}, y_\alpha + \frac{1}{n_0} \right).
    % \]
    % De fato, considere
    % \[
    %     V_\alpha = \bigcap_{n=1}^{\infty} \left( x_\alpha - \frac{1}{n}, y_\alpha + \frac{1}{n} \right).
    % \]
    % Seja $c \in [x_\alpha, y_\alpha]$, então
    % \[
    %     x_\alpha - \frac{1}{n} < x_\alpha \leqslant c \leqslant y_\alpha < b + \frac{1}{n} \implies c \in \left( x_\alpha - \frac{1}{n}, y_\alpha + \frac{1}{n} \right) \; \forall n \in \bN \implies c \in V_\alpha
    % \]

    % Por outro lado, se $x \in V_\alpha$ tem-se que
    % \[
    %     x_\alpha - \frac{1}{n} < c < y_\alpha + \frac{1}{n}
    % \]
    % para todo $n \in \bN$.
    % Note que $x_\alpha < c < y_\alpha$.
    % Com efeito, suponha por contradição que $x_\alpha > c$, então $x_\alpha - c > 0$.
    % Pela propiedade Arquimediana, existe $n_0 \in \bN$ tal que
    % \[
    %     \frac{1}{x_\alpha -c } < n_0 \implies c < x_\alpha - \frac{1}{n_0}
    % \]
    % que é uma contradição, então $x_\alpha < c$.
    % De forma análoga, mostramos que $c < y_\alpha$.
    % Assim, temos que $c \in (x_\alpha, y_\alpha)$.
    % Portanto
    % \[
    %     [x_\alpha, y_\alpha] = \bigcap_{n=1}^{\infty} \left( x_\alpha - \frac{1}{n}, y_\alpha + \frac{1}{n_0} \right).
    % \]

    % Assim, cads $[x_\alpha, y_\alpha]$ pode ser escrito como interseção enumerável de elementos de $\cB$. 
    % Consequentemente $[x_\alpha, y_\alpha]  \in \cB$ para todo $\alpha$. Desse modo, $E \subseteq \cB$. Como $\eth_E$ é a menor $\sigma$-álgebra que contém $E$ segue que $\eth_E \subseteq \cB$.

    % Portanto $\cB = \eth_E$.
\end{prf}

\begin{ex}
    Alguns exemplos de conjuntos que estão em $\cB$ são
    \begin{itemize}
        \item Todo conjunto fechado é um conjunto em $\cB$ pois é o complementar de um conjunto aberto.
        \item Todo conjunto enumerável está em $\cB$ pois se $B = \{x_1,x_2,\dots\}$, então $B = \bigcup_{n=1}^\infty \{x_n\}$ que é um conjunto em $\cB$ pois cada $\{x_n\}$ é um conjunto fechado.
        \item Todo intervalo do tipo $[a,b)$ ou $(a,b]$ com $a,b \in \bR$ é um conjunto em $\cB$ pois $[a,b) = \bigcap_{n=1}^\infty (a- \frac{1}{k}, b)$ e $(a,b] = \bigcap_{n=1}^\infty (a, b + \frac{1}{n})$.
    \end{itemize}
\end{ex}

A sensação é de que a álgebra de Borel contem todos os subconjuntos de $\bR$, isto é $\cB = \cP(\bR)$.
Porem este não é o caso, pois existem subconjuntos de $\bR$ que são bastante dificeis de definir (vide [??]) que não estão em $\cB$.
Mas se esses conjuntos são tão dificeis de definir por que precisamos de uma $\sigma$-álgebra que exclui eles?

Na seção a seguir estudaremos o conceito de medida e suas propiedades, em um exemplo veremos que ao tentar definir uma medida no espaço $(\bR,\cP(\bR))$ uma propiedade importante não é satisfeita, mas restrigindo para o espaço $(\bR,\cB)$ conseguimos definir a mesma medida de forma que todas propiedades são satisfeitas.

% Every subset of $\bR$ which we meet in everyday use is an element of Borel $\sigma$-algebra $\cB$; and indeed it is difficult (but possible!) to find a subset of $\bR$ constructed explicitly (without the Axiom of Choice) which is not in $\cB$. (Ver referência)

\begin{dbox}
    O conjunto $\overline\bR$ é dita reta extendida e é definido por
    \[
        \overline\bR = \bR \cup \{-\infty, +\infty\} = [-\infty,+\infty]
    \]
\end{dbox}

\obs Operações com $\infty$ em $\overline\bR$
\begin{multicols}{2}
    \begin{enumerate}[leftmargin=*]
        \item $\infty + \infty = \infty$
        \item $-\infty -\infty = -\infty$
        \item $x + \infty = \infty + x = \infty$
        \item $x + (-\infty) = (-\infty) + x = - \infty$
        \item $\infty \cdot \infty = \infty$
        \item $x \cdot \infty = \infty \cdot x = \infty$ se $x > 0$
        \item $x \cdot (-\infty) = (-\infty) \cdot x = \infty$ se $x < 0$
        \item $x \cdot \infty = \infty \cdot x = -\infty$ se $x < 0$
        \item $x \cdot (-\infty) = (-\infty) \cdot x = -\infty$ se $x > 0$
        \item $0 \cdot \infty = \infty \cdot 0 = 0$.
    \end{enumerate}
\end{multicols}

\begin{pbox}
    Seja $\bar\bR$ a reta estendida. Considere $E_1 = E \cup \{-\infty\}$, $E_2 = E \cup \{+\infty\}$, $E_3 = E \cup \{-\infty, +\infty\}$ e $\widehat\cB = \{E_1, E_2, E_3, E\}$ com $E$ variando na álgebra de Borel $\cB$. Então $\widehat\cB$ é uma $\sigma$-álgebra em $\overline\bR$ denominada álgebra estendida de Borel.
\end{pbox}
\begin{prf}
    % ~

    % \begin{enumerate}
    %     \item $\emptyset, \overline\bR \in \widehat\cB$ pois $\emptyset \in \cB$ e $\cB$ é uma $\sigma$-álgebra e em algum momento $E = \bR \in \cB$, logo $\overline\bR = \bR \cup \{-\infty, \infty\} \in \widehat\cB$
    %     \item Seja $X \in \widehat\cB$ para mostrar que $X^\cC \in \widehat\cB$ iremos considerar os seguintes casos
        
    %     se $X$ é do tipo $E \cup \{+\infty\}$, com $E \in \cB$
    %     \[
    %         X^\cC = \overline\bR \smallsetminus X = (\bR \cup \{-\infty,+\infty\}) \smallsetminus (E \cup \{+\infty\}) = (\bR \smallsetminus E) \cup \{-\infty\} \in \widehat\cB
    %     \]
    %     pois $\bR \smallsetminus E \in \cB$.

    %     se $X$ é do tipo $E \cup \{-\infty\}$, com $E \in \cB$
    %     \[
    %         X^\cC = \overline\bR \smallsetminus X = (\bR \cup \{-\infty,+\infty\}) \smallsetminus (E \cup \{-\infty\}) = (\bR \smallsetminus E) \cup \{+\infty\} \in \widehat\cB
    %     \]

    %     se $X$ é do tipo $E \cup \{-\infty,+\infty\}$, com $E \in \cB$
    %     \[
    %         X^\cC = \overline\bR \smallsetminus X = (\bR \cup \{-\infty,+\infty\}) \smallsetminus (E \cup \{-\infty,+\infty\}) = (\bR \smallsetminus E)  \in \widehat\cB
    %     \]

    %     se $X$ é do tipo $E$, com $E \in \cB$
    %     \[
    %         X^\cC = \overline\bR \smallsetminus X = (\bR \cup \{-\infty,+\infty\}) \smallsetminus E = (\bR \smallsetminus E) \cup \{-\infty,+\infty\} \in \widehat\cB
    %     \]
    %     \item Seja $(A_n)$ uma sequência de elementos de $\widehat\cB$.
    %     Mostremos que
    %     \[
    %         \bigcup_{n=1}^{\infty} A_n \in \widehat\cB.
    %     \]
    %     Para isso, precisamos considerar alguns casos

    %     se existem $A_k = E_k \cup \{-\infty,+\infty\}$ com $k = 1,\dots,j$ e $A_k = E_k$ com $k = j +1,j+2,\dots,$ então
    %     \[
    %         \begin{aligned}
    %             \bigcup_{n=1}^{\infty} A_n &= \left[ \bigcup_{n=1}^{j} A_n \right] \cup \left[  \bigcup_{n=j+1}^{\infty} A_n \right]\\
    %             &= \left[ \bigcup_{n=1}^{j} E_n \cup \{-\infty,+\infty\} \right] \cup \left[  \bigcup_{n=j+1}^{\infty} E_n \right]\\
    %             &= \left[ \bigcup_{n=1}^{j} E_n  \right] \cup \left[  \bigcup_{n=j+1}^{\infty} E_n \right]\cup \{-\infty,+\infty\}\\
    %             &= \left[ \bigcup_{n=1}^{\infty} E_n \right]\cup \{-\infty,+\infty\}\\
    %         \end{aligned}
    %     \]
    %     que está em $\widehat\cB$ pois $\bigcup_{n=1}^{\infty} E_n \in \cB$

    %     Os outros casos de possíveis combinações são análogos
    % \end{enumerate}
\end{prf}

Um conceito bastante importante na teoria da medida, é a ideia de funções mensuráveis

\begin{dbox}
    Uma função $f : X \to \mathbb R$ é dita ser $\eth$-mensurável (ou simplesmente mensurável) se para cada $\alpha \in \mathbb{R}$, o conjunto
    \[
        \{x \in X \,; f(x) > \alpha\}
    \]
    pertence a $\sigma$-álgebra.
\end{dbox}

\begin{lbox}
    As afirmações a seguir são equivalentes para uma função $f : X \to \bR$
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $A_\alpha = \{x \in X \,; f(x) > \alpha\} \in \eth$ para todo $\alpha \in \bR$
        \item $B_\alpha = \{x \in X \,; f(x) \leqslant \alpha\} \in \eth$ para todo $\alpha \in \bR$
        \item $C_\alpha = \{x \in X \,; f(x) \geqslant \alpha\} \in \eth$ para todo $\alpha \in \bR$
        \item $D_\alpha = \{x \in X \,; f(x) > \alpha\} \in \eth$ para todo $\alpha \in \bR$
    \end{enumerate}
\end{lbox}
\begin{prf}
    ~
\end{prf}

\begin{ex}
    A função constante $x \mapsto c$ é mensurável.
    Com efeito, se $\alpha \geqslant c$, então
    \[
        \left\{ x \in X \,; f(x) > \alpha \right\} = \emptyset \in \eth
    \]
    pois o único valor que a função assume é $c$.
    Se $\alpha < c$, então
    \[
        \left\{ x \in X \,; f(x) > \alpha \right\} = X \in \eth
    \]
    Portanto a função constante é mensurável
\end{ex}

\begin{ex}
    A função caracteristica $\chi_E$ de um subconjunto $E \in \eth$ é mensurável dada por
    \[
        \chi_E(x) = \left\{ 
            \begin{aligned}
                1 & \text{ se } x \in E\\
                0 & \text{ se } x \not\in E.
            \end{aligned}
        \right.
    \]
    é mensurável.
    Dito isso, seja $\alpha \in \bR$.
    Se $\alpha \geqslant 1$, então
    \[
        \{x \in X \,; \chi_E(x) > \alpha\} = \emptyset \in \eth,
    \]
    pois a imagem de $\chi_E$ contem apenas os valores $0$ e $1$.
    Se $0 \leqslant \alpha < 1$ então
    \[
        \{x \in X \,; \chi_E(x) > \alpha\} = E \in \eth.
    \]
    Por fim, se $\alpha < 0$, então
    \[
        \{x \in X \,; \chi_E(x) > \alpha\} = X \in \eth.
    \]
    Portanto $\chi_E$ é uma função mensurável, desde que $E$ tambem seja.
\end{ex}

\begin{ex}
    Se $f : X \to \bR$ com $X \in \cB \subseteq \bR$ é contínua, então $f$ é mensurável. De fato, basta notar que
    \[
        \{ x \in X \,; f(x) > \alpha\} = f^{-1}((\alpha,\infty)).
    \]
    Pela contínuidade de $f$, o conjunto $f^{-1}((\alpha,\infty))$ é aberto para todo $\alpha \in \bR$.
    Dessa forma $\{x \in X \,; f(x) > \alpha\} \in \cB$.
    Portanto $f$ é mensurável.
\end{ex}

\begin{ex}
    Dada uma função $f$ mensurável.
    A função \textit{truncagem de $f$} (Figura \ref{fig:truncagem}) dada por
    \[
        f_n(x) =
        \left\{
            \begin{aligned}
                f(x) &\; \text{ se } f(x) \leqslant n \text{ e } f(x) \geqslant -n\\
                n &\; \text{ se } f(x) > n\\
                -n &\; \text{ se } f(x) < -n
            \end{aligned}
        \right.
    \]
    é mensurável para todo $n \in \mathbb{N}$

    \begin{figure}
        \centering
        \begin{tikzpicture}
            \begin{scope}[shift={(-4,0)}, scale=0.8]
                \draw[black!30] (-4,-4) grid (4,4);
                \draw[thick, black!60, -stealth] (-4,0) to (4,0); 
                \draw[thick, black!60, -stealth] (0,-4) to (0,4); 
                \draw[domain=-2.31:2.152, variable=\x, samples=50, smooth, very thick, ProcessBlue!90!black] plot ({\x}, {0.5 * (\x + 1) * (\x + 1) * (\x + 2) * (\x - 1) * (\x - 2)});
            \end{scope}

            \begin{scope}[shift={(4,0)}, scale=0.8]
                \draw[black!30] (-4,-4) grid (4,4);
                \draw[thick, black!60, -stealth] (-4,0) to (4,0); 
                \draw[thick, black!60, -stealth] (0,-4) to (0,4); 

                \node[align=left, anchor=north west] at (-3.9,3.9) {$\textcolor{ProcessBlue!90!black}{\blacksquare\!\blacksquare \;\; f_1(x)}$ \\ $\textcolor{ForestGreen}{\blacksquare\!\blacksquare \;\; f_2(x)}$};

                \draw[very thick, ForestGreen] (-2.20459, -2) -- (-4,-2) 
                -- plot[domain=-2.20459:0, variable=\x, samples=50, smooth] ({\x}, {0.5 * (\x + 1) * (\x + 1) * (\x + 2) * (\x - 1) * (\x - 2)})
                -- (0, 2) -- (0.54948,2) 
                -- plot[domain=0.54948:1.33027, variable=\x, samples=50, smooth] ({\x}, {0.5 * (\x + 1) * (\x + 1) * (\x + 2) * (\x - 1) * (\x - 2)}) 
                -- (1.33027, -2) -- (1.84929,-2) 
                -- plot[domain=1.84929:2.0934, variable=\x, samples=50, smooth] ({\x}, {0.5 * (\x + 1) * (\x + 1) * (\x + 2) * (\x - 1) * (\x - 2)}) 
                -- (2.0934, 2) -- (4,2);


                \draw[very thick, ProcessBlue!90!black] (-2.12313, -1) -- (-4,-1) 
                -- plot[domain=-2.12313:-0.38822, variable=\x, samples=50, smooth] ({\x}, {0.5 * (\x + 1) * (\x + 1) * (\x + 2) * (\x - 1) * (\x - 2)})
                -- (-0.38822, 1) -- (0.81837,1) 
                -- plot[domain=0.81837:1.16148, variable=\x, samples=50, smooth] ({\x}, {0.5 * (\x + 1) * (\x + 1) * (\x + 2) * (\x - 1) * (\x - 2)}) 
                -- (1.16148, -1) -- (1.93717,-1) 
                -- plot[domain=1.93717:2.05051, variable=\x, samples=50, smooth] ({\x}, {0.5 * (\x + 1) * (\x + 1) * (\x + 2) * (\x - 1) * (\x - 2)}) 
                -- (2.05051, 1) -- (4,1);
            \end{scope}
        \end{tikzpicture}
        \caption{À esquerda o gráfico de $f$ e à direita o gráfico de $f_1$ e $f_2$\\Fonte: Autoral}
        \label{fig:truncagem}
    \end{figure}
\end{ex}

Vamos estudar agora algumas propiedades elementares sobre funções mensuráveis

\begin{pbox}
    Sejam $X$ um espaço mensurável, $f, g : X \to \bR$ funções mensuráveis e $c \in \bR$. Então as funções
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $cf$
        \item $f^2 := f \cdot f$
        \item $f + g$
        \item $fg$
        \item $|f|$
    \end{enumerate}
    são mensuráveis
\end{pbox}
\begin{prf}
    
\end{prf}

Uma outra definição importante sobre funções mensuráveis e a de parte positiva e negativa de uma função
\begin{dbox}
    Seja $f : X \to \bR$ uma qualquer.
    Definimos as partes positiva e negativa de $f$ respectivamente pelas funções não negativas $f^+ : X \to \bR$ e $f^- : X \to \bR$ dadas por
    \[
        f^+(x) = \max\{f(x), 0\} \;\text{ e } f^-(x) = \max\{-f(x), 0\}
    \]
\end{dbox}

\begin{lbox}
    Seja $f : X \to \bR$ uma funçao qualquer.
    Então
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $f = f^+ - f^-$
        \item $|f| = f^+ + f^-$
        \item $f^+ = \frac{1}{2} (|f| + f)$
        \item $f^- = \frac{1}{2} (|f| - f)$
    \end{enumerate}
\end{lbox}

O lema acima é importante para demonstrar a proposição abaixo

\begin{pbox}
    Seja $X$ um espaço mensurável. Então $f : X \to \bR$ é mensurável se, e somente se, $f^+$ e $f^-$ são mensuráveis
\end{pbox}
\begin{prf}
    Segue direto do lema anterior.
\end{prf}

Agora, vamos passar a estudar funções mensuráveis na reta extendida.

\begin{dbox}
    Dizemos que uma função $f : X \to \overline\bR$ é $\eth$-mensurável (ou mensurável) se
    \[
        \{x \in X \,; f(x) > \alpha\} \in \eth
    \]
    para cada $\alpha \in \bR$.
    Além disso, denotamos o conjunto de todas as funções $f : X \to \overline\bR$ por $\cM(X,\eth)$
\end{dbox}

Em nenhum momento da definição acima mencionamos os elementos $\pm \infty$. O motivo será mostrado abaixo

\[
    \dots
\]

\begin{lbox}
    Uma funçao $f : X \to \overline\bR$ é mensurável se, e somente se
    \[
        A = \{x \in X \,; f(x) = \infty\} \in \eth \;\text{ e }\; B = \{x \in X \,; f(x) = -\infty\} \in \eth
    \]
    e a função $\tilde f : X \to \bR$ dada por
    \[
        \tilde f(x) = \left\{
            \begin{array}{ll}
                f(x) & \text{se }\, x \not\in A \cup B\\
                0 & \text{se }\, x \in A \cup B
            \end{array}
        \right.
    \]
    é mensurável
\end{lbox}
\begin{prf}
    
\end{prf}

\obs ($cf\dots \in \cM(X,\eth)$)

\dots

\begin{lbox}
    Seja $(f_n)$ uma sequência em $\cM(X,\eth)$. Então as funções
    \[
        \begin{aligned}
            f(x) &= \inf f_n(x) & F(x) &= \sup f_n(x)\\
            f^*(x) &=\liminf f_n(x) & F^*(x) &= \limsup f_n(x) 
        \end{aligned}
    \]
    pertencem a $\cM(X,\eth)$
\end{lbox}
\begin{prf}
    
\end{prf}

\dots

\begin{cbox}
    Se $(f_n)$ é uma sequência em $\cM(X,\eth)$ que converge para $f$.
    Então $f \in \cM(X,\eth)$
\end{cbox}
\begin{prf}
    
\end{prf}

O resultado abaixo é ...

\begin{pbox}
    Seja $f$ uma função não negativa em $\cM(X,\eth)$.
    Então existe uma sequência $(\varphi_n)$ em $\cM(X,\eth)$ tal que
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $0 \leqslant \varphi_n(x) \leqslant \varphi_{n+1}(x)$ para todo $x \in X$ e $n \in \bN$.
        \item cada $\varphi_n$ possui um número finito de valores reais em sua imagem.
        \item $f(x) = \lim \varphi_n(x)$ para cada $x \in X$.
    \end{enumerate}
\end{pbox}
\begin{prf}
    
\end{prf}

Para terminar essa seção, vamos definir e ver um exemplo de funções mensuráveis entre espaços mensuráveis

\begin{dbox}
    Sejam $(X,\eth_X)$ e $(Y, \eth_Y)$ espaços mensuráveis. Dizemos que uma função $f : (X,\eth_X) \to (Y, \eth_Y)$ é mensurável quando
    \[
        f^{-1}(E) \in \eth_X
    \]
    para todo $E \in \eth_Y$
\end{dbox}

\begin{ex}
    
\end{ex}

\section{Medida}

\begin{dbox}
    Uma medida é uma função $\mu : \eth \to \bar{\mathbb{R}}$ que satisfaz
    \begin{enumerate}[leftmargin=*]
        \item $\mu(\emptyset) = 0$
        \item $\mu(E) \geqslant 0$ para todo $S \in \eth$
        \item se $(E_n)$ é uma sequência de subconjuntos disjuntos em $\eth$, então
        \[
            \mu \left( \bigcup_{n=1}^{\infty} S_n \right) = \sum_{n=1}^{\infty} \mu(S_n)
        \]
    \end{enumerate}
\end{dbox}

\obs A tripla $(X,\eth,\mu)$ onde $X$ é um conjunto, $\eth$ é uma $\sigma$-álgebra em $X$ e $\mu$ uma medida em $\eth$ é chamada de espaço de medida.

\obs (medida finita e $\sigma$-finita)

\begin{ex}
    Seja $(\mathbb{N}, \eth)$ um espaço mensurável, onde $\eth = \mathcal P (\mathbb N)$.
    A função $\mu : \eth \to \bar{\mathbb R}$ dada por $\mu(E) = \# S$, se $S$ é finito, e $\mu(S) = \infty$ se $S$ é infinito, é uma medida em $\eth$.
    Com efeito,
    \begin{enumerate}[leftmargin=*]
        \item $\mu(\emptyset) = 0$ por vacuidade
        \item $\mu(S) \geqslant 0$ por definição
        \item Seja $(S_n)$ uma sequência disjunta de elementos de $\cP(\bN)$. 
        Se existe um $k \in \bN$ tal que $\mu(S_k) = \infty$. Então a união é infinita pois contem pelo menos um conjunto infinito.
        Logo
        \[
            \mu\left( \bigcup_{n=1}^{\infty} S_n \right) = \infty = \sum_{n=1}^{\infty} \mu(S_n)
        \]
        Por outro lado, se $\mu(S_n) < \infty$ para todo $n \in \bN$ temos que a união pode ser infinita.
        Nesse caso
        \[
            \mu\left( \bigcup_{n=1}^{\infty} S_n \right) = \infty = \sum_{n=1}^{\infty} \mu(S_n)
        \]
        Por fim, se a união é finita, então existe $k \in \bN$ tal que $S_n = \emptyset$ para todo $n > k$. Assim
        \[
            \mu\left( \bigcup_{n=1}^{\infty} S_n \right) =\mu\left( \bigcup_{n=1}^{k} S_n \right) = \sum_{n=1}^{k} \mu(S_n) = \sum_{n=1}^{\infty} \mu(S_n).
        \]
    \end{enumerate}
    Portanto $\mu$ é uma medida.
\end{ex}

\begin{ex}
    Sejam $(X,\eth,\mu)$ um espaço de medida e $A \in \eth$ um conjunto fixo.
    Então a função $\lambda$ dada por
    \[
        \lambda(S) = \mu(A \cap S)
    \]
    é uma medida em $\eth$.
    Com efeito
    \begin{enumerate}[leftmargin=*]
        \item $\lambda(\emptyset) = \mu(A \cap \emptyset) = \mu(\emptyset) = 0$ pois $\mu$ é uma medida
        \item $\lambda(S) \geqslant 0$ por definição
        \item Seja $(S_n)$ uma sequência de conjuntos disjuntos em $\eth$. Então
        \[
            \lambda \left( \bigcup_{n=1}^{\infty} S_n \right) = \mu\left( A \cap \left( \bigcup_{n=1}^{\infty} S_n \right) \right) = \mu \left( \bigcup_{n=1}^{\infty} (A \cap S_n) \right) = \sum_{n=1}^{\infty} \mu(A \cap S_n) = \sum_{n=1}^{\infty} \lambda(S_n)
        \]
        pois $\mu$ é uma medida e a sequência $(A \cap S_n)$ é disjunta.
    \end{enumerate}
    Portanto $\lambda$ é uma medida
\end{ex}

\begin{ex}
    Sejam $\mu_1,\mu_2,\dots,\mu_n$ medidas em uma $\sigma$-álgebra $\eth$ e $c_1,c_2,\dots,c_j > 0$ . Então
    \[
        \mu(S) = \sum_{j=1}^{k} c_j \mu_j(E)
    \]
    é uma medida em $\eth$.
    De fato
    \begin{enumerate}[leftmargin=*]
        \item $\mu(\emptyset) = \sum_{j=1}^k c_j \mu_j(\emptyset) = 0$ pois $\mu_j(\emptyset) = 0$ para todo $j = 1,\dots,k$.
        \item $\mu(S) = \sum_{j=1}^k c_j \mu_j(S) \geqslant 0$ pois $c_j\mu_j(S) \geqslant 0$ para todo $j = 1,\dots,k$.
        \item Seja $(S_n)$ uma sequência de conjuntos disjuntos em $\eth$. Então
        \[
            \mu\left( \bigcup_{n=1}^{\infty} S_n \right) = \sum_{j=1}^{k} c_j \mu_j\left( \bigcup_{n=1}^{\infty} S_n \right) = \sum_{j=1}^{k} \sum_{n=1}^{\infty} c_j \mu_j(S_n) =\sum_{n=1}^{\infty}\sum_{j=1}^{k}  c_j \mu_j(S_n)  = \sum_{n=1}^{\infty} \mu(S_n).
        \]
    \end{enumerate}
    Portanto $\mu$ é uma medida.
\end{ex}

O próximo passo é estudar algumas propiedade elementares provenientes da definição de medida.

\begin{lbox}
    Seja $(X,\eth,\mu)$ um espaço de medida.
    Se $E \subseteq F$ onde $E$ e $F$ são conjuntos mensuráveis.
    Então $\mu(E) \leqslant \mu(F)$
\end{lbox}
\begin{prf}
    Note que
    \[
        F = E \cup F = E \cup (F \smallsetminus E),
    \]
    onde $E$ e $F \smallsetminus E$ são conjuntos mensuráveis disjuntos.
    Dessa forma
    \[
        \mu(F) = \mu(E) + \mu(F \smallsetminus E).
    \]
    Portanto, como $\mu$ é uma função não-negativa $\mu(F) \leqslant \mu(E).$
\end{prf}

\obs Da demonstração do lema anterior, conseguimos ver que se $E \subseteq F$
\[
    \mu(F \smallsetminus E) = \mu(F) - \mu(E)
\]
desde que $\mu(E) < \infty$.

\begin{lbox}
    Seja $\mu$ uma medida em $\eth$. Então
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item se $(E_n)$ é uma sequência crescente em $\eth$, então
        \[
            \mu\left( \bigcup_{n=1}^{\infty} E_n \right) = \lim \mu(E_n)
        \]
        \item se $(E_n)$ é uma sequência decrescente em $\eth$ e $\mu(F_1) < \infty$, então
        \[
            \mu\left( \bigcap_{n=1}^{\infty} E_n \right) = \lim \mu(E_n)
        \]
    \end{enumerate}
\end{lbox}
\begin{prf}
    
\end{prf}

\begin{dbox}
    Seja $(X,\eth,\mu)$ um espaço de medida. Dizemos que duas funções $f : X \to \bR$ são iguais em quase toda parte em $X$ e denotamos por $f = g$ qtp em $X$ se existe um conjunto $N \in \eth$ com $\mu(N) = 0$ tal que
    \[
        f(x) = g(x)
    \]
    para todo $x \not\in N$.
\end{dbox}

Um outro conceito importante é o conceito de convergência em quase toda parte

\begin{dbox}
    Seja $(X, \eth, \mu)$ um espaço de medida. Dizemos que uma sequência de funções $(f_n)$ converge para $f$ em quase toda parte, se existe um conjunto $N \in \eth$ com $\mu(N) = 0$ tal que
    \[
        \lim f_n(x) = f(x)
    \]
    para todo $x \not\in N$.
\end{dbox}

Por fim, para terminar essa seção, introduzimos o conceito de carga
\begin{dbox}
    Uma carga é uma função $\lambda : \eth \to \bR$ que satisfaz
    \begin{enumerate}[leftmargin=*]
        \item $\mu(\emptyset) = 0$
        \item $\mu(S) \geqslant 0$ para todo $S \in \eth$
        \item se $(S_n) \subseteq \eth$ é uma sequência de subconjuntos disjuntos em $\eth$, então
        \[
            \mu \left( \bigcup_{n=1}^{\infty} S_n \right) = \sum_{n=1}^{\infty} \mu(S_n)
        \]
    \end{enumerate}
    isto é uma medida que não satisfaz a não-negatividade.
\end{dbox}


\subsection{Construindo uma medida para $\bR$}

Nosso objetivo agora é construir uma medida para $\bR$ e mostrar o motivo de utlizar a algebra de Borel ao inves de $\cP(\bR)$.

\begin{dbox}
    O comprimento de um intervalo aberto $I$ é uma função $\ell$ dada por
    \[
        \ell(I) =
        \left\{  
            \begin{array}{ll}
                b  - a & \text{se } I = (a,b) \text{ com } a,b \in \bR \text{ e } a < b\\
                0 & \text{se } I = \emptyset\\
                \infty & \text{se } I = (-\infty, a) \text{ ou } I = (a,\infty) \text{ com } a\in\bR \\
                \infty & \text{se } I = (-\infty,\infty).
            \end{array}
        \right.
    \]
\end{dbox}

Seja $A \in \cP(\bR)$. O tamanho de $A$ deve ser no máximo a soma dos comprimentos de uma sequência de intervalos abertos tais que a união contem $A$. A definição abaixo formaliza essa ideia

\begin{dbox}
    A medida exterior $m(\,\cdot\,)$ de um conjunto $A \in \cP(\bR)$ é definida por
    \[
        m(A) = \inf\left\{\sum_{k=1}^{\infty} \ell(I_k) \,; I_1, I_2,\dots, \text{ são intervalos abertos tais que } A \subseteq \bigcup_{k=1}^\infty I_k \right\}.
    \]
\end{dbox}

Essa definição envolve uma soma infinita de uma sequência $t_1,t_2,\dots,$ de elementos de $[0,\infty]$, que é $\infty$ se pelo menos algum $t_k = \infty$, ou se a série definida pelas somas parciais de $t_k$ é divergente. Dito isso
\[
    \sum_{n=1}^{\infty} t_k = \lim_{n\to\infty} \sum_{k=1}^{n} t_k.
\]

\begin{ex}
    Conjuntos finitos tem medida exterior nula.
    Seja $A = \{a_1,\dots,a_n\} \in \cP(\bR)$ um conjunto finito.
    Dado $\varepsilon > 0$ defina a sequência $I_k$ de intervalos abertos por
    \[
        I_k =
        \left\{
            \begin{array}{ll}
                (a_k - \varepsilon, a_k + \varepsilon) &\text{se } k \leqslant n\\
                \emptyset &\text{se } k > n
            \end{array}
        \right.
    \]
    Então $I_1, I_2,\dots,$ é uma sequência de intervalos abertos tais que a união contem $A$. Dito isso
    \[
        \sum_{n=1}^{\infty} \ell(I_k) = 2\varepsilon n.
    \]
    Logo, $m(A) \leqslant 2\varepsilon n$.
    Como $\varepsilon$ é arbitrário, temos que $m(A) = 0$
\end{ex}

A proposição abaixo generaliza esse exemplo para conjuntos enumeráveis

\begin{pbox}
    Conjuntos enumeráveis tem medida exterior nula.
\end{pbox}
\begin{prf}
    Seja $A = \{a_1,a_2,\dots\} \in \cP(\bR)$ um conjunto enumerável. Dado $\varepsilon > 0$, para todo $k \in \bN$ defina a sequência
    \[
        I_k = \left( a_k - \frac{\varepsilon}{2^k}, a_k + \frac{\varepsilon}{2^k} \right).
    \]
    Dessa forma, $I_1,I_2,\dots,$ é uma sequência de intervalos abertos tais que a união contem $A$.
    Como
    \[
        \sum_{k=1}^{\infty} \ell(I_k) = 2\varepsilon
    \]
    temos que $m(A) < 2\varepsilon$.
    Pelo fato de $\varepsilon$ ser arbitrário, temos que $m(A) = 0$.
\end{prf}

Uma outra propiedade da medida exterior é sua invariância a translação

\begin{pbox}
    Seja $t \in \bR$ e $A \in \cP(\bR)$.
    Então
    \[
        m(A) = m(t + A),
    \]
    onde 
    \[
        t + A = \{t + a \,; a \in A\}
    \]
\end{pbox}
\begin{prf}
    Seja $I_1,I_2,\dots,$ uma sequência de intervalos abertos tais que a união contem $A$.
    Dito isso $t + I_1, t+ I_2,...,$ é uma sequência de intervalos abertos tais que a união contem $t + A$.
    Logo
    \[
        m(t + A) \leqslant \sum_{k=1}^{\infty} \ell(t + I_k) = \sum_{k=1}^{\infty} \ell(I_k).
    \]
    Fazendo o ínfimo do ultimo termo, temos que $m(t + A) \leqslant m(A)$.

    Para verificar a desigualdade na outra direção note que $A = -t + (t + A)$, então utilizando a desigualdade que acabamos de provar temos
    \[
        m(A) = m(t - (t + A)) \leqslant (t + A).
    \]
    Portanto $m(A) = m(t + A)$
\end{prf}

(texto motivador)

\begin{pbox}
    Seja $(A_n)$ uma sequência de subconjuntos de $\bR$. Então
    \[
        m\left( \bigcup_{n=1}^{\infty} A_n \right) \leqslant \sum_{n=1}^{\infty} m(A_n)
    \]
\end{pbox}
\begin{prf}
    
\end{prf}

(medida do intervalo fechado)
(explicar teorema de Heine-Borel)

\begin{pbox}
    Seja $a, b \in \bR$ com $a < b$.
    Então $m([a,b]) = b -a$
\end{pbox}

(o pulo do gato)

\begin{pbox}
    Existem subconjuntos disjuntos de $\bR$ $A$ e $B$ tais que
    \[
        m(A \cup B) \neq m(A) + m(B)
    \]
\end{pbox}
\begin{prf}
    
\end{prf}

\begin{tbox}
    Não é possível definir uma medida $\mu$ que generaliza $\ell$ em $\cP(\bR)$.
\end{tbox}
\begin{prf}
    
\end{prf}

(agora mostrar que em $\cB$ é uma medida)

\section{Integral de Lebesgue}

A integral de Lebesgue é uma extensão da integral de Riemann, projetada para lidar com uma classe mais ampla de funções e conjuntos. Ela permite calcular integrais considerando a medida dos valores que a função assume, tornando-se uma ferramenta fundamental na teoria da medida e análise funcional.

The "point" of Lebesgue integration is not that it's a way to do standard integrals of calculus by some new method. It's that the definition of the integral is more theoretically powerful: it leads to more elegant formalism and cleaner results (like the dominated convergence theorem) that are very useful in harmonic/functional analysis and probability theory. 

\begin{figure}
    \centering
    \includegraphics[width=3cm]{lebesgue.jpeg}
    \caption{Henri Lebesgue (1875 -- 1941)}
\end{figure}

Nesta seção, abordaremos os conceitos fundamentais da integral de Lebesgue, destacamos importância aos teoremas da convergência monotona e convergência dominada.
Vale ressaltar que nessa seção estaremos trabalhando em um espaço de medida $(X, \mathfrak{M}, \mu)$ fixo.

\begin{dbox}
    Uma função $\varphi : X \to \bR$ é simples se assume apenas um número finito de valores em sua imagem ($\# \varphi(X) < \infty$)
\end{dbox}

Uma função $\varphi$ simples e mensurável pode ser representada da seguinte forma
\begin{equation} \label{eq:representacaopadrao}
    \varphi = \sum_{j = 1}^n a_j \chi_{E_j}
\end{equation}
onde $a_j \in \bR$ e $\chi_{E_j}$ é a função caracteristica do conjunto $E_j \in \eth$. Essa representação é única pelo fato de todos $a_j$ serem distintos, os conjuntos $E_j$ serem disjuntos para todo $j = 1,\dots,n$, além disso, $X = \bigcup_{j=1}^n E_j$.    

\begin{dbox}
    Seja $\varphi \in \cM^+(X,\eth)$ uma função simples com a representação (\ref{eq:representacaopadrao}). Definimos a integral de $\varphi$ em relação a $\mu$ por
    \begin{equation*}
        \int \varphi \, d\mu = \sum_{j=1}^n a_j \mu(E_j)
    \end{equation*}
\end{dbox}

\obs Adotamos a convenção $0 \cdot \infty = 0$. Dessa forma a integral da função identicamente nula é $0$ indepdendente se o conjunto tem medida finita ou infinita.

\begin{lbox} \label{lm:propiedades-elementares-simples}
    Dadas funções simples $\varphi, \psi \in M^+(X, \eth)$ e $c \geqslant 0$ tem-se
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $\displaystyle \int c \varphi \, d\mu = c \int \varphi \, d\mu$
        \item $\displaystyle \int (\varphi + \psi) \, d\mu = \int \varphi \,d\mu + \int \psi \, d\mu$
        \item A aplicação
        $\displaystyle \lambda(E) = \int \varphi \chi_E \, d\mu$
        para todo $E \in \eth$ é uma medida em $\eth$.
    \end{enumerate}
\end{lbox}
\begin{prf}
    ~

    \textbf{(a)} Mostremos que
    \[
        \int c \varphi \, d\mu = c \int \varphi \, d\mu.
    \]
    Com efeito, para $c = 0$,
    \[
        \int c \varphi \, d\mu = 0 = c \int \varphi \, d\mu.
    \]
    por outro lado, para $c > 0$, podemos escrever $c\varphi$ da seguinte forma
    \[
        c\varphi = \sum_{j = 1}^{n} ca_j \chi_{E_j}
    \]
    Dito isso,
    \[
        \int c \varphi \, d\mu = \sum_{j = 1}^{n} ca_j \mu(E_j) = c\sum_{j = 1}^{n} a_j \mu(E_j) = c\int \varphi \, d\mu
    \]

    \textbf{(b)} Agora, mostremos que 
    \[
        \int (\varphi + \psi) \, d\mu = \int \varphi \,d\mu + \int \psi \, d\mu
    \]
    Para isso, podemos considerar as representações padrões das funções simples $\varphi, \psi \in \cM^+(X,\eth)$
    \[
        \varphi = \sum_{j = 1}^{n} a_j \chi_{E_j} \quad \text{ e } \quad \psi = \sum_{k = 1}^{m} b_k \chi_{F_k},
    \]
    dessa forma, obtemos uma representaçao para $\varphi + \psi$ dada por
    \[
        \varphi + \psi = \sum_{j = 1}^{n} a_j \chi_{E_j} + \sum_{k = 1}^{m} b_k \chi_{F_k}.
    \]
    No entanto, essa representação não necessáriamente é a representação padrão, pois é possível que existam $j_0, j_1 \in \{1,\dots,n\}$ e $k_0, k_1 \in \{1,\dots,m\}$, tais que $a_{j_0} + b_{k_0} = a_{j_1} + b_{k_1}$.

    Considere os elementos distintos do conjunto
    \[
        H = \{a_j + b_k \,; j \in \{1,\dots,n\}, k \in \{1,\dots,m\}\}
    \]
    e denominamos os elementos por $c_h$ com $h = 1,\dots,\# H$, e $G_h$ a união de todos os conjuntos $E_j \cap F_k$ tais que $a_j + b_k = c_h$

    Afirmamos que os conjuntos $G_h$ são dois-a-dois disjuntos. De fato
    \[
        G_h \cap G_H = (E_j \cap F_k) \cap (E_J \cap F_K) = E_j \cap E_J \cap F_k \cap F_K = \emptyset \cap \emptyset = \emptyset,
    \]
    sendo assim
    \[
        \mu(G_h) = \widetilde{\sum} \mu(E_j \cap F_k)
    \]
    onde o somatório $\widetilde{\Sigma}$ está relacionado aos indices $1 \leqslant j \leqslant n$ e $1 \leqslant k \leqslant m$ tais que $a_j + b_k = c_h$

    Portanto definimos a representação padrão de $\varphi + \psi$ por
    \[
        \varphi + \psi = \sum_{h = 1}^{\# H} c_h \chi_{G_h},
    \]
    deste modo
    \[
        \begin{aligned}
            \int (\varphi + \psi) \, d\mu &= \sum_{h = 1}^{\# H} c_h \textcolor{ForestGreen}{\mu(G_h)}\\
            &= \sum_{h = 1}^{\# H} \textcolor{ForestGreen}{\widetilde{\sum}} c_h \textcolor{ForestGreen}{\mu (E_j \cap F_k)}\\
            &= \sum_{j = 1}^{n} \sum_{k = 1}^{m} (a_j + b_k) \mu(E_j \cap F_k)\\
            &= \sum_{j = 1}^{n} \sum_{k = 1}^{m} a_j \mu(E_j \cap F_k) + \sum_{j = 1}^{n} \sum_{k = 1}^{m} b_k \mu(E_j \cap F_k)
        \end{aligned}
    \]
    como $X$ é a união das famílias $\{E_j\}$ e $\{F_k\}$, temos que
    \[
        \mu(E_j) = \sum_{k = 1}^{m} \mu(E_j \cap F_k) \quad{ e } \quad \mu(F_k) = \sum_{j = 1}^{n} \mu(E_j \cap F_k).
    \]
    Portanto
    \[
        \int (\varphi + \psi) \, d\mu = \sum_{j = 1}^{n}  a_j \mu(E_j) + \sum_{k = 1}^{m}  b_k \mu(F_k) = \int \varphi \, d\mu + \int \psi \, d\mu.
    \]

    \textbf{(c)} Por fim, queremos mostrar que
    \[
        \lambda(E) = \int \varphi \chi_E \, d\mu
    \]
    é uma medida em $\eth$. Com efeito,
    \begin{enumerate}
        \item $\displaystyle \lambda (\emptyset) = \int \varphi \chi_{\emptyset} \, d\mu = \int 0 \, d\mu = 0$
        \item Note que como $\varphi \in \cM^+(X,\eth)$ os elementos $a_j$ na representação padrão são não negativos. Com efeito, sabemos que $0 \leqslant \varphi(x)$ para todo $x \in X$, daí
        \[
            0 \leqslant \varphi(x) = \sum_{j=1}^{n} a_j \chi_{E_j}(x),
        \]
        porem, como os conjuntos $E_j$ são disjuntos, existe um único $1 \leqslant j_0 \leqslant n$ tal que $x \in E_{j_0}$. 
        Dessa forma, para todo $j \neq j_0$, $\chi_{E_j}(x) = 0$, então
        \[
            0 \leqslant \varphi(x) = \sum_{j=1}^{n} a_j \chi_{E_j}(x) = a_{j_0}
        \]
        Daí,
        \[
            \lambda(E) = \int \varphi \chi_{E} \, d\mu = \sum_{j=1}^{n} a_j \mu(E \cap E_j) \geqslant 0
        \]
        pois mostramos que $a_j > 0$ para todo $1 \leqslant j \leqslant n$ e $\mu$ é uma medida.
        \item Considere $(F_k) \subseteq \eth $ uma sequência disjunta de conjuntos
        \[
            \begin{aligned}
                \lambda \left( \bigcup_{k=1}^\infty F_k \right) &= \int \varphi \chi_{\medcup F_k}\\ 
                &= \sum_{j = 1}^{n} a_j \mu \left( \left( \bigcup_{k = 1}^\infty F_k \right) \cap E_j \right)\\
                &= \sum_{j = 1}^{n} a_j \mu \left( \bigcup_{k=1}^\infty (F_k \cap E_j) \right)\\
                &= \sum_{j=1}^{n} a_j \sum_{k=1}^{\infty} \mu(F_k \cap E_j)\\
                &= \sum_{j=1}^{n}\sum_{k=1}^{\infty} a_j  \mu(F_k \cap E_j)\\
                &= \sum_{k=1}^{\infty}\sum_{j=1}^{n} a_j  \mu(F_k \cap E_j)\\
                &= \sum_{k=1}^{\infty} \int \varphi \chi_{F_k} \, d\mu\\
                &= \sum_{k=1}^{\infty} \lambda(F_k)
            \end{aligned}
        \]
    \end{enumerate}
\end{prf}

\begin{ex}
    A função
    \[
        \chi_{\bQ}(x) = 
        \left\{  
            \begin{array}{ll}
                1 &\text{se } x \in \bQ\\
                0 &\text{se } x \not\in \bQ
            \end{array}
        \right.
    \]
    é um exemplo clássico nos cursos de análise na reta de uma função que não é integrável. 
    Porem essa afirmação é válida apenas quando estamos trabalhando com a integral de Riemann, pois utlizando a integral de Lebesgue, essa função tem integral com resultado bem definido
    Com efeito, considere o espaço de medida $(\bR, \cB, \mu^*)$ onde $\cB$ é a álgebra de Borel e $\mu^*$ é medida exterior (de Lebesgue).
    Dessa forma
    \[
        \int \chi_\bQ \,d\mu^* = \mu^*(\bQ) = 0.
    \]
    pois $\bQ$ é enumerável.
\end{ex}

Agora, podemos extender a definição da integral de Lebesgue para qualquer função mensurável não negatíva (não necessáriamente simples)

\begin{dbox}
    A integral de uma função $f \in \cM^+(X,\eth)$ em relação a $\mu$ é definida por
    \[
        \int f \, d\mu = \sup_\varphi \int \varphi \, d\mu
    \]
    onde $\varphi$ são funções simples em $\mathcal{M}^+(X,\eth)$ tais que $0 \leqslant \varphi(x) \leqslant f(x)$ para todo $x \in X$.
\end{dbox}

Além disso, definimos a integral da função $f$ sobre um conjunto mensurável

\begin{dbox}
    A integral de $f \in \cM^+(X,\eth)$ sobre um conjunto $E \in \eth$ é dada por
    \[
        \int_E f \, d\mu = \int f \chi_E \, d\mu
    \]
\end{dbox}

\dots

\begin{lbox} \label{lm:propiedades-integral-nao-negativa}
    Sejam $f, g \in \cM^+(X,\eth)$ e $E, F \in \eth$.
    Então são válidas as afirmações abaixo
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item se $f \leqslant g$ tem-se
        \[
            \int f \, d\mu \leqslant \int g \, d\mu
        \]
        \item se $E \subseteq F$ tem-se
        \[
            \int_E f \, d\mu \leqslant \int_F f \, d\mu
        \]
    \end{enumerate}
\end{lbox}
\begin{prf}
    ~

    \textbf{(a)} Seja $\varphi$ uma função simples em $M^+$, então
    \[
        \int f \, d\mu = \sup_{\substack{0 \leqslant \varphi \leqslant f \\ \varphi \text{ simples} \\ \varphi \in M^+}} \int \varphi \, d \mu \leqslant \sup_{\substack{0 \leqslant \varphi \leqslant g \\ \varphi \text{ simples} \\ \varphi \in M^+}} \int \varphi \, d \mu = \int g \, d\mu
    \]

    \textbf{(b)} Como $f \chi_E \leqslant f \chi_F$, segue do item anterior que
    \[
        \int f \chi_E \, d\mu \leqslant \int f \chi_F \, d\mu,
    \]
    dito isso
    \[
        \int_E F \, d \mu \leqslant \int_F f \, d\mu.
    \]
\end{prf}

Um dos resultados mais importantes da teoria da medida é o Teorema da Convergência Monótona, que será enunciado e demonstraado a seguir.

\begin{tbox}[Teorema da Convergência Monótona] \label{thm:teorema-da-convergencia-monotona}
    Seja $(f_n)$ uma sequência monótona crescente de funções mensuráveis não-negativas convergindo para $f$, então,
    \[
        \int f \, d\mu = \lim \int f_n \, d \mu.
    \]
\end{tbox}
\begin{prf}
    Como $f_n \to f$ onde $(f_n) \subseteq \cM^+(X,\eth)$, pelo corolário ?? temos que $f \in \cM^+(X,\eth)$.
    Pela monotonicidade da sequência $f_n \leqslant f_{n+1} \leqslant f$, pelo item \textbf{(a)} do lema anterior
    \[
        \int f_n \, d\mu \leqslant \int f_{n+1} \, d\mu \leqslant \int f \, d\mu
    \]
    para todo $n \in \bN$. 
    Dito isso
    \[
        \lim \int f_n \, d\mu \leqslant \int f \, d\mu.
    \]

    Por outro lado, seja $0 < \alpha < 1$ e $\varphi$ uma função simples mensurável tal que $0 \leqslant \varphi \leqslant f$ e considere
    \[
        A_n = \{x \in X \,; f_n(x) \geqslant \alpha \varphi(x)\} = \{x \in X \,; [f_n - \alpha \varphi](x) \geqslant 0\}
    \]
    como $f_n$ e $\varphi$ são funções mensuráveis, temos que $A_n \in \eth$.
    Além disso, $A_n \subseteq A_{n+1}$ já que $f_n \leqslant f_{n+1}$ e $X = \bigcup_{n =1}^{\infty} A_n$ pois $\sup \{f_n\} = f$, $\alpha \in (0,1)$ e $0 \leqslant \varphi \leqslant f$.
    Daí, pelo lema anterior
    \begin{equation} \label{eq:1.13}
        \int_{A_n} \alpha \varphi \,d\mu \leqslant \int_{A_n} f_n \, d\mu \leqslant \int f_n \, d\mu.
    \end{equation}
    Dessa forma, a sequência $(A_n)$ é monótona crescente e tem união $X$, segue dos lemas ?? e ?? que
    \[
        \int \varphi \, d\mu = \lim \int_{A_n} \varphi \, d\mu
    \]
    Com efeito, sabemos que
    \[
        \lambda(E) = \int \varphi \chi_{E} \, d \mu
    \]
    é uma medida, assim
    \[
        \int \varphi \, d\mu = \int \varphi \chi_{\medcup A_n} \, d\mu = \lambda \left( \bigcup_{n=1}^\infty A_n \right) = \lim \lambda(A_n) = \lim \int \varphi \chi_{A_n} \, d\mu = \lim \int_{A_n} \varphi \, d\mu
    \]
    ... fazendo $n \to \infty$ em \ref{eq:1.13}
    \[
        \alpha \int \varphi \, d\mu \leqslant \lim \int f_n \, d\mu.
    \]
    Como a equação acima é válida para todo $0 < \alpha < 1$, obtemos
    \[
        \int \varphi \, d\mu \leqslant \lim \int f_n \, d\mu,
    \]
    ainda mais, segue do fato de $\varphi$ ser uma função simples tal que $0 \leqslant \varphi \leqslant f$ tem-se que
    \[
        \int f \, d\mu = \sup_{\substack{0 \leqslant \varphi \leqslant f \\ \varphi \text{ simples} \\ \varphi \in M^+}} \int \varphi \, d\mu \leqslant \lim \int f_n d \mu.
    \]
    Assim
    \[
        \int f \, d\mu \leqslant \lim \int f_n \, d\mu
    \]
    Portanto por ?? e ??, chegamos a
    \[
        \int f \, d\mu = \lim \int f_n \, d\mu
    \]
\end{prf}

O Lema \ref{lm:propiedades-elementares-simples} sobre as operações elementares envolvendo a integral de funções simples mensuráveis e não-negativas, tambem é válido para funções mensuráveis não-negativas quaisquer como mostra o corolário abaixo

\begin{cbox} \label{cl:propiedades-elementares-nao-negativa}
    Sejam $f, g \in \cM^+(X,\eth)$ e $c > 0$, então são válidas as seguintes afirmações
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $\displaystyle \int cf \, d\mu = c \int f \,d \mu$
        \item $\displaystyle \int (f + g) \, d\mu = \int f \,d \mu + \int g \, d\mu$
    \end{enumerate}
\end{cbox}
\begin{prf}
    ~

    \textbf{(a)} Se $c = 0$
    \[
        \int c f \, d\mu = 0 = c \int f \, d\mu.
    \]
    Se $c > 0$, considere $(\varphi_n)$ uma sequência monótona crescente de funções simples em $\cM^+(X,\eth)$ convergindo para $f$ (lema ??). Dito isso, $(c\varphi_n)$ é um sequência monótona crescente que converge para $cf$. Pelo Lema \ref{lm:propiedades-elementares-simples} e pelo Teorema da Convergência Monótona, temos que
    \[
        \int cf \, d\mu = \lim \int c \varphi_n \, d\mu = c \lim \int \varphi_n \, d\mu = c \int f \, d\mu.
    \]

    \textbf{(b)} De forma análoga considere $(\varphi_n)$ e $(\psi_n)$ sequências monótonas crescentes de funçoes simplies em $\cM^+(X,\eth)$ que convergem para $f$ e $g$ respectivamente. Dessa forma $(\varphi_n + \psi_n)$ é uma sequência monótona crescente que converge para $f + g$. Portanto
    \[
        \int (f+g) \, d\mu = \lim \int (\varphi_n + \psi_n) \, d \mu = \lim \int \varphi_n \, d\mu + \lim\int \psi_n \, d\mu = \int f \, d\mu + \int g \, d\mu.
    \]
\end{prf}

Um outro resultado importante dessa seção é o lema de Fatou que será apresentado a seguir.

\begin{lbox}[Lema de Fatou] \label{lm:lema-de-fatou}
    Se $(f_n) \subseteq M^+ (X,\eth)$, então
    \[
        \int\liminf f_n \, d\mu\leqslant\liminf \int f_n \,d\mu.
    \]
\end{lbox}
\begin{prf}
    Seja $g_m = \inf \{ f_m, f_{m+1},\dots\}$, dessa forma $g_m \leqslant f_n$ para todo $m \leqslant n$.
    Sendo assim,
    \[
        \int g_m \, d\mu \leqslant \int f_n \, d\mu
    \]
    para todo $m \leqslant n$. Desse modo
    \[
        \int g_m \,d\mu \leqslant \liminf \int f_n \, d\mu.
    \]
    Por outro lado, temos que $(g_m)$ é crescente e converge para seu supremo, ou seja, $\liminf f_n$.
    Portanto pelo \nameref{thm:teorema-da-convergencia-monotona}
    \[
        \int \liminf f_n \, d\mu = \lim \int g_m \,d\mu \leqslant \liminf \int f_n\, d\mu.
    \]
\end{prf}

Da mesma forma que definimos uma medida através de uma função simples em $\cM^+(X,\eth)$ podemos generalizar esse resultado para funções que não são necessáriamente simples

\begin{cbox} \label{cl:medida-funcao-nao-negativa}
    Seja $f \in \cM^+(X,\eth)$.
    A aplicação $\lambda : \eth \to \overline\bR$ definida por
    \[
        \lambda(E) = \int f \chi_E \, d\mu 
    \]
    é uma medida.
\end{cbox}
\begin{prf}
    ~

    \begin{enumerate}
        \item $\displaystyle\lambda(\emptyset) = \int_{\emptyset} f \, d\mu = \int f \chi_{\emptyset} \, d\mu = \int 0  \, d\mu = 0$.
        
        \item Como $f \in \cM^+(X,\eth)$ temos que $\lambda(E) = \int_E f \, d\mu \geqslant \int_E 0 \, d\mu = 0$.

        \item Sejam $E_n$ uma sequência de conjuntos disjuntos em $\eth$, $E = \bigcup_{n=1}^{\infty} E_n$ e considere $f_n$ definida por
        \[
            f_n = \sum_{k=1}^{n} f \chi_{E_k}
        \]
        Desse modo, pelo Corolário ?? e por indução temos que
        \[
            \int f_n \, d\mu = \int \sum_{k=1}^{n} f \chi_{E_k} \, d\mu = \sum_{k=1}^{n} \int f \chi_{E_k} = \sum_{k=1}^{n} \lambda(E_k).
        \]
        Além diso, podemos escrever
        \[
            \lim f_n = \lim \sum_{k=1}^{n} f \chi_{E_k} = \sum_{k=1}^{\infty} f \chi_{E_k} = f \chi_E
        \]
        desde que $(E_n)$ é uma sequência de conjuntos disjuntos.

        Por fim, como $(f_n)$ é uma sequência crescente em $M^+$ que converge para $f \chi_E$, pelo Teorema da Convergência Monótona tem-se que
        \[
            \lambda(E) = \int f \chi_E \, d\mu = \int \lim f_n \,d\mu = \lim \int f_n \, d\mu = \sum_{k=1}^{\infty} f \chi_{E_k}
        \]
    \end{enumerate}
    Portanto, $\lambda$ é uma medida.
\end{prf}

\begin{cbox} \label{cl:integral-medida-nula}
    Seja $f \in \cM^+(X,\eth)$.
    Então, $f(x) = 0$ em quase toda parte de $X$ se, e somente se,
    \[
        \int f \, d\mu = 0
    \]
\end{cbox}
\begin{prf}
    Suponha que $\displaystyle \int f\,d\mu = 0$ e considere o conjunto
    \[
        E_n = \left\{ x \in X \,; f(x) > \frac{1}{n} \right\}
    \]
    para todo $n \in \bN$, de modo que $f \geqslant \frac{1}{n}\chi_{E_n}$.
    Note que
    \[
        0 = \int f \,d\mu \geqslant \tfrac{1}{n} \! \int \chi_{E_n} \, d\mu = \tfrac{1}{n}\mu(E_n) \geqslant 0.
    \]
    Isto nos diz que $\mu(E_n) = 0$ para todo $n \in \bN$. Além disso
    \[
        E = \{x \in X \,; f(x) > 0\} = \bigcup_{n=1}^{\infty} E_n
    \]
    pois se $x \in \bigcup_{n=1}^{\infty} E_n$, então existe $n_0 \in \bN$ tal que $x \in E_{n_0}$, logo
    \[
        f(x) > \frac{1}{n_0} > 0.
    \]
    Assim, $x \in E$.\\[5pt]
    Por outro lado, se $x \in E$, temos que $f(x) > 0$.
    Utilizando a propiedade Arquimediana, existe $n_0 \in \bN$ tal que
    \[
        \frac{1}{f(x)} < n_0 \iff f(x) > \frac{1}{n_0},
    \]
    isto é, $x \in E_{n_0} \subseteq \bigcup_{n=1}^{\infty} E_n$.\\[5pt]
    Portanto $E = \bigcup_{n=1}^{\infty} E_n$ como queriamos mostrar. Dito isso
    \[
        \mu(E) = \mu\left( \bigcup_{n=1}^{\infty} E_n \right) = \lim \mu(E_n) = 0
    \]
    desde que $(E_n)$ é uma sequência crescente.
    Isto nos diz que $f(x) = 0$, para todo $x \in E^{\cC}$ com $\mu(E) = 0$, ou seja $f(x) = 0$ em quase toda parte em $X$.

    Reciprocamente, suponha que $f(x) = 0$ em quase toda parte em $X$. Se $E = \{x \in X \,; f(x) > 0\}$, então $\mu(E) = 0$.
    Sendo assim, considerando $f_n = n \chi_E$ para todo $n \in \bN$, temo que $f \leqslant \liminf f_n$ e pelo Lema de Fatou
    \[
        0 \leqslant \int f \, d\mu \leqslant \liminf \int f_n \,d\mu = \liminf n\mu(E) = 0
    \]
    Portanto
    \[
        \int f \, d\mu = 0.
    \]
\end{prf}

\begin{cbox} \label{cl:medida-absolutamente-continua}
    Seja $f \in \cM^+(X,\eth)$, então a aplicação $\lambda : \eth \to \bR$ definida por
    \[
        \lambda(E) = \int_E f \, d\mu.
    \]
    Então, a medida $\lambda$ é absolutamente contínua em relação a $\mu$, isto é, se $\mu(E) = 0$, então $\lambda(E) = 0$
\end{cbox}
\begin{prf}
    Se $\mu(E) = 0$, então
    \[
        f\chi_E(x) = 
        \left\{
            \begin{array}{cl}
                f(x) & x \in E\\
                0 & x \not\in E
            \end{array}
        \right.
    \]
    isto é, $f \chi_E = 0$ em quase toda parte. Portanto
    \[
        \lambda(E) = \int_E f \,d\mu = \int f\chi_E \, d\mu = 0.
    \]
\end{prf}

O corolário abaixo é uma versão mais geral do Teorema da Convergência Monótona.

\begin{cbox} \label{cl:convergencia-monotona-qtp}
    Se $(f_n)$ é uma sequência monótona crescente de funções em $\cM^+(X,\eth)$ que converge em quae toda parte de $X$ para a função $f \in \cM^+(X,\eth)$, então
    \[
        \int f \, d\mu = \lim \int f_n \, d\mu
    \]
\end{cbox}
\begin{prf}
    Seja $N$ um conjunto de medida nula. Suponha que $(f_n)$ converge para $f$ em todo o pontos de $M = N^{\cC}$.
    Dessa forma, a sequência $(f_n \chi_M)$ converge para $f\chi_M$, pelo Teorema da Convergência Monótona, temos que
    \[
        \int f \chi_M \, d\mu = \lim \int f_n \chi_M \, d\mu.
    \]
    Além disso, podemos escrever $f$ e $f_n$ da seguinte forma
    \[
        f = f \chi_M + f \chi_N \;\text{ e }\; f_n = f_n \chi_M + f_n \chi_N,
    \]
    pois $M = N^{\cC}$.
    Como $\mu(N) = 0$, as funções $f \chi_N$ e $f_n \chi_N$ são nulas em quase toda parte.
    Dito isso, pelo Corolário \ref{cl:integral-medida-nula}, segue que
    \[
        \lim \int f_n \, d\mu = 
    \]
\end{prf}

O resultado abaixo ...

\begin{cbox}
    Seja $(g_n)$ uma sequência em $\cM^+(X,\eth)$. Então
    \[
        \int \left( \sum_{n=1}^{\infty} g_n \right) \, d\mu = \sum_{n=1}^{\infty} \int g_n \, d\mu.
    \]
\end{cbox}
\begin{prf}
    Seja $f_n = g_1 + \cdots + g_n$ para todo $n \in \bN$. Como $g_n \geqslant 0$, temos que $(f_n)$ é uma sequência crecente que converge para $f = \sum_{n=1}^{\infty} g_n$. 
    Pelo Teorema da Convergência Monótona, segue que
    \[
        \lim_{k \to \infty} \int \left( \sum_{n=1}^{k} g_n \right) \, d\mu = \lim_{k\to\infty} \int f_k \, d \mu = \int f \, d\mu = \int \left( \sum_{n=1}^{\infty} g_n \right) \, d\mu.
    \]
    Por outro lado, como $g_n \in \cM^+(X,\eth)$, para todo $n \in \bN$, utilizando indução e o Corolário ??
    \[
        \lim_{k \to \infty} \int \left( \sum_{n=1}^{k} g_n \right) \,d\mu = \lim_{k\to \infty} \sum_{n=1}^{k} \int g_n \, d\mu = \sum_{n=1}^{\infty} \int g_n \, d\mu
    \]
    Portanto
    \[
        \int \left( \sum_{n=1}^{\infty} g_n \right) \, d\mu = \sum_{n=1}^{\infty} \int g_n \, d\mu.
    \]
\end{prf}

Finalmente, podemos definir a integral de uma função mensurável qualquer

\begin{dbox}
    O conjunto $\cL(X,\eth,\mu)$ das funções integráveis consite em todas as funções $f : X \to \bR$ mensuráveis, tai que as integrais
    \[
        \int f^+ \,d\mu \;\text{ e }\; \int f^- \,d\mu
    \]
    são finitas.
    Neste caso, definimos a integral de $f$ em relação a $\mu$ por
    \[
        \int f \, d\mu = \int f^+ \, d\mu - \int f^- \, d\mu,
    \]
    e se $E$ é um conjunto mensurável
    \[
        \int_E f \, d\mu = \int_E f^+ \, d\mu - \int_E f^- \, d\mu.
    \]
\end{dbox}

Qualquer representação de $f$ como subtrações de funções integráveis não-negativas resulta no mesmo valor da integral da definição acima.
Com efeito seja $f$ uma função integravel e escreva $f$ como $f = f_1 - f_2$, onde $f_1$ e $f_2$ são funções integráveis não negativas, então
\[
    \int f \,d\mu = \int f_1 \, d\mu - \int f_2 \,d \mu.
\]
Note que
\[
    f^+ - f^- = f = f_1 - f_2 \iff f^+ + f_2 = f_1 + f^-.
\]
Dessa forma, pelo Corolário ?? temos que
\[
    \int f^+ \,d\mu + \int f_2 \, d\mu = \int f_1\,d\mu + \int f^- \, d\mu.
\]
Como $f_1, f_2, f^+,f^- \in \cL(X,\eth,\mu)$, segue que
\[
    \int f^+ \,d\mu - \int f^- \, d\mu = \int f_1 \,d\mu - \int f_2 d\mu.
\]
Isto é
\[
    \int f \, d\mu = \int f_1 \,d\mu + \int f_2 \,d\mu.
\]

Da mesma forma que definimos um medida a partir da integral de uma função não-negativa, podemos definir uma carga partindo da integral de uma função integrável qualquer como exibe o lema abaixo

\begin{lbox} \label{lm:carga-integral}
    Seja $f \in \cL(X,\eth,\mu)$. A aplicação $\lambda : \eth \to \bR$ definida por
    \[
        \lambda(E) = \int_E f \, d\mu
    \]
    é uma carga, denominada integral indefinida de $f$ (em relação a $\mu$).
\end{lbox}
\begin{prf}
    Como $f^+, f^- \in M^+(X,\eth,\mu)$, pelo Corolário ?? temos que as funções $\lambda^+, \lambda^- : \eth \to \bR$ dadas por
    \[
        \lambda^+(E) = \int_E f^+ \,d\mu \;\text{ e }\; \lambda^-(E) = \int_E f^- \,d\mu.
    \]
    são medidas em $\eth$ e são finitas pelo fato de $f$ ser uma função integrável. Como $\lambda = \lambda^+ - \lambda^-$ temos que $\lambda$ é uma carga.
\end{prf}

Como a aplicação $\lambda$ definida acima é uma carga, vemos que se $(E_n)$ é uma sequência de conjuntos disjuntos tal que $\bigcup_{n=1}^{\infty} E_n = E$, então
\[
    \int_E f \,d\mu = \lambda(E) = \lambda \left( \bigcup_{n=1}^{\infty} E_n \right) = \sum_{n=1}^{\infty} \lambda(E_n) = \sum_{n=1}^{\infty} \int_{E_n} f\,d\mu,
\]
ou seja
\[
    \int_E f \, d\mu = \sum_{n=1}^{\infty} \int_{E_n} f\,d\mu
\]

Agora, estamos prontos para estudar algumas propiedades elementares das integrais de funções mensuráveis

\begin{tbox} \label{thm:modulo-funcao-integravel}
    Seja $f : X \to \bR$ uma função mensurável.
    Então $f \in \cL(X,\eth,\mu)$ se, e somente se, $|f| \in \cL(X,\eth,\mu)$.
    Além disso
    \begin{equation} \label{eq:desigualdade-modulo-integral}
        \left\vert \int f \,d\mu \right\vert \leqslant \int |f| \,d\mu.
    \end{equation}
\end{tbox}
\begin{prf}
    Seja $f$ uma função integrável, mostremos que $|f|$ também o é.
    Primeiramente note que
    \[
        |f|^+ = |f| = f^+ + f^- \;\text{ e }\; |f|^- = 0,
    \]
    Dito isso
    \[
        \int |f|^+ \,d\mu = \int f^+ \,d\mu + \int f^- \,d\mu
    \]
    é finita pois $f$ é integrável, e
    \[
        \int |f|^- \,d\mu = \int 0 \,d\mu = 0
    \]
    que é finita.
    Portanto $|f|$ é integrável.

    Reciprocamente, suponha que $|f|$ é integrável, dessa forma
    \[
        \begin{aligned}
            f^+ &\leqslant f^+ + f^- = |f|\\
            f^- &\leqslant f^+ + f^- = |f|
        \end{aligned}
    \]
    sendo assim
    \[
        \begin{aligned}
            \int f^+ \,d\mu &\leqslant \int |f| \,d\mu\\
            \int f^- \,d\mu &\leqslant \int |f| \,d\mu
        \end{aligned}
    \]
    ambas finitas pois $|f|$ é integrável.
    Portanto $f$ é integrável.

    Para mostrar a desigualdade (\ref{eq:desigualdade-modulo-integral}) basta utilizar a definição de função integravel e a desigualdade triangular.
    \[
        \left\vert \int f \,d\mu \right\vert = \left\vert \int f^+ \,d\mu - \int f^- \,d\mu \right\vert \leqslant \left\vert \int f^+ \,d\mu \right\vert + \left\vert \int f^- \,d\mu \right\vert = \int f^+ \,d\mu + \int f^- \,d\mu = \int |f| \,d\mu
    \]
\end{prf}

\begin{cbox} \label{cl:g-implica-f-integravel}
    Se $f \in \cM(X,\eth)$, $g \in \cL(X,\eth,\mu)$ e $|f| \leqslant |g|$, então $f \in \cL(X,\eth,\mu)$ e 
    \[
        \int |f| \,d\mu \leqslant \int |g| \,d\mu
    \]
\end{cbox}
\begin{prf}
    Se $g$ é integrável então pelo Teorema anterior $|g|$ também o é.
    Além disso, como $|f| \leqslant |g|$
    \[
        \int |f| \,d\mu \leqslant \int |g| \,d\mu,
    \]
    como $|g|$ é integrável a sua integral é finita, implicando na integral de $|f|$ também ser finita, ou seja, $|f|$ é integrável e novamente pelo Teorema anterior, $f$ é integrável.
\end{prf}

\begin{tbox} \label{thm:operacoes-elementares-integral}
    Sejam $f, g \in \cL(X,\eth,\mu)$ e $c \in \bR$, então $cf, f + g \in \cL(X,\eth,\mu)$ e 
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $\displaystyle \int cf \, d\mu = c \int f \,d \mu$
        \item $\displaystyle \int (f + g) \, d\mu = \int f \,d \mu + \int g \, d\mu$
    \end{enumerate}
\end{tbox}
\begin{prf}
    ~

    \textbf{(a)} Se $c \geqslant 0$.
    Note que $(cf)^+ = c f^+$ e $(cf)^- = cf^-$. Dito isso
    \[
        \int cf \,d\mu = \int cf^+ - cf^- \,d\mu 
    \]
    como $cf^+$ e $cf^-$ são funções mensuráveis não negativas, podemos utilizar o Corolário \ref{cl:propiedades-elementares-nao-negativa}
    \[
        \int cf \,d\mu =  c \int f^+ - f^- \,d\mu = c \int f\,d\mu
    \]

    Se $c < 0$ a demonstração é análoga, basta perceber que $(cf)^+ = -c f^-$ e $(cf)^- = -cf^+$ ambas funções não negativas pois $-c > 0$.

    \textbf{(b)} Sejam $f, g \in \cL(X,\eth,\mu)$, então pelo Teorema \ref{thm:modulo-funcao-integravel} $|f|, |g| \in \cL(X,\eth,\mu)$, como $| f + g| \leqslant |f| + |g|$ temos que $f + g$ é integrável. Note que
    \[
        f + g = f^+ - f^- + g^+ - g^- = (f^+ + g^+) - (f^- + g^-),
    \]
    onde $f^+ + g^+$ e $f^- + g^-$ são funções integráveis não negativas. Dessa forma
    \[
        \int (f + g)\,d\mu = \int (f^+ + g^+)\,d\mu - \int (f^- + g^-)\,d\mu
    \]
    Utilizando o Corolário \ref{cl:medida-funcao-nao-negativa} e reorganizando os termos
    \[
        \begin{aligned}
            \int (f + g)\,d\mu &= \int f^+ \,d\mu + \int g^+\,d\mu - \int f^- \,d\mu  -\int g^-\,d\mu\\
            &= \int f^+ \,d\mu  - \int f^- \,d\mu + \int g^+ \,d\mu  - \int g^- \,d\mu\\
            &= \int f \,d\mu + \int g \,d\mu.
        \end{aligned}
    \] 
\end{prf}

O teorema a seguir é um dos mais importantes da teoria da medida, envolvendo convergência de sequência de funções e integrais.

\begin{tbox}[Teorema da Convergência Dominada] \label{thm:teorema-da-convergencia-dominada}
    Seja $(f_n)$ uma sequência de funções integráveis que converge em quase toda parte para a função mensurável $f$.
    Se existe uma função integrável $g$ tal que $|f_n| \leqslant g$ em quase toda parte, para todo $n \in \bN$, então $f$ é integrável e
    \[
        \int f \,d\mu = \lim \int f_n \,d\mu.
    \]
\end{tbox}
\begin{prf}
    Redefinindo as funções $f_n$ e $f$ no conjunto de medida nula, podemos afirmar que a convergência acontece em todo $X$. Note que
    \[
        \lim |f_n| \leqslant g \implies |f| \leqslant |g|,
    \]
    como por hipótese $f$ é mensurável e $g$ é integrável, segue pelo Corolário \ref{cl:g-implica-f-integravel} que $f$ é integrável.
    Além disso, como $-g \leqslant f_n \leqslant g$ temos que $g + f_n \geqslant 0$ para todo $n \in \bN$.
    Utilizando o \nameref{lm:lema-de-fatou} e o Teorema \ref{thm:modulo-funcao-integravel} temos que
    \[
        \begin{aligned}
            \int g \,d\mu + \int f \, d\mu &= \int (g + f) \,d\mu\\
            &= \int (g + \lim f_n) \,d\mu\\
            &= \int \lim (g + f_n) \,d\mu\\
            &= \int \liminf (g + f_n) \,d\mu\\
            &\leqslant \liminf \int (g + f_n) \,d\mu\\
            &= \liminf \left( \int g \, d\mu + \int f_n \,d\mu \right)\\
            &= \int g \,d\mu + \liminf \int f_n \,d\mu,
        \end{aligned}
    \]
    que implica em
    \begin{equation} \label{eq:liminf}
        \int f \,d\mu \leqslant \liminf \int f_n \,d\mu.
    \end{equation}

    Por outro lado, $g - f_n \geqslant 0$, de forma análoga mostramos que
    \begin{equation} \label{eq:limsup}
        \limsup \int f_n \,d\mu \leqslant \int f\,d\mu.
    \end{equation}
    Pelas desigualdades (\ref{eq:liminf}) e (\ref{eq:limsup})
    \[
        \limsup \int f_n \,d\mu \leqslant \int f \,d\mu \leqslant \liminf \int f_n \,d\mu,
    \]
    isto é\footnotemark
    \[
        \int f \,d\mu = \lim \int f_n \,d\mu.
    \]
    Finalizando a demonstração do teorema.
\end{prf}

\footnotetext{$\limsup x_n \leqslant x \leqslant\liminf x_n$ para todo $n \in \bN$ $\implies$ $\lim x_n = x$}

No restante da seção focaremos nossa atenção em funções $f : X \times [a,b] \to \bR$ onde a aplicação $x \mapsto f(x,t)$ é mensurável para todo $t \in [a,b]$.

\begin{cbox}
    Suponha que para algum $t_0 \in [a,b]$, tenhamos
    \[
        f(x,t_0) = \lim_{t\to t_0} f(x,t),
    \]
    para cada $x \in X$ e que existe uma função integrável $g : X\to\bR$ tal que $|f(x,t)| \leqslant g(x)$, para todo $x \in X$ e $t \in [a,b]$.
    Então
    \[
        \int f(x,t_0) \, d\mu(x) = \lim_{t \to t_0} \int f(x,t) \, d\mu(x)
    \]
\end{cbox}
\begin{prf}
    Seja $t_n$ uma sequência em $[a,b]$ que converge para $t_0$ e considere a sequência $(f_n)$ dada por $f_n(x) = f(x,t_n)$. 
    Então como $|f_n(x)| = |f(x,t_n)| \leqslant g(x)$ para todo $n \in \bN$ e $x \in X$ com $g$ integrável, segue pelo \nameref{thm:teorema-da-convergencia-dominada} que
    \[
        \begin{aligned}
            \int f(x,t_0) \,d\mu(x) &= \int \lim_{t\to t_0} f(x,t) \, d\mu(x)\\
            &= \int \lim f_n(x) \,d\mu(x)\\
            &= \lim \int f_n(x) \,d\mu(x)\\
            &= \lim \int f(x,t_n) \, d\mu(x)\\
        \end{aligned}
    \]
    Consequentemente,
    \[
        \int f(x,t_0) \, d\mu(x) = \lim_{t \to t_0} \int f(x,t) \, d\mu(x)
    \]
\end{prf}

Uma consequência imediata do corolário será apresentada abaixo

\begin{cbox}
    Se a aplicação $t \mapsto f(x,t)$ for contínua em $[a,b]$ para cada $x \in X$, e se existir uma função integrável $g : X \to \bR$ tal que $|f(x,t)| \leqslant g(x)$ para todo $x \in X$ e $t \in [a,b]$.
    Então a função $F$ dada por
    \[
        F(t) = \int f(x,t) \,d\mu(x)
    \]
    é contínua.
\end{cbox}
\begin{prf}
    Mostremos que $\lim_{t \to t_0} F(t) = F(t_0)$.
    Com efeito
    \[
        \lim_{t \to t_0} F(t) = \lim_{t\to t_0} \int f(x,t) \,d\mu(x) = \int f(x,t_0) \,d\mu(x) = F(t_0)
    \]
\end{prf}

\begin{cbox}
    Suponha que ara algum $t_0 \in [a,b]$, a função $x \to f(x,t_0)$ seja integrável em $X$, que $\partial_t f$ existe em $X \times [a,b]$ e que existe uma função integrável $g$ em $X$ tal que
    \[ 
        \left\vert \dfrac{\partial f}{\partial t}(x,t) \right\vert < g(x)
    \]
    para todo $x \in X$ e $t \in [a,b]$.
    Então a função $F$ definida por
    \[
        F(t) = \int f(x,t) \, d\mu(x)
    \]
    é diferenciável em $[a,b]$ e 
    \[
        \frac{\mathrm{d} F}{\mathrm{d}t}(t) = \int \dfrac{\partial f}{\partial t}(x,t) \,d\mu(x)
    \]
\end{cbox}
\begin{prf}
    Seja $(t_n)$ uma sequência em $[a,b]$ que converge para $t$, com $t \neq t_n$ para todo $n \in \bN$.
    Então, podemos escrever
    \[
        \dfrac{\partial f}{\partial t}(x,t) = \lim \frac{f(x,t_n) = f(x,t)}{t_n - t}
    \]
    para todo $x \in X$.
    Desde modo a função $x \mapsto \partial f/\partial t \,(x,t)$ é mensurável pois é o limite de funções mensuráveis.

    Agora seja $x \in X$.
    Pelo Teorema do Valor Médio, existe $s_0$, entre $t_0$ e $t$ tal que
    \[
        f(x,t) - f(x,t_0) = (t - t_0)\dfrac{\partial f}{\partial t} (x,s_0)
    \]
    Dessa forma, temos que
    \[
        |f(x,t)| = \left\vert f(x,t_0) + (t - t_0)\dfrac{\partial f}{\partial t}(x,s_0) \right\vert \leqslant |f(x,t_0)| + |t-t_0|\left\vert \dfrac{\partial f}{\partial t} (x,s_0) \right\vert
    \]
    Como $f$ é mensurável e a aplicação $x \mapsto |f(x,t_0)| + |t-t_0|\left\vert \partial f / \partial t \, (x,s_0) \right\vert$ é integrável, pois é a soma de funções integráveis. Pelo Corolário \ref{cl:g-implica-f-integravel} temos que $f$ é integrável.
    Por outro lado
    \[
        \frac{F(t_n) - F(t)}{t_n - t} = \int \frac{f(x,t_n) - f(x,t)}{t_n - t} \,d\mu(x)
    \]
    Além disso, por hipótese, podemos deduzir que
    \[
        \lim \left\vert \frac{f(x,t_n) - f(x,t)}{t_n - t} \right\vert =  \left\vert \lim\frac{f(x,t_n) - f(x,t)}{t_n - t} \right\vert = \left\vert \dfrac{\partial f}{\partial t}(x,t) \right\vert < g(x)
    \]
    para todo $x \in X$.
    Consequentemente
    \[
        \left\vert \frac{f(x,t_n) - f(x,t)}{t_n - t} \right\vert < g(x)
    \]
    para valores de $n$ suficientemente grande.
    Pelo \nameref{thm:teorema-da-convergencia-dominada}, temos
    \[
        \frac{\mathrm{d} F}{\mathrm{d}t}(t) = \lim \frac{F(t_n) - F(t)}{t_n - t} = \lim  \int \frac{f(x,t_n) - f(x,t)}{t_n - t} \,d\mu(x) = \int \dfrac{\partial f}{\partial t} (x,t) \, d\mu(x).
    \]
    Assim, concluindo a prova do corolário.
\end{prf}

\section{Espaços $\mathcal{L}^p$}

Nesta seção, estudaremos os famosos espaços de Lebesgue $\mathcal{L}^p$, que desempenham um papel fundamental na análise funcional e em várias áreas da matemática aplicada. Esses espaços são construídos para acomodar funções cujas potências $p$-ésimas são integráveis, permitindo uma abordagem flexível e poderosa para o estudo de propriedades de funções em contextos como as equações diferenciais.

\begin{pbox} \label{pr:semi-norma}
    Seja $(X, \eth, \mu)$ um espaço de medida. A aplicação $N_\mu : \cL(X, \eth, \mu) \to \bR$ dada por
    \[
        N_\mu(f) = \int |f| \, d\mu
    \]
    é uma semi-norma.
    Além disso $N_\mu(f) = 0 \iff f \equiv 0$ em quase toda parte em $X$.
\end{pbox}
\begin{prf} 
    Note que

    \begin{enumerate}
        \item $\displaystyle N_\mu(f) = \int |f| \, d\mu \geqslant \int 0 \,d\mu = 0.$
        \item $\displaystyle N_\mu(\lambda f) = \int |\lambda f| \, d\mu = \int |\lambda||f| \,d\mu = |\lambda|\int|f| \,d\mu = |\lambda| N_\mu(f)$.
        \item $\displaystyle N_\mu(f + g) = \int | f+ g| \,d\mu \leqslant \int |f| \,d\mu + \int |g| \, d\mu = N_\mu(f) + N_\mu(g)$.
    \end{enumerate}
    Portanto $N_\mu$ é uma semi-norma.

    Além disso é fácil ver que
    \[
        N_\mu(f) = 0 \iff \int |f| \,d\mu = 0 \iff |f| \equiv 0 \text{ qtp em } X \iff f \equiv 0 \text{ qtp em } X.
    \]
\end{prf}

\obs Note que $\mathcal{L}(X,\eth,\mu)$ é um espaço vetorial com a operações usuais
\[
    \begin{gathered}
        (f + g)(x) = f(x) + g(x)\\
        (\lambda f)(x) = \lambda f(x)
    \end{gathered}
\]
para todo $f,g \in \mathcal{L}(X,\eth,\mu)$ e $\lambda \in \bR$.
Isto se deve ao fato que $\mathcal{L}(X,\eth,\mu)$ é um subespaço vetorial do espaço de funções $\mathcal{F}(X,\bR) = \{f: X \to \bR\}$.

Estamos interessados em transformar $\cL$ em um espaço vetorial normado.
Para isso, precisamos da seguinte definição
\begin{dbox}
    Sejam $f,g \in \cL(X,\eth,\mu)$. Dizemos que $f$ e $g$ são $\mu$-equivalentes ($f \sim_\mu g$) se $f \equiv g$ em quase toda parte em $X$.
\end{dbox}
O espaço
\[
    \cL^1 = \cL^1(X,\eth,\mu) =\{[f] \,; f \in \cL\}
\]
onde
\[
    [f] = \{g \in \cL(X,\eth,\mu) \,; g \sim_\mu f\}
\]
é dito Espaço de Lebesgue $\cL^1$ ou espaço das funções somáveis.
Esse espaço, munido das operações
\begin{gather*}
    [f] + [g] = [f + g]\\
    [\lambda f] = \lambda [f]
\end{gather*}
para todo $f, g \in \cL(X,\eth,\mu)$ e $\lambda \in \bR$ é um espaço vetorial.

\begin{pbox}
    Seja $(X,\eth,\mu)$ um espaço de medida.
    A aplicação $\Vert \cdot \Vert_1 : \cL^1 \to \bR$ dada por
    \[
        \Vert [f] \Vert_1 = \int |f| \,d\mu
    \]
    para todo $[f] \in \cL^1$ é uma norma
\end{pbox}
\begin{prf}
    Note que apenas precisamos mostrar que $\Vert [f] \Vert_1 = 0 \iff [f] = [0]$, pois as outras propiedades são análogas à demonstração da Proposição \ref{pr:semi-norma}.
    Com efeito
    \[
        \Vert [f] \Vert_1 = 0 \iff \int |f| \,d\mu = 0 \iff |f| \equiv 0 \text{ qtp em } X \iff f \equiv 0 \text{ qtp em } X \iff [f] = [0].
    \]
    Portanto $\Vert \cdot \Vert_1$ é uma norma e $(\cL^1,\Vert \cdot \Vert_1)$ é um espaço vetorial normado.
\end{prf}

No restante do texto, adotaremos a notação $[f] = f$, ignorando as classes de equivalência e trabalhando apenas com o seus representantes.

\begin{dbox}
    Seja $1 \leqslant p < \infty$ um número real.
    O espaço
    \[
        \cL^p = \cL^p(X,\eth,\mu) = \left\{ f : X \to \bR \,; f \text{ é mensurável}, \int|f|^p \, d\mu < \infty \right\}
    \]
    é dito Espaço de Lebesgue $\cL^p$.
\end{dbox}
Nosso intuito agora é mostrar que $\cL^p$ é um espaço vetorial normado, onde
\[
    \Vert f \Vert_p = \left( \int |f|^p \,d\mu \right)^{\frac{1}{p}}
\]
é sua norma.
Mas antes, precisamos demonstrar algumas desigualdades importantes desses espaços que serão necessárias para mostrar que $\Vert \cdot \Vert_p$ é uma norma em $\cL^p$.

\begin{tbox}[Desigualdade de Young] \label{thm:desigualdade-de-young}
    Sejm $A,B \geqslant 0$, $1 \leqslant p < \infty$ e $q \in \bR$ tal que $p$ e $q$ são expoentes conjuntados\footnote{$p$ e $q$ são ditos expoentes conjugados se $\frac{1}{p} + \frac{1}{q} = 1$}. Então
    \[
        AB \leqslant \frac{A^p}{p} + \frac{B^q}{q}
    \]
    onde a igualdade é válida se, e somente se, $A^p = B^q$.
\end{tbox}
\begin{prf}
    Seja $\alpha \in (0,1)$ e defina $\varphi : [0,\infty) \to \bR$ por
    \[
        \varphi(t) = \alpha t - t^{\alpha}.
    \]
    Note que $\varphi'(t) = \alpha - \alpha t^{\alpha - 1} = \alpha(1 - t^{\alpha-1})$. Dessa forma
    \begin{itemize}
        \item[--] $t \in (0,1)$ então $\varphi'(t) < 0$ pois $t^{\alpha - 1} > 1$ e então $1 - t^{\alpha - 1} < 0$
        \item[--] $t \in (1,\infty)$ então $\varphi'(t) > 0$ pois $t^{\alpha - 1} < 1$ e então $1 - t^{\alpha - 1} > 0$
    \end{itemize}
    Isto nos diz que $\varphi$ é decrescente em $(0,1)$ e crescente em $(1,\infty)$. 
    Ou seja, como $\varphi$ é contínua, temos que $1$ é um ponto de mínimo.
    Dito isso $\varphi(t) \geqslant \varphi(1)$ para todo $t \geqslant 0$ e $\varphi(t) = \varphi(1)$ se, e somente se, $t = 1$. Assim
    \[
        \varphi(t) \geqslant \varphi(t) \implies \alpha t - t^{\alpha} \geqslant \alpha - 1 \implies t^{\alpha} \leqslant \alpha t + (1 - \alpha).
    \]
    Sejam $a, b > 0$, então para $t = \frac{a}{b}$ temos
    \[
        \left( \frac{a}{b} \right)^\alpha \leqslant \alpha \frac{a}{b} + 1 - \alpha.
    \]
    Daí
    \[
        a^{\alpha} b^{-\alpha} \leqslant \alpha \frac{a}{b} + 1 - \alpha.
    \]
    Multiplicando a desigualdade acima por $b$, encontramos
    \[
        a^\alpha b^{1 - \alpha} \leqslant \alpha a + (1-\alpha)b.
    \]
    Além disso, note que a desigualdade é uma igualdade se, e somente se $t = 1$, isto é $a = b$.
    Agora considere que $\alpha = \frac{1}{p} \in (0,1)$, ou seja, $1 < p < \infty$. Dessa forma obtemos
    \[
        a^{\frac{1}{p}}b^{1 - \frac{1}{p}} \leqslant \frac{a}{p}+ \left(1 - \frac{1}{p}\right)b,
    \]
    e por hipótese $\frac{1}{p} + \frac{1}{q} = 1$. Logo
    \[
        a^{\frac{1}{p}}b^{\frac{1}{q}} \leqslant \frac{a}{p} + \frac{b}{q}.
    \]
    Por fim, fazendo $a = A^p$ e $b = B^q$, temos o resultado desejado
    \[
        AB \leqslant \frac{A^p}{p} + \frac{B^q}{q},
    \]
    que é uma igualdade quando $A^p = B^q$.
\end{prf}

\begin{tbox}[Desigualdade de Hölder] \label{thm:desigualdade-de-holder}
    Sejam $f \in \cL^p$ e $g \in \cL^q$ onde $1 \leqslant p < \infty$ e $q \in \bR$ tal que $p$ e $q$ são expoentes conjugados.
    Então $fg \in \cL^1$ e
    \[
        \Vert fg \Vert_1 \leqslant \Vert f \Vert_p + \Vert g \Vert_q
    \]
\end{tbox}
\begin{prf}
    Se $\Vert f \Vert_p = 0$ ou $\Vert g \Vert_q = 0$ então $f \equiv 0$ qtp em $X$ ou $g \equiv 0$ qtp em $X$. Dessa forma
    \[
        \Vert fg \Vert_1 = \int |fg| \,d\mu = 0.
    \]
    Com isso, a desigualdade de Holder é trivial.

    Agora considere que $\Vert f \Vert_p \neq 0$ e $\Vert g \Vert_q \neq 0$. Sendo assim, utilizando a \nameref{thm:desigualdade-de-young} com
    \[
        A = \frac{|f|}{\Vert f \Vert_p} \;\text{ e }\; B = \frac{|g|}{\Vert g \Vert_q}
    \]
    obtemos
    \begin{equation} \label{eq:holder-young}
        \frac{|fg|}{\Vert f \Vert_p \Vert g \Vert_q}\leqslant \frac{|f|^p}{p \Vert f \Vert_p^p} + \frac{|g|^p}{q \Vert g \Vert_q^q}.
    \end{equation}
    Como $f \in \cL^p$ e $g \in \cL^q$, então $|f|^p$ e $|g|^q$ são integráveis.
    Logo
    \[
        \left( \frac{1}{p \Vert f \Vert_p^p} \right) |f|^p + \left( \frac{1}{q \Vert g \Vert_q^q} \right) |g|^q
    \]
    é integrável.
    Além disso, pelo Corolário \ref{cl:g-implica-f-integravel}
    \[
        \left( \frac{1}{\Vert f \Vert_p \Vert g \Vert_q} \right) |fg|
    \]
    é integrável e portanto $|fg|$ é integrável, isto é, $fg \in \cL^1$.

    Por fim, integrando (\ref{eq:holder-young}) com respeito a $\mu$, chegamos a
    \[
        \int \frac{|fg|}{\Vert f \Vert_p \Vert g \Vert_q} \,d\mu \leqslant \int \left( \frac{|f|^p}{p \Vert f \Vert_p^p} + \frac{|g|^p}{q \Vert g \Vert_q^q}. \right) \, d\mu
    \]
    isto é
    \[
        \frac{1}{\Vert f \Vert_p \Vert g \Vert_q} \int |fg| \,d\mu \leqslant \frac{1}{p \Vert f \Vert_p^p} \int |f|^p \,d\mu + \frac{1}{q \Vert g \Vert_q^q}\int |g|^p \,d\mu.
    \]
    Pela definição da norma em $\cL^p$ segue que
    \[
        \frac{1}{\Vert f \Vert_p \Vert g \Vert_q} \Vert fg \Vert_1 \leqslant \frac{1}{p \Vert f \Vert_p^p} \Vert f \Vert_p^p + \frac{1}{q \Vert g \Vert_q^q} \Vert q \Vert_p^p = \frac{1}{p} + \frac{1}{q} = 1.
    \]
    Portanto
    \[
        \Vert fg \Vert_1 \leqslant \Vert f \Vert_p \Vert g \Vert_q.
    \]
    Como queriamos demonstrar.
\end{prf}

O corolário abaixo é um caso particular da \nameref{thm:desigualdade-de-holder} quando $p = q$, o que acontece apenas quando $p = q = 2$.

\begin{cbox}[Desigualdade de Cauchy-Schwarz]
    Se $f, g \in \cL^2$, então $fg \in \cL^1$ e
    \[
        \left\vert \int fg \, d\mu \right\vert \leqslant  \int |fg| \, d\mu \leqslant \int |f|^2 \, d\mu \int |g|^2 \, d\mu
    \]
\end{cbox}
\begin{prf}
    A primeira desigualdade é o Teorema \ref{thm:modulo-funcao-integravel} e a segunda é uma aplicação direta da \nameref{thm:desigualdade-de-holder}.
\end{prf}

\begin{tbox}[Desigualdade de Minkowski]
    Se $f, g \in \cL^p$ com $1 \leqslant p < \infty$, então $f + g \in \cL^p$ e
    \[
        \Vert f + g \Vert_p \leqslant \Vert f \Vert_p + \Vert g \Vert_p
    \]
\end{tbox}
\begin{prf}
    Na Proposição \ref{pr:semi-norma} já mostramos que a Desigualdade de Minkowski é válida para $p = 1$.
    Dito isso, seja $1 < p < \infty$.
    Como $f,g \in \cL^p$, então $f$ e $g$ são mensuráveis.
    Dessa forma, $f + g$ também é mensurável.
    Mostremos agora que $f + g \in \cL^p$.
    Com efeito,
    \[
        \begin{aligned}
            | f + g |^p &\leqslant (|f| + |g|)^p\\
            &\leqslant (\max\{|f|, |g|\} + \max\{|f|, |g|\})^p\\
            &= 2^p\max\{|f|, |g|\}^p\\
            &\leqslant 2^p (|f|^p + |g|^p).
        \end{aligned}
    \]
    Daí
    \[
        \int |f+g|^p \, d\mu \leqslant 2^p\int (|f|^p + |g|^p) \,d\mu \leqslant 2^p \left(\int |f|^p \,d\mu + \int |g|^p \,d\mu\right)
    \]
    que é uma integral finita.
    Portanto $f + g \in \cL^p$.

    Também é fácil ver que
    \[
        |f+g|^p = |f + g| |f + g|^{p-1} \leqslant |f| |f + g|^{p-1} + |g| |f + g|^{p-1}.
    \]
    Agora, seja $q \in \bR$ tal que $\frac{1}{p} + \frac{1}{q} = 1$.
    Daí $|f + g|^{p-1} \in \cL^q$. De fato,
    \begin{equation} \label{eq:2}
        \Vert |f+g|^{p-1} \Vert_q^q = \int |f + g|^{q(p-1)} \,d\mu = \int |f + g|^p < \infty
    \end{equation}
    pois $f + g \in \cL^p$.
    Portanto pela \nameref{thm:desigualdade-de-holder} e por (\ref{eq:2}) temos que
    \begin{equation} \label{eq:ffg}
        \int |f| \, |f + g|^{p-1} \, d\mu = \Vert |f| + |f+g|^{p-1} \Vert_1 \leqslant \Vert |f| \Vert_p \Vert |f + g|^{p-1} \Vert_q = \Vert f \Vert_p \Vert f + g \Vert_p^{\frac{p}{q}}.
    \end{equation}
    Análogamente
    \begin{equation} \label{eq:gfg}
        \int |g| \, |f + g|^{p-1} \,d\mu \leqslant \Vert g \Vert_p \Vert f + g \Vert_p^{\frac{p}{q}}.
    \end{equation}
    Dito isso, chegamos a
    \[
        \begin{aligned}
            \Vert f + g \Vert_p^p &= \int |f + g|^{p} \,d\mu\\
            &\leqslant \int |f| |f + g|^{p-1} + |g| |f + g|^{p-1} \,d\mu\\
            &= \int |f| |f + g|^{p-1} \,d\mu + \int |g| |f + g|^{p-1} \,d\mu\\
            &\leqslant \Vert f \Vert_p \Vert f + g \Vert_p^\frac{p}{q} + \Vert g \Vert_p \Vert f + g \Vert_p^\frac{p}{q}\\
            &= ( \Vert f \Vert_p + \Vert g \Vert_p) \, \Vert f + g \Vert_p^{\frac{p}{q}}.
        \end{aligned}
    \]
    Se $\Vert f + g \Vert_p = 0$, então
    \[
        \Vert f + g \Vert_p = 0 \leqslant \Vert f \Vert_p + \Vert g \Vert_p
    \]
    Logo a desigualdade de Minkowski é válida.
    Agora, considere que $\Vert f + g \Vert_p \neq 0$ para obter
    \[
        \frac{\Vert f + g \Vert_p^p}{\Vert f + g \Vert_p^{\frac{p}{q}}} \leqslant \Vert f \Vert_p + \Vert g \Vert_p
    \]
    Consequentemente
    \[
        \Vert f + g \Vert_p^{p - \frac{p}{q}} \leqslant \Vert f \Vert_p + \Vert g \Vert_p.
    \]
    Por fim, como $p e q$ são expoentes conjugados, segue que $p - \frac{p}{q} = 1$.
    Portanto
    \[
        \Vert f + g \Vert_p \leqslant \Vert f \Vert_p + \Vert g \Vert_p.
    \]
    Assim, mostramos que a desigualdade de Minkowski é válida para $1 \leqslant p < \infty$.
\end{prf}

Agora, vamos provar que $(\cL^p, \Vert \cdot \Vert_p)$ é um espaço vetorial normado para $1 \leqslant p < \infty$.
\begin{pbox}
    A aplicação $\Vert \cdot \Vert_p : \cL^p \to \bR$ dada por
    \[
        \Vert f \Vert_p = \left( \int |f|^p \, d\mu \right)^{\frac{1}{p}}
    \]
    é uma norma
\end{pbox}
\begin{prf}
    Note que
    \begin{enumerate}
        \item $\displaystyle  \Vert f \Vert_p = \left(\int |f|^p \, d\mu \right)^{\frac{1}{p}} \geqslant 0$ pois $|f| \geqslant 0$.
        \item $\displaystyle \Vert f \Vert_p = 0 \iff \int |f|^p \, d\mu = 0 \iff f = 0$ ($f \sim_\mu 0$)
        \item $\displaystyle \Vert \lambda f \Vert_p = \left( \int |\lambda f|^p \,d\mu \right)^{\frac{1}{p}} \!\! = \left( \int |\lambda|^p |f|^p \,d\mu \right)^{\frac{1}{p}} \!\! = \left(|\lambda|^p \int |f|^p \,d\mu \right)^{\frac{1}{p}} \!\! = |\lambda| \left( \int |f|^p \,d\mu \right)^{\frac{1}{p}} \!\! = |\lambda| \Vert f \Vert_p$
        \item $\Vert f + g \Vert_p \leqslant \Vert f \Vert_p + \Vert g \Vert_p$ pela Desigualdade de Minkowski.
    \end{enumerate}
    Portanto $\Vert \cdot \Vert_p$ é uma norma
\end{prf}

Agora, nosso objetivo é mostrar que $\cL^p$ com $1 \leqslant p < \infty$ é um espaço de Banach, isto é, um espaço vetorial normado completo.
Para isso precisamos das seguintes definições

\begin{dbox}
    Seja $(f_n)$ uma sequência em $\cL^p$ com $1 \leqslant p < \infty$. Dizemos que $(f_n)$ é de Cauchy se dado $\varepsilon > 0$ existe $n_0 \in \bN$ tal que
    \[
        \Vert f_n - f_m \Vert_p < \varepsilon
    \]
    para todo $n,m \geqslant n_0$
\end{dbox}

\begin{dbox}
    Sejam $(f_n)$ uma sequência em $\cL^p$ e $f \in \cL^p$ com $1 \leqslant p < \infty$. Dizemos que $(f_n)$ é convergente e converge para $f$ se dado $\varepsilon > 0$, existe $n_0 \in \bN$ tal que
    \[
        \Vert f_n - f \Vert_p \leqslant \varepsilon
    \]
    para todo $n \geqslant n_0$. Equivalentemente
    \[
        \lim \Vert f_n - f \Vert_p = 0
    \]
\end{dbox}

\begin{dbox}
    Um espaço métrico $(X,d)$ é completo se toda sequência de Cauchy é convergente.
\end{dbox}

\begin{tbox}[Teorema de Riesz-Fischer] \label{thm:lp-completo}
    $\cL^p$ com $1 \leqslant p < \infty$ é um espaço de Banach.
\end{tbox}
\begin{prf}
    Seja $(f_n)$ uma sequência de Cauchy em $\cL^p$.
    Mostremos que $(f_n)$ é convergente. 
    Com efeito, sabemos que dado $\varepsilon > 0$, existe $n_0 \in \bN$ tal que
    \[
        \Vert f_n - f_m \Vert_p < \varepsilon
    \]
    para todo $n, m \geqslant n_0$.
    Esscolhendo $\varepsilon$ de forma adequada e passando a uma subsequência se necessário, temos que
    \begin{equation} \label{eq:1}
        \Vert f_{n+1} - f_n \Vert_p < 2^{=n}
    \end{equation}
    Defina $g : X \to \overline\bR$ por
    \[
        g(x) = |f_1(x)| + \sum_{n=1}^{\infty} |f_{n+1} (x) - f_n(x)|.
    \]
    Observe que $g \in \cM^+(X,\eth)$, pois $g \geqslant 0$ e
    \[
        g = |f_1| + \lim_{k\to\infty} \sum_{n=1}^{k} |f_{n+1} - f_n|
    \]
    isto é, $g$ é formado pela soma e pelo limite de funções mensuráveis ($f_n$ é integrável, em particular, mensurável).
    Queremos mostrar que $g \in \cL^p$. De fato
    % \[
    %     \begin{aligned}
    %         \int |g|^p \,d\mu 
    %         &= \int \left( |f_1| + \lim_{k\to\infty} \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu\\
    %         &= \int \liminf_{k\to\infty} \left( |f_1| +  \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu\\
    %         &\leqslant \liminf_{k\to\infty} \textcolor{orange}{\int  \left( |f_1| +  \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu}\\
    %         &= \liminf_{k\to\infty} \textcolor{orange}{\left\Vert |f_1| + \sum_{n=1}^k |f_{n+1} - f_n| \right\Vert _p^p}\\
    %         &\leqslant \liminf_{k\to\infty} \left( \left\Vert f_1 \right\Vert + \sum_{n=1}^k\left\Vert  f_{n+1} - f_n \right\Vert _p \right)^p\\
    %         &\leqslant \left( \left\Vert f_1 \right\Vert _p + \sum_{n=1}^k\left\Vert  f_{n+1} - f_n \right\Vert _p \right)^p\\
    %         &\leqslant \left( \Vert f_1 \Vert_p + \sum_{n=1}^{\infty} 2^{-n}\right)\\
    %         &< \infty.
    %     \end{aligned}
    % \]
    \[
        \int |g|^p \,d\mu = \int g^p \,d\mu,
    \]
    pois $g \geqslant 0$. Pela definição de $g$ temos
    \[
        \int g^p \,d\mu = \int \left( |f_1| + \lim_{k\to\infty} \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu,
    \]
    nesse caso, como o limite existe, segue que o limite é igual ao limite inferior, logo
    \[
        \begin{aligned}
            \int \left( |f_1| + \lim_{k\to\infty} \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu
            &= \int \liminf_{k\to\infty}\left( |f_1| +  \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu.
        \end{aligned}
    \]
    Pelo Lema de Fatou temos que
    \[
        \begin{aligned}
            \int \liminf_{k\to\infty}\left( |f_1| +  \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu &\leqslant \liminf_{k\to\infty}\int \left( |f_1| +  \sum_{n=1}^{k} |f_{n+1} - f_n| \right)^p \, d\mu 
            % = \liminf_{k\to\infty} \left\Vert |f_1| + \sum_{n=1}^k |f_{n+1} - f_n| \right\Vert _p^p 
        \end{aligned}
    \]
    e utilizando definição da norma em $\cL^p$ e a Desigualdade de Minkowski
    \small{
    \[
        \liminf_{k\to\infty} \left\Vert |f_1| + \sum_{n=1}^k |f_{n+1} - f_n| \right\Vert _p^p  \leqslant \liminf_{k\to\infty} \left( \Vert f_1 \Vert_p + \sum_{n=1}^{k} \Vert f_{n+1} - f_n \Vert_p \right)^p = \left( \Vert f_1 \Vert_p + \sum_{n=1}^{\infty} \Vert f_{n+1} - f_n \Vert_p \right)^p.
    \]}
    Por (\ref{eq:1}) temos que
    \[
        \left( \Vert f_1 \Vert_p + \sum_{n=1}^{\infty} \Vert f_{n+1} - f_n \Vert_p \right)^p \leqslant \left( \Vert f_1 \Vert_p + \sum_{n=1}^{\infty} 2^{-n} \right) < \infty
    \]
    que é finito pois o somatório é uma série geométrica com razão menor que 1.
    Logo
    \[
        \int |g|^p \,d\mu < \infty.
    \]
    Portanto, $g \in \cL^p$.
    Agora seja, $E = \{x \in X \,; g(x) < \infty\} \in \eth$. Dito isso, $N = E^\cC = \{x \in X \,; g(x) = \infty\} \in \eth$. Mostremos que $N$ tem medida nula.
    Com efeito, suponha que $\mu(N) > 0$, dessa forma
    \[
        \int_X |g|^p \geqslant \int_{N} |g|^p  = \infty \mu(N) = \infty,
    \]
    o que implicaria em
    \[
        \int |g|^p = \infty
    \]
    que é uma contradição pois $g \in \cL^p$.
    Dessa forma $\mu(N) = 0$, isto é, $g < \infty$ em quase toda parte em $X$.
    Sendo assim, defina $f : X \to \bR$ por
    \[
        f(x) = 
        \begin{cases}
            f_1(x) + \sum_{n=1}^{\infty} (f_{n+1}(x) - f_n(x)) &\text{se } x \in E\\
            0 &\text{se } x \not\in E.
        \end{cases}
    \]
    Mostremos que $f \in \cL^p$.
    Note que
    \[
        f(x) = \left( f_1(x) + \sum_{n=1}^{\infty} (f_{n+1}(x) - f_n(x)) \right) \chi_E.
    \]
    Daí
    \[
        |f| = \left| f_1 + \sum_{n=1}^{\infty} (f_{n+1} - f_n) \right| |\chi_E| \leqslant |f_1| + \sum_{n=1}^{\infty}|f_{n+1} - f_n| = g.
    \]
    Consequentemente, $|f|^p < g^p$.
    Logo
    \[
        \int |f|^p \,d\mu \leqslant \int g^p \,d\mu < \infty.
    \]
    Portanto, $f \in \cL^p$.
    Por outro lado, para todo $x \in E$
    \[
        \begin{aligned}
            f(x) &= f_1(x) + \sum_{n=1}^{\infty} (f_{n+1}(x) - f_n(x))\\
            &= f_1(x) + \lim_{k\to \infty}\sum_{n=1}^{k} (f_{n+1}(x) - f_n(x))\\
            &= \lim_{k\to \infty} \left( f_1(x) + f_2(x) - f_1(x) + f_3(x) - f_2(x) + \cdots + f_{k+1}(x) - f_k(x)\right)\\[5pt]
            &= \lim_{k\to \infty} f_{k+1}(x) = \lim _{k\to \infty} f_{k}(x).
        \end{aligned}
    \]
    Como $\mu(N) = 0$, então $\lim f_n = f$ em quase toda parte em $X$.
    É fácil ver que
    \begin{equation}
        |f_k| = \left| f_1 + \sum_{n=1}^{k-1} (f_{n+1} - f_n) \right| \leqslant |f_1| + \sum_{n=1}^{k-1} |f_{n+1} - f_n| \leqslant |f_1| + \sum_{n=1}^{\infty} |f_{n+1} - f_n| = g.
    \end{equation}
    Por isso
    \[
        |f_n - f|^p \leqslant (|f_n| + |f|)^p \leqslant (2g)^p = 2^p g^p
    \]
    para todo $n \in \bN$.
    Como $g \in \cL^p$, então $2^p g^p \in \cL^1$.
    Dessa forma, pelo Teorema da Convergência Dominada, chegamos a
    \[
        \lim \Vert f_n - f \Vert_p = \lim \left( \int |f_n - f|^p \, d\mu \right)^\frac{1}{p} = \int \lim |f_n - f|^p \, d\mu = 0
    \]
    Isto prova que $\cL^p$ é completo.
\end{prf}

Agora introduzimos o espaço de Lebesgue, $\cL^\infty$ explorando suas características fundamentais e o papel que desempenha em diversos problemas da análise funcional.

\begin{dbox}
    Seja $(X,\eth,\mu)$ um espaço de medida. O espaço
    \[
        \cL^\infty = \cL^\infty(X,\eth,\mu) = \{f : X\to \bR \,; f \text{ é mensurável e limitada qtp em } X\}
    \]
    é chamado Espaço de Lebesgue $\cL^\infty$.
    Para cada $f \in \cL^\infty$, definimos
    \[
        \Vert f \Vert_\infty = \mathrm{ess\,sup} \{|f(x)|; x \in X\} =\inf \{M \geqslant 0 \,; |f(x)| \leqslant M \text{ qtp em } X\}
    \]
    Por fim, dizemos que $f$ é uma função essencialmente limitada.
\end{dbox}

\obs Note que
\[
    \Vert f \Vert_\infty = \inf \{M \geqslant 0 \,; \mu(\{x \in X \,; |f(x)| > M\} = 0)\}.
\]
sto segue da seguinte equivalência

\[
    |f(x)| \leqslant M \text{ qtp em } X \iff \mu(\{x \in X \,; |f(x)| > M\}) = 0.
\]
De fato, $|f(x)| \leqslant M$ em quase toda parte em $X$ se, e somente se, existe $N \in \eth$ tal que $\mu(N) = 0$ e $|f(x)| \leqslant M$ para todo $x \in N^\cC$.
Note que $\{ x \in X \,; |f(x)| > M\} \subseteq N$, dessa forma
\[
    \mu(\{x \in X\,; |f(x)| > M\}) \leqslant \mu(N) = 0
\]
Portanto, $\mu(\{x \in X\,; |f(x)| > M\}) = 0$.

Reciprocamente, se $\mu(\{x \in X\,; |f(x)| > M\}) = 0$, então $|f(x)| \leqslant M$ para todo $x \in \{|f(x)| > M\}^{\cC}$, isto é, $|f(x)| \leqslant M$ em quase toda parte em $X$.

\begin{pbox}
    Seja $(X,\eth,\mu)$ um espaço de medida.
    Então
    \[
        |f(x)| \leqslant \Vert f \Vert_\infty \text{ qtp em } X
    \]
    para todo $f \in \cL^\infty$
\end{pbox}
\begin{prf}
    Se $f \in \cL^\infty$, então existe $M \geqslant 0$ tal que $|f(x)| \leqslant M$ em quase toda parte em $X$.
    Daí, como $\Vert f \Vert_\infty = \inf \{ M_0 \geqslant 0 \,; |f(x)| \leqslant M_0 \text{ qtp em } X\}$, temos que dado $\varepsilon > 0$ conseguimos encontrar $M_\varepsilon \geqslant 0$ tal que $|f(x)| \leqslant M_\varepsilon$ em quase toda parte em $X$.
    \begin{center}
        \begin{tikzpicture}
            \draw[-stealth] (0,0) to (4,0);
    
            \draw (1,0.1) to (1,-0.1) node[below, font=\small] {$\Vert f \Vert_\infty$};
            \draw (3,0.1) to (3,-0.1) node[below, font=\small] {$\Vert f \Vert_\infty + \varepsilon$};
            \draw (2,0.1) node[above, font=\small] {$M_\varepsilon$} to (2,-0.1);
        \end{tikzpicture}
    \end{center}
    Como $M_\varepsilon < \Vert f \Vert_\infty + \varepsilon$, então
    \[
        |f(x)| \leqslant M_\varepsilon < \Vert f \Vert_\infty +  \varepsilon.
    \]
    Fazendo $\varepsilon \to 0$ chegamos a
    \[
        |f(x)| \leqslant \Vert f \Vert_\infty \text{ qtp em } X
    \]
\end{prf}

Agora mostremos que $\cL^\infty$ é um espaço vetorial normado

\begin{pbox}
    A aplicação $\Vert \cdot \Vert_\infty : \cL^\infty \to \bR$ dada por
    \[
        \Vert f \Vert_\infty = \inf \{M \geqslant 0 \,; |f(x)|\leqslant M \text{ qtp em } X\}
    \]
    é uma norma
\end{pbox}
\begin{prf}
    Note que
    \begin{enumerate}
        \item $\Vert f \Vert_\infty \geqslant 0$ pois $0$ é cota inferior de $\{M \geqslant 0 \,; |f(x)|\leqslant M \text{ qtp em } X\}$.
        \item $\Vert f \Vert_\infty = 0$, assim dado $\varepsilon > 0$ existe $M_\varepsilon \geqslant 0$ tal que $|f(x)| \leqslant M_\varepsilon$ em quase toda parte em $X$, com $M_\varepsilon < \varepsilon$.
        Daí, $|f(x)| < \varepsilon$ em quase toda parte em $X$.
        Fazendo $\varepsilon \to 0$, encontramos
        \[
            |f(x)| \leqslant 0 \text{ qtp em } X
        \]
        Dessa forma, $f(x) = 0$ em quase toda parte em $X$.

        Reciprocamente, $\Vert 0 \Vert_\infty = \inf \{M \geqslant 0 \,; 0 \leqslant M \text{ qtp em } X\} = \inf[0,\infty) = 0$

        \item $\| \lambda f \|$

        \item (Desigualdade de Minkowski em $\cL^\infty$) Se $f, g \in \cL^\infty$ então as funções são limitadas em quase toda parte em $X$, dito isso, $f + g$ também é limitada em quase toda parte em $X$.
        Logo $f + g \in \cL^\infty$.

        Por outro lado, como $f, g \in \cL^\infty$, então existem $M,\hat M \in \eth$ tais que $\mu(M) = \mu(\hat M) = 0$ e $|f(x)| \leqslant \Vert f \Vert_\infty$ para todo $x \not\in M$ e $|g(x)| \leqslant \Vert g \Vert_\infty$ para todo $x \not\in \hat M$.
        Seja $N = M \cup \hat M \in \eth$.
        Daí $\mu(N) = \mu(M \cup \hat M) \leqslant \mu(M) + \mu(\hat M) = 0 + 0 = 0$.
        Além disso
        \[
            |f(x) + g(x)| \leqslant |f(x)| + |g(x)| \leqslant \Vert f \Vert_\infty + \Vert g \Vert_\infty \text{ qtp em } X
        \]
        para todo $x \not\in N$, com $\mu(N) = 0$.
        Dessa forma
        \[
            \Vert f + g \Vert_\infty \leqslant \Vert f \Vert_\infty + \Vert g \Vert_\infty.
        \]
    \end{enumerate}
    Portanto, $\Vert \cdot \Vert_\infty$ é uma norma.
\end{prf}

\begin{pbox}[Desigualdade de Hölder em $\cL^\infty$]
    Seja $(X,\eth,\mu)$ um espaço de medida. Se $f \in \cL^1$ e $g \in \cL^\infty$, então $fg \in \cL^1$ e
    \[
        \Vert fg \Vert_1 \leqslant \Vert f \Vert_1 \Vert g \Vert_\infty
    \]
\end{pbox}
\begin{prf}
    Note que se $g \in \cL^\infty$ então $|g| \leqslant \Vert g \Vert_\infty$ em quase toda parte em $X$.
    Consequentemente
    \[
        \Vert fg \Vert_1 = \int |fg| \,d\mu = \int |f|\,|g| \,d\mu \leqslant \int |f| \Vert g \Vert_\infty \,d\mu = \Vert g \Vert_\infty \int |f| \,d\mu = \Vert g \Vert_\infty \Vert f \Vert_1
    \]
\end{prf}

O próximo passo é mostrar que $\cL^\infty$ também é um espaço de Banach, como já mostramos que é um espaço vetorial normado, basta mostrar a completude

\begin{tbox}[Teorema de Riesz-Fischer] \label{thm:linf-completo}
    $\cL^\infty$ é um espaço completo
\end{tbox}
\begin{prf}
    
\end{prf}

Agora vamos construir os espaços $\ell^p$ que são um caso particular dos espaços $\cL^p$

\begin{ex}
    Sejam $X = \bN$, $\eth = \cP(\bN)$ e $\mu : \cP(\bN) \to [0,\infty]$ dada por
    \[
        \mu(E) =
        \begin{cases}
            \# E &\text{ se } E \text{ é finito}\\
            \infty &\text{ se } E \text{ é infinito}
        \end{cases}
    \]

    Note que
    \[
        \cL^p(\bN, \cP(\bN), \mu) = \left\{(x_n) \subseteq \bR \,; \sum_{n=1}^\infty |x_n| < \infty\right\}
    \]
    \dots
\end{ex}

\obs Denomatomos o espaço de Lebesgue $\cL^p(\bN, \cP(\bN), \mu)$ por $\ell^p$

\begin{ex}
    $\cL^\infty(\bN, \cP(\bN), \mu)$ $\dots$
\end{ex}

Vejamos mais alguma propiedades importantes dos espaços $\cL^p$

\begin{pbox}
    Sejam $(X,\eth,\mu)$ um espaço de medida e  $0 < p < q < r \leqslant \infty$.
    Então
    \[
        \cL^q \subseteq \cL^p + \cL^r
    \]
\end{pbox}
\begin{prf}
    \dots
\end{prf}

\begin{tbox}[Desigualdade de Interpolação] \label{thm:desigualdade-de-inteporlacao}
    Sejam $(X,\eth,\mu)$ um espaço de medida e $0 < p < q < r \leqslant \infty$.
    Então $\cL^p \cap \cL^r \subseteq \cL^q$ e
    \[
        \Vert f \Vert_q \leqslant \Vert f \Vert_p^\lambda \Vert f \Vert_r^{1 - \lambda}
    \]
    onde $\lambda \in (0,1)$ e
    \begin{equation} \label{eq:3}
        \frac{1}{q} = \frac{\lambda}{p} + \frac{1 - \lambda}{r} \quad \left( \text{i.e., } \lambda = \frac{\frac{1}{q} - \frac{1}{r}}{\frac{1}{p} - \frac{1}{r}}\right)
    \end{equation}
\end{tbox}
\begin{prf}
    Consideremos dois casos
    \begin{itemize}[leftmargin=*]
        \item[--] $r = \infty$
        Note que
        \[
            \lambda = \frac{\frac{1}{q} - \frac{1}{\infty}}{\frac{1}{p} - \frac{1}{\infty}} = \frac{\frac{1}{q}}{\frac{1}{p}} = \frac{p}{q} \in (0,1)
        \]
        Além disso, se $f \in \cL^p \cap \cL^r$, tem-se que
        \[
            \Vert f \Vert_q^q =  \int \vert f \vert^q \, d\mu = \int |f|^{q-p} |f|^p \, d\mu \leqslant \int \Vert f \Vert_\infty^{q-p} |f|^p = \Vert f \Vert_\infty^{q-p} \int |f|^p \,d\mu = \Vert f \Vert_p^p <\infty.
        \]
        Com isso $f \in \cL^q$ e ainda mais
        \[
            \Vert f \Vert^q_q \leqslant \Vert f \Vert_\infty^{q-p} \Vert f \Vert_p^p \iff \Vert f \Vert_q \leqslant \Vert f \Vert_\infty^{\frac{q-p}{q}} \Vert f \Vert_p^{\frac{p}{q}} \iff \Vert f \Vert_q \leqslant \Vert f \Vert_\infty^{1 - \frac{p}{q}} \Vert f \Vert_p^{\frac{p}{q}}
        \]
        e como $\lambda = \frac{p}{q}$, segue que
        \[
            \Vert f \Vert_q \leqslant \Vert f \Vert_p^\lambda \Vert f \Vert_r^{1 - \lambda}.
        \]
        \item[--] $r < \infty$
        Note que multiplicando (\ref{eq:3}) por $q$, temos
        \[
            \frac{\lambda q}{p} + \frac{(1-\lambda)q}{r} = 1.
        \]
        Com isso, $\frac{p}{\lambda q}$ e $\frac{r}{(1-\lambda)q}$ são expoentes conjungados. Dito isso, aplicando a \nameref{thm:desigualdade-de-holder} com $f \in \cL^p \cap \cL^r$ temos que
        \[
            \begin{aligned}
                \int |f|^q \, d\mu &= \int |f|^{\lambda q + (1-\lambda)q} \,d\mu \\
                &= \int |f|^{\lambda q} |f|^{(1-\lambda)q}\\
                &\leqslant \Vert |f|^{\lambda q} \Vert_{\frac{p}{\lambda q}} \Vert f^{(1-\lambda)q} \Vert_{\frac{r}{(1-\lambda)q}}\\
                &= \left( \int |f|^{\lambda q \cdot \frac{p}{\lambda q}} \right)^{\frac{\lambda q}{p}} \left( \int |f|^{(1 - \lambda) q \cdot \frac{r}{(1-\lambda)q}} \right)^{\frac{(1-\lambda)q}{r}}\\
                &= \left( \int |f|^{p} \right)^{\frac{\lambda q}{p}} \left( \int |f|^{q} \right)^{\frac{(1-\lambda)q}{r}}\\
                &= \Vert f \Vert_p^{\lambda q} \Vert f \Vert^{(1-\lambda)q}_r\\
                &< \infty
            \end{aligned}
        \]
        Daí, $f \in \cL^q$. Além disso
        \[
            \Vert f \Vert_q^q \leqslant \Vert f \Vert_p^{\lambda q} \Vert f \Vert^{(1-\lambda)q} \iff \Vert f \Vert_q \leqslant \Vert f \Vert_p^\lambda \Vert f \Vert_r^{1 - \lambda}.
        \]
    \end{itemize}
    Assim, mostrada a desiguldadde de interpolação. 
\end{prf}

\begin{pbox}
    Sejam $(X,\eth,\mu)$ um espaço de medida com $\mu(X) < \infty$ e $0 < p < q \leqslant \infty$.
    Então $\cL^q \subseteq \cL^p$ e 
    \[
        \Vert f \Vert_p \leqslant \mu(X)^{\frac{1}{p} - \frac{1}{q}} \Vert f \Vert_q
    \]
\end{pbox}
\begin{prf}
    \dots
\end{prf}

\begin{tbox}[Desigualdade de Chebyshev]
    Sejam $(X,\eth,\mu)$ um espaço de medida e $f \in \cL^p$ com $1 \leqslant p < \infty$. 
    Então
    \[
        \Vert f \Vert_p \geqslant \alpha [\, \mu\left( \left\{ x \in X \,; |f(x)| > \alpha \right\}\right) \,]^{\frac{1}{p}}
    \]
    para todo $\alpha > 0$.
\end{tbox}
\begin{prf}
    \dots
\end{prf}

Agora vamos ver um resultado sobre os espaços $\ell^p$

\begin{pbox}
    Sejam $0 < p < q \leqslant \infty$.
    Então $\ell^p \subseteq \ell^q$ e 
    \[
        \Vert x \Vert_q \leqslant \Vert x \Vert_p
    \]
\end{pbox}
\begin{prf}
    Consideremos dois casos
    \begin{itemize}[leftmargin=*]
        \item[--] $q = \infty$
        
        Seja $x \in \ell^p$.
        Então $\sum_{n=1}^\infty |x_n|^p < \infty$.
        É fácil ver que
        \[
            |x_n| \leqslant \left( \sum_{n=1}^\infty |x_n|^p < \infty \right)^{\frac{1}{p}} < \infty
        \]
        para todo $n \in \bN$. Isto é, $\sum_{n=1}^\infty |x_n|^p < \infty$ é cota superior de $x = (x_n)$. Dito isso
        \[
            \Vert x \Vert_q = \Vert x \Vert_\infty = \sup |x_n| \leqslant \left(\sum_{n=1}^\infty |x_n|^p \right)^{\frac{1}{p}} < \infty.
        \]
        Logo $x \in \ell^q$ e 
        \[
            \Vert x \Vert_q \leqslant \Vert x \Vert_p.
        \]

        \item[--] $q < \infty$
        
        Utilizando a \nameref{thm:desigualdade-de-inteporlacao} com $r = \infty$ e $\lambda = \frac{p}{q} \in (0,1)$ para obter que $\ell^p = \ell^p \cap \ell^r \subseteq \ell^q$ (pelo caso $q = \infty$) e
        \[
            \Vert x \Vert_q \leqslant \Vert x \Vert_p^{\frac{p}{q}} \Vert x \Vert_\infty^{1 - \frac{p}{q}} \leqslant \Vert x \Vert_p^{\frac{p}{q}} \Vert x \Vert_p^{1 - \frac{p}{q}} = \Vert x \Vert_p.
        \]
    \end{itemize}
    Assim, demonstrada a proposição.
\end{prf}

Os proximos resultados estão relacionados a densidade das funções simples em $\cL^p$ e $\cL^\infty$

\begin{dbox}
    Seja $(X,d)$ um espaço métrico. Um conjunto $E \subseteq X$ é dito denso em $X$ se todo ponto de $X$ é aderente a $E$.
    Isto é, dado $x \in X$ existe uma sequência $(x_n)$ de elementos de $E$ tal que $x_n \to x.$
\end{dbox}

\begin{tbox}
    Seja $1 \leqslant p < \infty$.
    O conjunto das funções simples $\sum_{j=1}^n a_j \chi_{E_j}$ com $\mu(E_j) < \infty$ para todo $j = 1,\dots,n$ é denso em $\cL^p$
\end{tbox}
\begin{prf}
    Considere o conjunto
    \[
        Y = \left\{ f = \sum_{j=1}^{n} a_j \chi_{E_j} \,; \mu(E_j) < \infty \right\}.
    \]
    Note que dada uma função $f \in Y$ temos que
    \[
        \int |f|^p \,d\mu = \int \left| \sum_{j=1}^n a_j \chi_{E_j} \right| \,d\mu = \int \sum_{j=1}^n |a_j|^p \chi_{E_j} \,d\mu = \sum_{j=1}^n |a_j|^p \mu(E_j) < \infty.
    \]
    Isto é, $f \in \cL^p$.
    Consequentemente $Y \subseteq \cL^p$.

    Por outro lado, seja $f \in \cL^p$ sabemos que $f = f^+ - f^-$ onde $f^+, f^- \in \cM^+(X,\eth)$.
    Além disso pelo Lema ?? temos que existem sequências $(\varphi^+_n), (\varphi^-_n)$ de funções simples em $\cM^+(X,\eth)$ tais que
    \[
        0 \leqslant \varphi^\pm_n \leqslant \varphi^\pm_{n+1} \,\text{ e }\, \varphi^\pm_n \to f^\pm.
    \]
    É fácil ver que $(\varphi^+_n - \varphi^-_n) \subseteq \cM(X,\eth)$ é uma sequência de funções simples tal que
    \[
        \lim (\varphi^+_n - \varphi^-_n) = \lim \varphi^+_n + \lim \varphi^-_n = f^+ -f^- = f.
    \]
    Seja $\varphi_n = \varphi^+_n - \varphi^-_n$ para todo $n \in \bN$, assim $(\varphi_n)$ é uma sequência de funções simples tal que $\varphi_n \to f$.
    Perceba que
    \[
        |\varphi_n| = \varphi^+_n + \varphi^-_n \leqslant f^+ + f^- = |f|,
    \]
    para todo $n \in \bN$. Como $f \in \cL^p$, então
    \[
        \int |\varphi_n|^p \, d\mu \leqslant \int |f|^p \,d\mu < \infty,
    \]
    ou seja, $(\varphi_n) \subseteq \cL^p$.
    Consequentemente, denotando $\varphi_n$ por
    \[
        \varphi_n = \sum_{j=1}^{m_n} a_{j} \chi_{E_j}
    \]
    segue que
    \[
        |a_j|^p \mu(E_j) \leqslant \sum_{j=1}^{m_n} |a_j|^p \mu(E_j) = \int \sum_{j=1}^{m_n} |a_j|^p \chi_{E_j} \,d\mu = \int |\varphi_n|^p \,d\mu < \infty.
    \]
    Isto nos diz que $\mu(E_j) < \infty$ para todo $j = 1,\dots,m_n$ e $n \in \bN$. Logo, $(\varphi_n) \subseteq Y$.
    Por fim, aplicando o \nameref{thm:teorema-da-convergencia-dominada}, temos que
    \[
        \lim \Vert \varphi_n - f \Vert_p^p = \lim \int |\varphi_n - f|^p \,d\mu = \int \lim |\varphi_n - f|^p \,d\mu = 0
    \]
    pois
    \[
        \lim \varphi_n = f \,\text{ e }\, |\varphi_n - f|^p \leqslant 2^p |f|^p \in \cL^1.
    \]
    Portanto $Y$ é denso em $\cL^p$, já que dada uma função $f \in \cL^p$, encontramos uma sequência em $Y$ que converge para $f$.
\end{prf}

\begin{tbox}
    O conjunto das funções simples é denso em $\cL^\infty$.
\end{tbox}
\begin{prf}
    ~
\end{prf}

O proximos resultados são uma generalização da \nameref{thm:desigualdade-de-holder}

\begin{lbox}
    Sejam $0 < p, q \leqslant \infty$ tais que $\frac{1}{r} = \frac{1}{p} + \frac{1}{q}$, $f \in \cL^p$ e $g \in \cL^q$.
    Então $fg \in \cL^r$ e
    \[
        \Vert fg \Vert_r \leqslant \Vert f \Vert_p \Vert g \Vert_q
    \]
\end{lbox}
\begin{prf}
    \dots
\end{prf}

\begin{pbox}[Desigualdade de Hölder Generalizada]
    Sejam $0 < p_1,\dots,p_N \leqslant \infty$ tais que $\frac{1}{p} = \frac{1}{p_1} + \cdots + \frac{1}{p_N}$ e $f = f_1 f_2 \cdots f_N$ onde $f_j \in \cL^{p_j}$ para todo $j = 1,\dots,N$. 
    Então $f \in \cL^p$ e 
    \[
        \Vert f \Vert_p \leqslant \Vert f_1 \Vert_{p_1} \cdots \Vert f_N \Vert_{p_N}
    \] 
\end{pbox}
\begin{prf}
    Segue por indução do lema anterior.
\end{prf}

\chapter{Espaços de Sobolev}

Os espaços de Sobolev desempenham um papel fundamental na análise funcional e nas equações diferenciais parciais, oferecendo uma estrutura adequada para o estudo de problemas envolvendo funções que podem não ser diferenciáveis no sentido clássico. Introduzidos como uma extensão dos conceitos de derivada e integrabilidade, esses espaços permitem trabalhar com soluções generalizadas, chamadas de soluções fracas, ampliando o escopo de problemas que podem ser tratados matematicamente. Neste capítulo, serão apresentados os conceitos básicos dos espaços de Sobolev, suas principais propriedades.

\section{Preliminares}

Antes de começar de fato o estudo dos espaços de Sobolev precisamos de algumas definições que serão usadas extensivamente nesse capítulo

\begin{dbox} \label{def:suporte}
    Seja $\varphi : \Omega \subseteq \bR ^n \to \bR$ uma função qualquer. Definimos o suporte de $\varphi$ por
    \[
        \supp \varphi = \overline{\{x \in \Omega \,; \varphi(x) \neq 0\}}
    \]
    Além disso, se $\supp\varphi$ é compacto, dizemos que $\varphi$ tem suporte compacto.
\end{dbox}

Note que $\{x \in \Omega \,; \varphi(x) \neq 0\} \subseteq \supp \varphi$, então $(\supp \varphi)^\cC \subseteq \{x \in \Omega \,; \varphi(x) = 0\}$. Ou seja se $x \not\in \supp \varphi$, então $\varphi(x) = 0$.
Além disso, se $\Omega$ é um aberto, então $\varphi$ se anula em $\partial\Omega$.

\begin{dbox}
    Seja $\Omega$ um aberto de $\bR^n$. Definimos o espaço das funções com a $k$-ésima derivada contínua por
    \[
        \cC^k(\Omega) = \{f : \Omega \to \bR \,; f \text{ é contínua, } f^{(k)} \text{ existe e é contínua}\}
    \]
\end{dbox}

\obs O conjunto das funções infinitamente diferenciáveis é definido por
\[
    \cC^\infty(\Omega) = \bigcap_{k=0}^\infty \cC^k(\Omega)
\]

\begin{dbox}
    O conjunto das funções $f \in \cL^p(\Omega)$ localmente somáveis, isto é, integráveis em todo conjunto compacto de $\Omega$ é denotado por $\cL^p_{\mathrm{loc}}(\Omega)$ 
\end{dbox}

A definição abaixo será âmplamente utilizada nesse capítulo

\begin{dbox}
    O conjunto das funções contínuas com suporte compacto em $\Omega$ é definido por
    \[
        \cC_c(\Omega) = \{f : \Omega \to \bR \,; \supp f \text{ é compacto}\}
    \]
    Além disso definimos
    \[
        \cC^k_c(\Omega) = \cC_c(\Omega) \cap \cC^k(\Omega)
    \]
    que é o conjunto das funções $f : \Omega \to \bR$ de classe $\cC^k$ com suporte compacto.
\end{dbox}

Os resultados abaixos são de extrema importância no estudo de espaços de Sobolev.

\begin{tbox}[Integração por partes em $\bR ^n$] \label{thm:integracao-por-partes}
    Seja $\Omega \subseteq \bR^n$ uma região regular e $u, v : \overline\Omega \to \bR$ de classe $\cC^1$. 
    Então
    \[
        \int_\Omega u \dfrac{\partial v}{\partial x_i} \,dx = \int_{\partial\Omega} uv \nu_i \, dS- \int_\Omega v \dfrac{\partial u}{\partial x_i} \,dx
    \]
    onde $\nu = (\nu_1,\dots,\nu_n)$ é o vetor normal unitário que aponta pra dentro em $\partial\Omega$.   
\end{tbox}
\begin{prf}
    \Cite{evans-pde}
\end{prf}

\begin{tbox}
    (coordenadas polares) \dots
\end{tbox}

\section{Motivação}

\section{Espaços de Sobolev $\cW^{1,p}(I)$}

\begin{dbox}
    Sejam $I$ um intervalo aberto, possívelmente ilimitado e $u,v \in \cL^1_{\mathrm{loc}}(I)$.
    Dizemos que $v$ é a derivada fraca de $u$, se
    \[
        \int_I u \phi' \, dx = -\int_I v \phi\,dx   
    \]
    para todo $\phi \in \cC^\infty_c(I)$.
\end{dbox}

Denotamos $u' = v$ e diremos $v$ é a derivada de $u$ no sentido fraco.

\obs Aqui, utlizamos a notação $dx$ ao invés de $d\mu$ na integral de Lebesgue como convençao para dar ênfase que estamos utilizando a medida de Lebesgue (e não uma medida qualquer).
Além disso, se uma função é integrável a Riemann e a Lebesgue, suas integrais se coincidem.

\obs (função teste)

\begin{ex} \label{ex:derivada-fraca-R}
    A função $u : I  =(0,2) \to \bR$ dada por
    \[
        u(x) = \left\{
            \begin{array}{rl}
                x & \text{se }\; 0 < x \leqslant 1\\
                1 & \text{se }\; 1 < x < 2,\\
            \end{array}
        \right.
    \]
    não é derivavel no sentido usual. Já que
    \[
        \lim_{h\to0^-} \frac{u(1 + h)}{h} = 1 \neq 0 = \lim_{h\to0^+} \frac{u(1 + h)}{h}.
    \]
    Porem, possui derivada fraca dada pela função
    \[
        v(x) = \left\{
            \begin{array}{rl}
                1 & \text{se }\; 0 < x \leqslant 1\\
                0 & \text{se }\; 1 < x < 2.\\
            \end{array}
        \right.
    \]
    Com efeito, note que, para toda $\phi \in \cC^\infty_c(I)$ temos
    \[
        \int_0^2 u \phi' \,dx = \int_0^1 x \phi' \,dx + \int_1^2 \phi' \,dx = x \phi \bigg|_0^1 - \int_0^1 \phi \,dx + \phi \bigg|_1^2.
    \]
    Como $\phi$ tem suporte compacto, $\phi(0) = \phi(2) = 0$. Assim
    \[
        \int_0^2 u \phi' \,dx = \phi(1) - \int_0^1 \phi \,dx - \phi(1) = -\int_0^1 \phi \,dx
    \]
    Por fim, basta escrever $0$ como uma integral.
    \[
        \int_0^2 u \phi' \,dx = - \left(  \int_0^1 1\phi \, dx - \int_1^2 0\phi \,dx  \right) = -\int_0^2 v \phi \,dx
    \]
    Portanto, $v$ é a derivada de $u$ no sentido fraco.
\end{ex}

\begin{ex}
    A função $u : I  = (0,2) \to \bR$ dada por
    \[
        u(x) = \left\{
            \begin{array}{rl}
                x & \text{se }\; 0 < x \leqslant 1\\
                2 & \text{se }\; 1 < x < 2,\\
            \end{array}
        \right.
    \]
    não possuí derivada fraca.
    Mostremos que $u'$ não existe no sentido fraco.
    Isto é, mostrar que não existe uma função $v \in \cL^1_\loc(I)$ que satisfaz
    \[
        \int_I u \phi' \, dx = -\int_I v \phi \,dx.
    \]
    para toda função $\phi \in \cC_c^\infty(I)$. 
    Com efeito, suponha o contrário
    \[
        -\int_0^2 v \phi \, dx = \int_0^2 u \phi' \,dx = \int_0^1 x \phi' \,dx + 2\int_1^2 \phi' \,dx = \int_0^1 \phi \,dx - \phi(1).
    \]
    Seja $(\phi_n)$ uma sequência de funções suaves satisfazendo
    \[
        0 \leqslant \phi_n \leqslant 1, \quad \phi_n(1) = 1, \quad \phi_n(x) \to 0 \text{ se } x \neq 1.
    \]
    Isolando $\phi(1)$, substituindo $\phi$ por $\phi_n$ e fazendo $n \to \infty$, obtemos
    \[
        1 = \lim \phi_n(1) = \lim \left[ \int_0^2 v \phi_n \, dx- \int_0^1 \phi_n \,dx \right] = 0
    \]
    pois pelo Teorema da Convergência Dominada, $\phi_n \to 0$ qtp em $I$
    Portanto $u$ não possui derivada fraca.
\end{ex}

Com a noção de derivada fraca, estamos prontos para definir os espaços de Sobolev $\cW^{1,p}(I)$

\begin{dbox}
    Seja $I$ um intervalo aberto, possívelmente ilimitado.
    Definimos o espaço de Sobolev $\cW^{1,p}(I)$ por
    \[
        \cW^{1,p} = \{u \in \cL^p \,; u' \in \cL^p\}
    \]
    onde $u'$ é a derivada de $u$ no sentido fraco
\end{dbox}

\section{Espaços de Sobolev $\cW^{k,p}(\Omega)$}

Nosso objetivo agora, é definir a derivada fraca de ordem superior, generalizar os espaços da seção anterior para funções definidas em um aberto $\Omega$ do $\bR^n$ e explorar algumas propiedades elementares.

Seja $u \in \cC^1(\Omega)$, então se $\phi \in \cC^\infty_c(\Omega)$, utilizando integração por partes em $\bR^n$ temos que
\[
    \int_\Omega u \dfrac{\partial \phi}{\partial x_i} \,dx = \int_{\partial\Omega} u\phi \nu_i \, dS- \int_\Omega \phi \dfrac{\partial u}{\partial x_i} \,dx. \qquad (i = 1,\dots,n)
\]
Como $\phi$ tem suporte compacto e $\Omega$ é um aberto, segue que $\phi$ se anula em $\partial\Omega$, como mostrado abaixo da definição de suporte. Portanto a expressão acima se torna
\begin{equation} \label{eq:derivada-fraca-xi}
    \int_\Omega u \dfrac{\partial \phi}{\partial x_i} \,dx = - \int_\Omega \phi \dfrac{\partial u}{\partial x_i} \,dx. \qquad (i = 1,\dots,n)
\end{equation}
Além disso, se $u$ for de classe $\cC^k$ com $k \in \bN$ e $\alpha = (\alpha_1,\dots,\alpha_n)$ um multi-índice de ordem $|\alpha| = \alpha_1 + \cdots + \alpha_n = k$, então
\begin{equation} \label{eq:derivada-fraca-dalpha}
    \int_\Omega u D^\alpha \phi = (-1)^{|\alpha|} \int_\Omega D^\alpha u \phi.
\end{equation}
Essa expressão é válida, já que
\[
    D^\alpha \phi = \dfrac{\partial^{\alpha_1} }{\partial x_1^{\alpha_1}} \cdots \dfrac{\partial^{\alpha_n} }{\partial x_n^{\alpha_n}} = \dfrac{\partial^{|\alpha|} }{\partial x_1^{\alpha_1} \cdots \partial x_n^{\alpha_n}}
\]
e podemos aplicar (\ref{eq:derivada-fraca-xi}) $|\alpha|$ vezes.

Queremos descobrir se existe uma classe de funções tal que (\ref{eq:derivada-fraca-dalpha}) ainda é válida, mesmo se $u$ não for de classe $\cC ^k$. Note que o lado esquerdo de (\ref{eq:derivada-fraca-xi}) está bem definido se $u \in \cL^1_{\mathrm{loc}}(\Omega)$.
O problema é que se $u$ não é uma função de classe $\cC^k$ então o lado direito de (\ref{eq:derivada-fraca-xi}) não faz sentido. Para resolver isso perguntamos se existe uma função $v \in \cL^1_{\mathrm{loc}}(\Omega)$ tal que (\ref{eq:derivada-fraca-xi}) é válida quando substituimos $D^\alpha u$ por $v$.

\begin{dbox}[Derivada fraca em $\Omega$]
    Sejam $u,v \in \cL^1_{\mathrm{loc}}(\Omega)$ e $\alpha$ um multi-índice. Dizemos que $v$ é a $\alpha$-ésima derivada parcial fraca de $u$, denotada por
    \[
        D^\alpha u = v
    \]
    dado que
    \begin{equation} \label{eq:derivada-fraca}
        \int_\Omega u D^\alpha \phi \,d\mu = (-1)^{|\alpha|} \int_\Omega D^\alpha u \phi \,d\mu.
    \end{equation}
    para toda função de teste $\phi \in \cC ^\infty_c(\Omega)$
\end{dbox}

Isto é, se dado uma função $u$ e existe uma função $v$ que satisfaz (\ref{eq:derivada-fraca}) para toda $\phi$ função de teste, dizemos que $D^\alpha u = v$ no sentido fraco.
Caso contrário, se não existir uma função $v$ que satisfaz (\ref{eq:derivada-fraca}), então $u$ não possui a $\alpha$-ésima derivada parcial fraca.

O primeiro resultado sobre a derivada fraca que queremos mostrar é a sua unicidade, para isso precisamos antes do seguinte lema.

\begin{lbox}
    Sejam $u \in \cL^1_{\loc}(\Omega)$ e $\phi \in \cC^\infty(\Omega)$.
    Então
    \[
        \int_\Omega u \phi = 0
    \]
    se, e somente se $u \equiv 0$ qtp em $\Omega$
\end{lbox}
\begin{prf}
    ~
\end{prf}

\begin{pbox}
    Seja $\alpha$ um multi-índice. Se $v$ e $\tilde v$ são ambas $\alpha$-ésimas derivadas parciais fracas de uma função $u$.
    Então
    \[
        v = \tilde v \text{ qtp em } \Omega.
    \]
\end{pbox}
\begin{prf}
    Sejam $v, \tilde v \in \cL^1_{\mathrm{loc}}(\Omega)$ tais que
    \[
        \int_\Omega u D^\alpha \phi \,dx = (-1)^{|\alpha|} \int_\Omega v \phi \,dx \;\text{ e }\; \int_\Omega u D^\alpha \phi \, dx= (-1)^{|\alpha|}\int_\Omega \tilde v \phi \,dx
    \]
    para toda $\phi \in \cC^\infty_c(\Omega)$. Daí
    \[
        \int_\Omega (v - \tilde v) \phi \, dx = 0
    \]
    isto é
    \[
        v - \tilde v = 0 \text{ qtp em } \Omega.
    \]
    Portanto $v = \tilde v$ qtp em $\Omega$.
\end{prf}

\begin{ex}
    Considere a função $u$ do exemplo \ref{ex:derivada-fraca-R}, vimos que
    \[
        v(x) = \left\{
            \begin{array}{rl}
                1 & \text{se }\; 0 < x \leqslant 1\\
                0 & \text{se }\; 1 < x < 2.\\
            \end{array}
        \right.
    \]
    é a derivada de $u$ no sentido fraco.
    Porem a função
    \[
        \tilde v(x) = \left\{
            \begin{array}{rl}
                1 & \text{se }\; 0 < x < 1\\
                0 & \text{se }\; 1 \leqslant x < 2.\\
            \end{array}
        \right.
    \]
    também satisfaz a definição de derivada fraca.
    A primeira vista, temos a sensação de que essa função é um contra-exemplo para unicidade da derivada fraca, porem $v$ e $\tilde v$ são iguais fora de um conjunto de medida nula.
    De fato
    \[
        (v - \tilde v)(x) = \left\{
            \begin{array}{rl}
                1 & \text{se }\; x = 1\\
                0 & \text{se }\; x \neq 1.\\
            \end{array}
        \right.
    \]
    Portanto
    \[
        v = \tilde v \text{ qtp em } (0,2).
    \]
    pois $\{1\}$ é finito, logo tem medida nula.
\end{ex}

Com a definição de derivada fraca estabelecida, podmos definir os espaços de Sobolev $\cW^{k,p}(\Omega)$.

\begin{dbox}
    Seja $\Omega \subseteq \bR^n$ um aberto. 
    Definimos o espaço de Sobolev $\cW^{1,p}(\Omega)$ por
    \[
        \cW^{1,p}(\Omega) = \left\{u \in \cL^p(\Omega) \,; \text{existem } g_i : \Omega \to \bR \text{ em $\cL^p(\Omega)$ tais que} \int_\Omega u \dfrac{\partial \phi}{\partial x_i} \, d\mu = -\!\!\int g_i \phi \,d\mu \right\}
    \]
\end{dbox}

Existem duas formas de definir os espaços de Sobolev $\cW^{k,p}(\Omega)$, indutivamente, e pela derivada fraca, veremos as duas e mostraremos que são equivalentes

\begin{dbox}
    Seja $\Omega \subseteq \bR ^n$ um aberto. Definimos o espaço de Sobolev $\cW^{k,p}(\Omega)$ por
    \[
        \cW^{k,p}(\Omega) = \left\{ u \in \cL^p(\Omega) \,; D^\alpha u \in \cL^p(\Omega) \text{ para todo multi-índice } \alpha \text{ com } |\alpha| \leqslant k\right\}
    \]
    com $\phi \in \cC^\infty_c(\Omega)$. 
    Ou
    \[
        \cW^{k,p}(\Omega) = \left\{ u \in \cW^{k-1,p}(\Omega) \,; D^\alpha u \in \cW^{k-1,p}(\Omega) , \text{ para todo multi-índice } \alpha \text{ com } |\alpha| = 1\right\}
    \]
    onde $D^\alpha u$ é a $\alpha$-ésima derivada parcial de $u$ no sentido fraco.
\end{dbox}

\obs Quando $p = 2$, a notação $H^{k}(\Omega)$ é comumente utilizada para dar ênfase que o espaço $\cW^{k,2}(\Omega)$ é um espaço de Hilbert, munido do produto interno
\[
    \left\langle u, v\right\rangle _{H^k(\Omega)} = \sum_{|\alpha| \leqslant k} \left\langle D^\alpha u, D^\alpha v\right\rangle _{\cL^2(\Omega)}
\]
onde
\[
    \left\langle D^\alpha u, D^\alpha v\right\rangle _{\cL^2(\Omega)} = \int_\Omega D^\alpha u D^\alpha v \,dx.
\]

\begin{dbox}
    O espaço $\cW^{k,p}(\Omega)$ admite norma
    \[
        \Vert u \Vert_{\cW^{k,p}(\Omega)} = \left( \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p \right)^{\frac{1}{p}}
    \]
    para $1 \leqslant p < \infty$ e 
    \[
        \Vert u \Vert_{\cW^{k,p}(\Omega)} 
        % = \sum_{|\alpha| \leqslant k} \esssup\!_\Omega |D^\alpha u| 
        = \sum_{|\alpha| \leqslant k} \Vert D^{\alpha}u \Vert_{\cL^\infty(\Omega)}
    \]
    para $p = \infty$.
\end{dbox}

\obs Dizemos que uma sequência $(u_n)$ converge para $u$ em $\cW^{k,p}(\Omega)$ se
\[
    \lim \Vert u_n - u \Vert_{\cW^{k,p}(\Omega)} = 0,
\]
e denotamos por $u_n \to u \text{ em } \cW^{k,p}(\Omega)$.
Além disso dizemos que $(u_n)$ converge para $u$ em $\cW^{k,p}_\loc(\Omega)$ se $u_n$ converge para $u$ em $\cW^{k,p}(\Omega')$ para todo conjunto aberto $\Omega'$ compactamente contido em $\Omega$, isto é $\Omega' \subseteq \Omega$ e $\overline{\Omega'}$ é compacto. Essa inclusão será denotada por $\Omega' \Subset \Omega$.

Ainda não temos todas as ferramentas necessárias para provar que as normas da definição anterior são de fato normas em $\cW^{k,p}(\Omega)$ com $1 \leqslant p \leqslant \infty$. Isso será feito após o Teorema \ref{thm:propiedades-derivada-fraca} sobre as propiedades da derivada fraca necessárias para verificar que $\Vert \cdot \Vert_{\cW^{k,p}(\Omega)}$ satisfaz a definição de norma.

\obs Essa não é a única forma de definir uma norma em $\cW^{k,p}(\Omega)$, a norma que definimos acima é equivalente, por exemplo a norma
\[
    \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}
\]
com $1 \leqslant p \leqslant \infty$, e a norma $\Vert \cdot \Vert_{\cW^{k,\infty}(\Omega)}$ é equivalente a
\[
    \max_{|\alpha|\leqslant k} \Vert D^\alpha \Vert_{\cL^\infty(\Omega)}.
\]

\begin{ex}
    Seja $\Omega = B(\mathbf{0},1) \subseteq \bR^n$ a bola aberta de raio 1 centrada na origem, e considere $u : \Omega \to \bR$ dada por
    \[
        x \mapsto |x|^{-\alpha}.
    \]
    Para quais valores de $\alpha > 0$, $n$ e $p$, $u \in \cW^{1,p}(\Omega)$.
    Primeiramente, note que $u$ é suave fora de $\mathbf{0}$ com
    \[
        \dfrac{\partial u}{\partial x_i} = \frac{-\alpha x_i}{|x|^{\alpha + 2}} \quad (x \neq \mathbf{0}),
    \]
    e daí, como
    \[
        Du(x) = \left(\frac{-\alpha x_1}{|x|^{\alpha + 2}},\dots,\frac{-\alpha x_n}{|x|^{\alpha + 2}}  \right) \quad (x \neq \mathbf{0}),
    \]
    segue que
    \[
        |Du(x)| = \frac{|\alpha|}{|x|^{\alpha + 1}} \quad (x \neq \mathbf{0}).
    \]
    Seja $\phi \in \cC^\infty_c(\Omega)$ e fixe $\varepsilon > 0$. Por integração por partes, temos
    \[
        \int_{\Omega \smallsetminus B[\mathbf{0}, \varepsilon]} u \dfrac{\partial \phi}{\partial x_i} \, dx = -\int_{\Omega \smallsetminus B[\mathbf{0}, \varepsilon]} \phi \dfrac{\partial u}{\partial x_i} \,dx + \int_{\partial B[\mathbf{0},\varepsilon]} u \phi \nu_i \,dS
    \]
    onde $\nu = (\nu_1,\dots,\nu_n)$ denota o vetor normal que aponta para dentro em $\partial B[\mathbf{0},\varepsilon]$.
    Agora se $\alpha + 1 < n$, $|Du(x)| \in \cL^1(\Omega)$.
    De fato, integrando $Du$, temos
    \[
        \int_\Omega |Du| \,dx = |\alpha|\int_{B(\mathbf{0},1)} \frac{1}{|x|^{\alpha+1}} \,dx.
    \]
    Transformando em coordenadas polares, conseguimos simplificar essa integral da seguinte forma
    \[
        \int_{B(\mathbf{0},1)} \frac{1}{|x|^{\alpha+1}} \,dx =  \int_0^1 \int_{|x| = r} \frac{1}{|x|^{\alpha + 1}} \,dS dr = \int_0^1 \int_{|x|= r} \frac{1}{r^{\alpha + 1}} \, dS dr = \int_0^1 \frac{1}{r^{\alpha+1}}  \int_{|x| = r} dS dr.
    \]
    Onde a integral de superficie, é igual a area da esfera $n$-dimensional de raio $r$, dada por
    \[
        \frac{2\pi^{\frac{n}{2}}}{\Gamma(\frac{n}{2})}r^{n-1}
    \]
    que por simplicidade, vamos denotar por $\sigma(n) r^{n-1}$. Dessa forma
    \[
        \int \frac{1}{r^{\alpha+1}}  \int_{|x| = r} dS dr = \sigma(n)\int_0^1 r^{n-\alpha-2} \,dr = \sigma(n)\left(\frac{1^{n-\alpha-1}}{n-\alpha -1} - \frac{0^{n-\alpha-1}}{n-\alpha-1}\right).
    \]
    Note que se $n - \alpha - 1 < 0$ então $0^{n-\alpha-1} = \infty$. Sendo assim
    \[
        \int_\Omega |Du| \, dx = \infty \iff \alpha + 1 > n.
    \]
    Portanto $|Du(x)| \in \cL^1(\Omega)$ desde que $\alpha + 1 < n$.
    Nesse caso
    \[
        \left| \int_{\partial B[\mathbf{0},\varepsilon]} u \phi \nu_i \,dS \right| \leqslant 
        % \int_{\partial B[\mathbf{0},\varepsilon]} |u \phi \nu_i| \,dS = 
        \int_{\partial B[\mathbf{0},\varepsilon]} |u| |\phi| |\nu_i| \,dS \leqslant \Vert \phi \Vert_{\infty}\int_{\partial B[\mathbf{0},\varepsilon]} |u|dS \leqslant \Vert \phi \Vert_{\infty}\int_{\partial B[\mathbf{0},\varepsilon]} \varepsilon^{-\alpha} \,dS,
    \]
    onde essa ultima integral pode ser calculada por meio de coordenadas polares de forma análoga ao que foi feito anteriormente, resultando em
    \[
        \left| \int_{\partial B[\mathbf{0},\varepsilon]} u \phi \nu_i \,dS \right| \leqslant C \varepsilon^{n-1-\alpha} \overset{\varepsilon \to 0}{\longrightarrow} 0.
    \]
    Portanto
    \[
        \int_{\Omega} u \dfrac{\partial \phi}{\partial x_i} \, dx = -\int_{\Omega} \phi \dfrac{\partial u}{\partial x_i} \,dx,
    \]
    para toda $\phi \in \cC^\infty_c(\Omega)$, desde que $0 < \alpha < n-1$. 
    Além disso, $|Du(x)| \in \cL^p(\Omega)$ se, e somente se, $(\alpha + 1)p < n$, esse cálculo é feito de forma análoga ao que foi feito para verificar quando $|Du(x)| \in \cL^1(\Omega)$. Consequentemente, $u \in \cW^{1,p}(\Omega)$ se, e somente se $\alpha < \frac{n-p}{p}$.
    Em particular $u \not\in \cW^{1,p}(\Omega)$ quando $p \geqslant n$.
\end{ex}

\begin{tbox}[Propiedades da derivada fraca] \label{thm:propiedades-derivada-fraca}
    Seja $u, v \in \cW^{k,p}(\Omega)$ e $\alpha$ um multi-índice com $1 \leqslant |\alpha| \leqslant k$.
    Então 
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $D^\beta(D^\alpha u) = D^\alpha (D^\beta u) = D^{\alpha + \beta} u$ para todos multi-índices $\alpha$ e $\beta$ com $|\alpha| + |\beta| \leqslant k.$
        \item $D^\alpha u \in \cW^{k - |\alpha|,p}(\Omega)$
        \item para todo $\gamma \in \bR$, $\gamma u + v \in \cW^{k,p}(\Omega)$ e
        \[
            D^{\alpha}(\gamma u + v) = \gamma D^\alpha u + D^\alpha v
        \]
        \item se $\Omega_0$ é um aberto de $\Omega$, então $u \in \cW^{k,p}(\Omega_0)$
        \item se $\eta \in \cC^\infty_c(\Omega)$, então $\eta u \in \cW^{k,p}(\Omega)$ e
        \begin{equation} \label{eq:regra-de-leibniz}
            D^\alpha (\eta u) = \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u
        \end{equation}
        onde
        \[
            \binom{\alpha}{\sigma} = \frac{\alpha!}{\sigma!(\alpha - \sigma)!}, \quad \alpha! = \alpha_1!\cdots \alpha_n!
        \]
        e $\sigma \leqslant \alpha$ significa $\sigma_j \leqslant \alpha_j$, para todo $j = 1,\dots,n$.
    \end{enumerate}
\end{tbox}
\begin{prf}
    ~

    \textbf{(a)} Mostremos que $D^{\beta}D^{\alpha} u = D^{\alpha + \beta}u$.
    A demonstração para $D^{\alpha}D^{\beta} u$ é análoga.
    Com efeito
    \[
        \int_\Omega D^{\alpha} u D^{\beta} \phi \, dx = (-1)^{|\alpha|} \int_\Omega u D^{\alpha} D^{\beta} \phi \, dx = (-1)^{|\alpha|} \int_\Omega u D^{\alpha + \beta} \phi \,dx.
    \]
    Note que a ultima igualdade é válida pelo fato de $\phi$ ser uma função infinitamente diferenciável, então o operador $D^\alpha$ é a $\alpha$-ésima derivada parcial no sentido usual.
    Dessa forma $D^{\beta}D^{\alpha} u = D^{\alpha + \beta} u$.
    Dito isso, utilizando a definição de derivada fraca obtemos
    \[
        (-1)^{|\alpha|} \int_\Omega u D^{\alpha + \beta} \phi \,dx = (-1)^{|\alpha|}(-1)^{|\alpha| + |\beta|} \int_\Omega \phi D^{\alpha+\beta} u \,dx = (-1)^{|\beta|} \int_\Omega \phi D^{\alpha + \beta} u \,dx.
    \]
    Portanto $D^{\beta} D^{\alpha} u = D^{\alpha + \beta} u$ no sentido fraco.

    \textbf{(b)} Suponha que $D^\alpha u \not\in \cW^{k-|\alpha|,p}(\Omega)$, então existe um multi-índice $\beta$ com $|\beta| \leqslant k - |\alpha|$ tal que $D^{\beta}(D^{\alpha}u) \not\in \cL^p$.
    Pelo item anterior temos que $D^{\alpha+\beta}u \not\in \cL^p(\Omega)$, o que é uma contradição, pois por hipótese $D^{\gamma}u \in \cL^p$ para todo multi-índice $\gamma$ com $|\gamma| \leqslant k$. Em particular como $|\beta| \leqslant k - |\alpha|$, tem-se $|\gamma| = |\alpha| + |\beta| \leqslant k$.
    Portanto $D^{\alpha}u \in \cW^{k-|\alpha|,p}(\Omega)$.

    \textbf{(c)} Note que
    \[
        \int_\Omega (\gamma u + v) D^{\alpha}\phi \,dx = \int_\Omega \gamma u D^\alpha \phi \, dx + \int_\Omega v D^\alpha \phi \, dx = \gamma \int_\Omega u D^{\alpha} \phi \,dx + \int_\Omega v D^{\alpha} \phi \, dx.
    \]
    Utilizando a definição de derivada fraca nas duas integrais obtemos
    {\small
    \[
        \gamma \int_\Omega u D^{\alpha} \phi \,dx + \int_\Omega v D^{\alpha} \phi \, dx = \gamma (-1)^{|\alpha|} \int_\Omega \phi D^{\alpha} u \, dx + (-1)^{|\alpha|}\int_\Omega \phi D^{\alpha} v \, dx = \int (\gamma D^{\alpha}u + D^{\alpha}v )\phi \,dx
    \]}
    Portanto $D^{\alpha}(\gamma u + v) = \gamma D^\alpha u + D^\alpha v$ no sentido fraco.

    \textbf{(d)} Seja $\Omega_0 \subseteq \Omega$ um aberto, queremos verificar que $u \in \cW^{k,p}(\Omega_0)$.
    De fato, basta verificar que as integrais
    \[
        \int_{\Omega_0} |u|^p \, dx \;\text{ e }\; \int_{\Omega_0} |D^{\alpha}u|^p \, dx \;\; (\forall \alpha \text{ multi-índice com }|\alpha| \leqslant k)
    \]
    são finitas. De fato
    \[
        \int_{\Omega_0} |u|^p \, dx \leqslant \int_{\Omega} |u|^p \,dx < \infty
    \]
    e
    \[
        \int_{\Omega_0} |D^\alpha u|^p \, dx \leqslant \int_{\Omega} |D^\alpha u|^p \,dx < \infty \;\; (\forall \alpha \text{ multi-índice com }|\alpha| \leqslant k),
    \]
    ambas pelo fato de $u \in \cW^{k,p}(\Omega)$.
    Assim $u \in \cW^{k,p}(\Omega_0)$.

    \textbf{(e)} Para mostrar que (\ref{eq:regra-de-leibniz}) é válida, utilizaremos indução sobre $|\alpha|$. Com efeito para $|\alpha|= 1$, como $\eta$ e $\varphi$ são funções infinitamente diferenciáveis no sentido usual, temos que $D^{\alpha} (\eta \varphi) = \phi D^{\alpha}\eta + \eta D^{\alpha} \phi$.
    Dessa forma
    \[
        \int_\Omega \eta u D^{\alpha} \phi \, dx = \int_\Omega u D^{\alpha} (\eta \phi) - \int_\Omega u\phi D^{\alpha} \eta \, dx.
    \]
    Como $\eta$ e $\phi$ tem suporte compacto, então $D^{\alpha}(\eta \phi)$ também tem. 
    Dito isso, utilizando a definição de derivada fraca apenas na primeira integral obtemos
    \[
        \int_\Omega \eta u D^{\alpha} \phi \, dx = -\int_\Omega \eta \phi D^{\alpha} u \, dx - \int_\Omega u\phi D^{\alpha} \eta \, dx = -\int_\Omega (\eta D^{\alpha}u + uD^{\alpha}\eta) \phi \,dx.
    \]
    Portanto $D^{\alpha}(\eta u) = \eta D^{\alpha}u + uD^{\alpha}\eta$ como queriamos mostrar.

    Agora seja $m < k$ e suponha que $(\ref{eq:regra-de-leibniz})$ é válida para todo multi-índice $\alpha$ com $|\alpha| \leqslant l$ e toda função de teste $\eta$.
    Considere um multi-índice $\alpha$ com $|\alpha| = m + 1$.
    Então $\alpha$ é da forma $\alpha = \beta + \gamma$ com $|\beta| = m$ e $|\gamma| = 1$. 
    Daí 
    \[
        \int_\Omega \eta u D^{\alpha}\phi \, dx = \int_\Omega \eta u D^{\beta + \gamma}\phi \, dx = \int_\Omega \eta u D^\beta(D^\gamma \phi) \, dx = (-1)^{|\beta|} \int_\Omega D^{\beta} (\eta u) D^{\gamma}\phi \,dx.
    \]
    Como $|\beta| = m$ podemos utilizar a hipótese de indução em $D^{\beta}(\eta u)$ e a $\gamma$-ésima derivada fraca. Assim
    {\small
    \[
        \int_\Omega \eta u D^{\alpha}\phi \, dx = (-1)^{|\beta|} \int_\Omega \sum_{\sigma \leqslant \beta} \binom{\beta}{\sigma} D^{\sigma} \eta D^{\beta - \sigma} u D^{\gamma}\phi \, dx = (-1)^{|\beta| + |\gamma|} \int_\Omega \left[\sum_{\sigma \leqslant \beta} \binom{\beta}{\sigma} D^{\gamma}(D^{\sigma} \eta D^{\beta - \sigma} u)\right] \phi \, dx
    \]}
    Além disso, como $|\gamma| = 1$, podemos aplicar a regra de Leibniz novamente, obtendo
    \begin{equation} \label{eq:integral-etau}
        \int_\Omega \eta u D^{\alpha}\phi \, dx = (-1)^{|\alpha|} \int_\Omega \left[\sum_{\sigma \leqslant \beta} \binom{\beta}{\sigma} \left(D^{\rho}\eta D^{\alpha - \rho} u + D^{\sigma} \eta D^{\alpha - \sigma} u\right)\right] \phi \,dx
    \end{equation}
    onde $\rho = \sigma + \gamma$. 
    Note que podemos escrever o somatório dentro da integral da seguinte forma
    \begin{equation*} \label{eq:somatorio}
        \sum_{\gamma \leqslant \rho \leqslant \alpha} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u + \sum_{0 \leqslant\sigma \leqslant \beta} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u
    \end{equation*}
    que ainda pode ser expandido em quatro somatórios
    \begin{equation} \label{eq:somatorio-2}
        \begin{aligned}
            \sum_{\gamma \leqslant \rho \leqslant \beta} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u &+ \sum_{\beta < \rho \leqslant \alpha} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u \\
            &+ \sum_{0 \leqslant \sigma < \beta} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u + \sum_{\gamma \leqslant \sigma \leqslant \beta} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u.
           \end{aligned}
    \end{equation}
    Porem, note que $0 \leqslant \sigma < \gamma$ implica em $\sigma = 0$. Com efeito, $0 \leqslant \sigma$ significa que $0 \leqslant \sigma_i$ para todo $i = 1,\dots,n$ e $\sigma < \gamma$ significa que existe um $i = 1,\dots,n$ tal que $\sigma_i < \gamma_i$. Como $|\gamma| = 1$, suponha sem perda de generalidade que $\gamma = e_1$.
    Dessa forma, para $i = 1$
    \[
        0 \leqslant \sigma_1 < 1
    \]
    como $\sigma_i \in \bN$ segue que $\sigma_1 = 0$. Por outro lado, para $i = 2,\dots,n$
    \[
        0 \leqslant \sigma_i < 0
    \]
    que implica em $\sigma_i = 0$. Portanto $\sigma = 0$.
    Da mesma forma $\beta < \rho \leqslant \alpha$ implica em $\rho =\alpha$.
    Assim, (\ref{eq:somatorio-2}) pode ser escrito da seguinte forma
    \begin{equation} \label{eq:somatorio-3}
        % \binom{\alpha - \gamma}{0}
        \eta D^{\alpha} u + \sum_{\gamma \leqslant \rho \leqslant \beta} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u + \sum_{\gamma \leqslant \sigma \leqslant \beta} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u + 
        % \binom{\alpha - \gamma}{\alpha - \gamma}
        u D^{\alpha}\eta.
    \end{equation}
    Por fim, ao menos de uma mudança de variaveis, escrevemos (\ref{eq:somatorio-3}) como
    \[
        \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u.
    \]
    Pois
    \[
        \binom{\alpha - \gamma}{\sigma} + \binom{\alpha - \gamma}{\sigma - \gamma} = \binom{\alpha}{\sigma}
    \]
    e
    \[
        \binom{\alpha}{0} = 1 = \binom{\alpha}{\alpha}.
    \]
    Sendo assim, voltando para a equação (\ref{eq:integral-etau}) temos que
    \[
        \int_\Omega \eta u D^{\alpha}\phi \, dx = (-1)^{|\alpha|} \int_\Omega \left[\sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u\right] \phi \,dx.
    \]
    Portanto
    \[
        D^\alpha (\eta u) = \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u
    \]
    como queriamos mostrar.
\end{prf}

Com os resultados obtidos, é possível verificar que os espaços de Sobolev $W^{k,p}(\Omega)$ formam um espaço de Banach.

\begin{tbox}
    $(\cW^{k,p}(\Omega), \Vert \cdot \Vert_{\cW^{k,p}(\Omega)})$ com $1 \leqslant p \leqslant \infty$ é um espaço vetorial normado.
\end{tbox}
\begin{prf}
    ~

    ($1 \leqslant p < \infty$)
    \begin{enumerate}[leftmargin=*]
        % \item $\Vert u \Vert_{\cW^{k,p}(\Omega)} = 0 \iff \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = 0 \iff \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = 0 \iff D^\alpha u = 0$ para todo mutli-índice $\alpha$ com $|\alpha| \leqslant k$.
        \item Seja $u \in \cW^{k,p}(\Omega)$. Daí
        \[
            \Vert u \Vert_{\cW^{k,p}(\Omega)} = 0 \iff \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = 0 \iff \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = 0 \iff D^\alpha u = 0
        \]
        para todo multi-índice $\alpha$ com $|\alpha| \leqslant k$.
        Em particular se $\alpha = (0,\dots,0)$, $u = D^\alpha u = 0$.

        Por outro lado, se $u = 0$, $D^\alpha u = 0$ para todo multi-índice $\alpha$. Sendo assim $\Vert u \Vert_{\cW^{k,p}(\Omega)} = 0$.

        \item Seja $\lambda \in \bR$ e $u \in \cW^{k,p}(\Omega)$. Daí
        \[
            \begin{aligned}
                \Vert \lambda u \Vert_{\cW^{k,p}(\Omega)}^p = \sum_{|\alpha| \leqslant k} \Vert D^\alpha (\lambda u) \Vert_{\cL^p(\Omega)}^p &= \sum_{|\alpha| \leqslant k} \Vert \lambda D^\alpha u \Vert_{\cL^p(\Omega)}^p\\ 
                &= |\lambda|^p\sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = |\lambda|^p\Vert u \Vert_{\cW^{k,p}(\Omega)}^p.
            \end{aligned}
        \]
        Portanto $\Vert \lambda u \Vert_{\cW^{k,p}(\Omega)} = \lambda|\Vert u \Vert_{\cW^{k,p}(\Omega)}$.

        \item Sejam $u, v \in \cW^{k,p}(\Omega)$. Daí
        \[
            \Vert u + v \Vert_{\cW^{k,p}(\Omega)} = \left(\sum_{|\alpha| \leqslant k} \Vert D^\alpha u + D^\alpha v \Vert_{\cL^p(\Omega)}^p\right)^{\!\!\frac{1}{p}} \leqslant \left(\sum_{|\alpha| \leqslant k} \left(\Vert D^\alpha u \Vert_{\cL^p(\Omega)} + \Vert D^\alpha v \Vert_{\cL^p(\Omega)}\right)^p \right)^{\!\!\frac{1}{p}}
        \]
        Utilizando a desigualdade de Minkowski em $\ell^p$
        \[
            \left(\sum_{|\alpha| \leqslant k} \left(\Vert D^\alpha u \Vert_{\cL^p(\Omega)} + \Vert D^\alpha v \Vert_{\cL^p(\Omega)}\right)^p \right)^{\!\!\frac{1}{p}} \leqslant \left( \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p \right)^{\!\!\frac{1}{p}} + \left( \sum_{|\alpha| \leqslant k} \Vert D^\alpha v \Vert_{\cL^p(\Omega)}^p \right)^{\!\!\frac{1}{p}}
        \]
        Ou seja,
        \[
            \Vert u + v \Vert_{\cW^{k,p}(\Omega)} \leqslant \Vert u \Vert_{\cW^{k,p}(\Omega)} + \Vert v \Vert_{\cW^{k,p}(\Omega)}.
        \]
    \end{enumerate}
    Portanto, $\Vert \cdot \Vert_{\cW^{k,p}(\Omega)}$ é uma norma em $\cW^{k,p}(\Omega)$ com $1 \leqslant p < \infty$.

    ($p = \infty$)

    \noindent O caso $p = \infty$ é análogo ao caso $1 \leqslant p < \infty$.
\end{prf}

\begin{tbox}
    $(\cW^{k,p}(\Omega), \Vert \cdot \Vert_{\cW^{k,p}(\Omega)})$ com $1 \leqslant p \leqslant \infty$ é completo
\end{tbox}
\begin{prf}
    Seja $(u_n)$ uma sequência de Cauchy em $\cW^{k,p}(\Omega)$ com $1 \leqslant p < \infty$. Isto é, dado $\varepsilon > 0$ existe $n_0 \in \bN$ tal que
    \[
        \Vert u_n - u_m \Vert_{\cW^{k,p}(\Omega)} < \varepsilon
    \]
    para todo $n,m > n_0$.
    Note que
    % \[
    % \begin{aligned}
    %     \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p &\leqslant \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p\\ 
    %     &= \sum_{|\alpha| \leqslant k} \Vert D^\alpha (u_n - u_m) \Vert_{\cL^p(\Omega)}^p = \Vert u_n - u_m \Vert_{\cW^{k,p}(\Omega)}^p < \varepsilon^p
    % \end{aligned}
    % \]
    \[
        \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p \leqslant \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p = \Vert u_n - u_m \Vert_{\cW^{k,p}(\Omega)}^p < \varepsilon^p
    \]
    para todo $n,m > n_0$. Ou seja, $(D^\alpha u_n)$ é uma sequência de Cauchy em $\cL^p(\Omega)$, que é um espaço completo (Teorema \ref{thm:lp-completo}). 
    Dito isso
    \[
        D^\alpha u_n \to u_\alpha \text{ em } \cL^p(\Omega).
    \]
    Em particular, se $\alpha = (0,\dots,0)$ denotamos $D^\alpha u_n$ por $u_n$ e $u_\alpha$ por $u$.
    Por fim, precisamos mostrar que
    \[
        D^\alpha u = u_\alpha.
    \]
    Com efeito, pelo \nameref{thm:teorema-da-convergencia-dominada} (e o teorema no livro do Brezis, ver pág e número) e utlizando a definição de derivada fraca, obtemos
    \[
        \begin{aligned}
            \int_\Omega u D^\alpha \phi \, dx 
            = \int_\Omega \lim u_n D^\alpha \phi 
            = \lim\! \int_\Omega u_n D^\alpha \phi \,dx
            &= \lim\, (-1)^{|\alpha|}\!\int_\Omega  D^\alpha u_n \phi\,dx \\
            &= (-1)^{|\alpha|}\!\int_\Omega \lim D^\alpha u_n \phi \,dx 
            = (-1)^{|\alpha|}\!\int_\Omega u_\alpha \phi \,dx.
        \end{aligned}
    \]
    Portanto $D^\alpha u = u_\alpha$ e consequentemente $u_n \to u$ em $\cW^{k,p}(\Omega)$ com $1 \leqslant p < \infty$.

    Por outro lado, considere $(u_n)$ uma sequência de Cauchy em $\cW^{k,\infty}(\Omega)$. Então, dado $\varepsilon > 0$, existe $n_0 \in \bN$ tal que
    \[
        \Vert u_n - u_m \Vert_{\cW^{k,\infty}(\Omega)} < \varepsilon
    \]
    para todo $n,m > n_0$. Além disso
    \[
        \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^\infty(\Omega)} \leqslant \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^\infty(\Omega)} = \Vert u_n - u_m \Vert_{\cW^{k,\infty}(\Omega)} < \varepsilon
    \]
    para todo $n,m > n_0$. Isto nos diz que $(D^\alpha u_n)$ é uma sequência de Cauchy em $\cL^\infty$ que é um espaço completo (Teorema \ref{thm:linf-completo}). Sendo assim
    \[
        D^{\alpha} u_n \to u_\alpha \text{ em } \cL^\infty(\Omega)
    \]
    De forma análoga ao caso $1 \leqslant p < \infty$, mostramos que $D^\alpha u = u_\alpha$ e portanto $u_n \to u$ em $\cW^{k,\infty}(\Omega)$.
\end{prf}

\section{Aproximações}

Não é ideal ficar voltando o tempo todo à definição de derivadas fracas. Para explorar as propriedades mais profundas dos espaços de Sobolev, precisamos de métodos sistemáticos para aproximar funções nesses espaços por funções mais suaves. A técnica de molificação, que envolve a convolução de uma função com uma molificadora suave e com suporte compacto, oferece essa ferramenta. Esse processo resulta em uma sequência de funções suaves que convergem para a função original nas normas de Sobolev, permitindo a aproximação de funções com regularidade fraca por funções suaves. As molificadoras são essenciais na teoria dos espaços de Sobolev, possibilitando o estudo de soluções fracas para equações diferenciais parciais e estabelecendo resultados importantes de densidade.

Um exemplo de função molificadora é
\begin{equation} \label{eq:molificador-friedrich}
    \eta(x) =
    \left\{
        \begin{array}{lr}
            c \exp \left( \frac{1}{|x|^2 - 1} \right) & \text{se }\; |x| < 1\\
            0 & \text{se }\; |x| \geqslant 1
        \end{array}
    \right.
\end{equation}
conhecida como molificador de Friedrich, onde $c > 0$ é uma constante tal que
\[
    \int_{\bR^n} \eta \,dx = 1
\]
De forma geral, uma função molificadora é uma função de classe $\cC^\infty$ com suporte compacto satifazendo. 
\[
    \dots
\]
Dada uma função molificadora, para cada $\varepsilon > 0$ definimos
\begin{equation} \label{eq:eta-epsilon}
    \eta_\varepsilon(x) = \frac{1}{\varepsilon^n} \eta\left( \frac{x}{\varepsilon} \right)
\end{equation}
essa função $\eta_\varepsilon$ é de classe $\cC^\infty$, $\supp \eta_\varepsilon \subseteq B[0,\varepsilon]$ e
\[
    \int_{\bR^n} \eta_\varepsilon \,dx = 1.
\]
Essa função será utilizada para realizar as convoluções que aproximam as funções em $\cW^{k,p}(\Omega)$. Se $u$ é uma função locamente integrável, definimos a molificação de $u$ por $u^\varepsilon = \eta_\varepsilon * u$, isto é
\[
    u^\varepsilon(x) = \int_\Omega \eta_\varepsilon(x-y) u(y) = \int_{B[0,\varepsilon]} \eta_\varepsilon(y) u(x-y) \,dy
\]

O primeiro teorema que vamos estudar demonstra algumas propiedades importantes sobre essas aproximações.

\begin{tbox}[Aproximação local por funções suaves]
    Seja $u \in \cW^{k,p}(\Omega)$ com $1 \leqslant p < \infty$ e defina
    \[
        u^{\varepsilon} = \eta_{\varepsilon} * u \;\text{ em } \Omega_\varepsilon
    \]
    onde
    \[
        \Omega_\varepsilon = \{ x \in \Omega \,; d(x,\partial\Omega) > \varepsilon\}.
    \]
    Então
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $u^\varepsilon \in \cC^{\infty}(\Omega_\varepsilon)$ para cada $\varepsilon > 0$
        \item $u^\varepsilon \to u$ em $\cW^{k,p}_{\mathrm{loc}}(\Omega)$ quando $\varepsilon \to 0$
    \end{enumerate}
\end{tbox}
\begin{prf}
    ~

    % \textbf{(a)} Sejam $x \in \Omega_\varepsilon$, $i = 1,\dots,n$ e $h$ de forma que $x + he_i \in \Omega_\varepsilon$. Daí
    % \[
    %     \begin{aligned}
    %         \frac{u^\varepsilon(x + he_i) - u^\varepsilon(x)}{h} 
    %         &= \frac{1}{\varepsilon^n} \int_\Omega \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] u(y)\\
    %         &= \frac{1}{\varepsilon^n} \int_V \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] u(y)\\
    %     \end{aligned}
    % \]
    % para algum aberto $V \Subset \Omega$. Note que
    % \[
    %     \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] \to \frac{1}{\varepsilon}\dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right)
    % \]
    % quando $h \to 0$. Isto é
    % \[
    %     \dfrac{\partial u^\varepsilon}{\partial x_i} = \int_\Omega \frac{1}{\varepsilon^{n+1}} \dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right) u(y) \,dy.
    % \]
    % Por outro lado, seja $g(x) = \frac{x -y }{\varepsilon} $, daí
    % \[
    %     \dfrac{\partial \eta_\varepsilon}{\partial x_i} (x-y) = \frac{1}{\varepsilon^n}\dfrac{\partial \eta}{\partial x}\left( \frac{x - y}{\varepsilon} \right) = \frac{1}{\varepsilon^n} \sum_{k =1}^n \dfrac{\partial \eta}{\partial x_k}\left( \frac{x - y}{\varepsilon} \right) \dfrac{\partial g_k}{\partial x_i}(x) = \frac{1}{\varepsilon^{n+1}} \dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right).
    % \]
    % Portanto
    % \[
    %     \dfrac{\partial u^\varepsilon}{\partial x_i} = \int_\Omega \dfrac{\partial \eta_\varepsilon}{\partial x_i} (x-y) u(y) \,dy.
    % \]
    % Indutivamente, mostramos que $D^\alpha u^\varepsilon$ existe e
    % \[
    %     D^\alpha u^\varepsilon = D^\alpha\eta_\varepsilon * u.
    % \]
    % O fato de $u^\varepsilon$ ser de classe $\cC^\infty$ segue do fato de $\eta_\varepsilon$ ser de classe $\cC^\infty$ por definição.

    \textbf{(a)} Seja $g(x) = (x-y)/\varepsilon $, daí, pela regra da cadeia
    \[
        \dfrac{\partial \eta_\varepsilon}{\partial x_i} (x-y) = \frac{1}{\varepsilon^n}\dfrac{\partial \eta}{\partial x}\left( \frac{x - y}{\varepsilon} \right) = \frac{1}{\varepsilon^n} \sum_{k =1}^n \dfrac{\partial \eta}{\partial x_k}\left( \frac{x - y}{\varepsilon} \right) \dfrac{\partial g_k}{\partial x_i}(x) = \frac{1}{\varepsilon^{n+1}} \dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right).
    \]
    Por outro lado, sejam $x \in \Omega_\varepsilon$, $i = 1,\dots,n$ e $h$ de forma que $x + he_i \in \Omega_\varepsilon$. Daí
    \[
        \begin{aligned}
            \frac{u^\varepsilon(x + he_i) - u^\varepsilon(x)}{h} 
            &= \frac{1}{\varepsilon^n} \int_\Omega \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] u(y) \,dy\\
            % &= \frac{1}{\varepsilon^n} \int_V \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] u(y) \,dy\\
        \end{aligned}
    \]
    % para algum aberto $V \Subset \Omega$. 
    Note que, novamente utilizando a regra da cadeia
    \[
        \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] \to \frac{1}{\varepsilon}\dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right)
    \]
    quando $h \to 0$. Isto é
    \[
        \dfrac{\partial u^\varepsilon}{\partial x_i} = \int_\Omega \frac{1}{\varepsilon^{n+1}} \dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right) u(y) \,dy = \int_\Omega \dfrac{\partial \eta_\varepsilon}{\partial x_i} (x-y) u(y) \,dy.
    \]
    Indutivamente, mostramos que $D^\alpha u^\varepsilon$ existe e
    \[
        D^\alpha u^\varepsilon = D^\alpha\eta_\varepsilon * u.
    \]
    O fato de $u^\varepsilon$ ser de classe $\cC^\infty$ segue do fato de $\eta_\varepsilon$ ser de classe $\cC^\infty$ por definição e $u$ ser integrável.

    \textbf{(b)} Afirmamos que a $\alpha$-ésima derivada parcial de $u^\varepsilon$ no sentido usual é igual a convulução de $\eta_\varepsilon$ com a $\alpha$-ésima derivada parcial fraca de $u$ para todo $\alpha$ com $|\alpha| \leqslant k$. 
    Isto é
    \[
        D^\alpha u^\varepsilon = \eta_\varepsilon * D^\alpha u.
    \]
    Com efeito, no item \textbf{(a)} vimos que $D^\alpha u^\varepsilon = D^\alpha \eta_\varepsilon * u$. Primeiramente, se $g(x) = x - y$, temos
    \[
        D^{e_i}_x \eta_\varepsilon (x -y) = \dfrac{\partial}{\partial x_i} (\eta_\varepsilon \circ g)(x) = \sum_{k=1}^n \dfrac{\partial \eta_\varepsilon}{\partial x_k} (x - y) \dfrac{\partial g_k}{\partial x_i}(x) = \dfrac{\partial \eta_\varepsilon}{\partial x_i}(x-y).
    \]
    Por outro lado, se $h(y) = x - y$, obtemos
    \[
        D^{e_i}_y \eta_\varepsilon (x-y) = \dfrac{\partial}{\partial x_i} (\eta_\varepsilon \circ h)(x) = \sum_{k=1}^n \dfrac{\partial \eta_\varepsilon}{\partial y_k} (x - y) \dfrac{\partial h_k}{\partial y_i}(x) = -\dfrac{\partial \eta_\varepsilon}{\partial y_i}(x-y).
    \]
    Dessa forma, ao menos de uma mudança de notação
    \[
        D^{e_i}_x \eta_\varepsilon (x-y) = -D^{e_i}_y \eta_\varepsilon (x-y).
    \]
    Repetindo esse cálculo $|\alpha|$ vezes, obtemos
    \[
        D^\alpha_x \eta_\varepsilon (x-y) = (-1)^{|\alpha|} D^\alpha_y \eta_\varepsilon (x-y).
    \]
    Dessa forma
    \[
        D^{\alpha} u^\varepsilon (x) = \int_\Omega D^\alpha_x \eta_\varepsilon (x-y) u(y) \,dy = (-1)^{|\alpha|} \int_\Omega D^{\alpha}_y \eta_\varepsilon (x-y) u(y) \,dy.
    \]
    Fixando $x \in \Omega_\varepsilon$, a função $\phi_x(y) =\eta_\varepsilon(x-y)$ é suave e tem suporte compacto em $\Omega$.
    Aplicando a definição de derivada fraca com função de teste $\eta_\varepsilon(x-y)$, segue que
    \[
        (-1)^{|\alpha|} \int_\Omega D^{\alpha}_y \eta_\varepsilon (x-y) u(y) \,dy. = (-1)^{|\alpha| + |\alpha|}  \int_\Omega \eta_\varepsilon(x-y) D^{\alpha} u(y) \,dy
    \]
    Portanto
    \[
        D^\alpha u^\varepsilon = \eta_\varepsilon * D^\alpha u.
    \]

    Além disso, afirmamos que dados abertos $V, W$ tais que $V \Subset W \Subset \Omega$, uma função $v \in \cL^P_\loc(\Omega)$ e $\varepsilon > 0$ suficientemente pequeno
    \[
        \Vert v^\varepsilon \Vert_{\cL^p(V)} \leqslant \Vert v \Vert_{\cL^p(W)}.
    \]
    Com efeito, note que se $1 < p < \infty$ e $x \in V$
    \[
        |v^\varepsilon(x)| = \left| \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) v (y) \,dy \right| \leqslant \int_{B[x,\varepsilon]} \left| \eta_\varepsilon^{1-\frac{1}{p}}(x-y) \eta_\varepsilon^{\frac{1}{p}}(x-y) v(y) \right| \,dy.
    \]
    Utilizando a desigualdade de Hölder na ultima integral, obtemos
    \[
        \int_{B[x,\varepsilon]} \left| \eta_\varepsilon^{1-\frac{1}{p}}(x-y) \eta_\varepsilon^{\frac{1}{p}}(x-y) v(y) \right|dy \leqslant \left( \int_{B[x,\varepsilon]} \eta_\varepsilon (x-y) \,dy\right)^{\!1-\frac{1}{p}} \left( \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) |v(y)|^p \right)^{\frac{1}{p}}
    \]
    Como $\int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) \,dy = 1$ e utilizando o Teorema de Fubini, segue que
    \[
        \int_V |v^\varepsilon(x)|^p \,dx = \int_V \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) |v(y)| \,dy \,dx \leqslant \int_W |v(y)|^p \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) \,dx \,dy.
    \]
    Isto é
    \[
        \Vert v^\varepsilon \Vert_{\cL^p(V)} \leqslant \Vert v \Vert_{\cL^p(W)}.
    \]

    Por fim, seja $V \Subset \Omega$ um aberto. Afirmamos que
    \[
        D ^\alpha u^\varepsilon \to D^\alpha u \text{ em } \cL^p(V)
    \]
    quando $\varepsilon \to 0$, para todo $\alpha$ com $|\alpha| \leqslant k$.
    De fato, seja $W$ um aberto de forma que $V \Subset W \Subset \Omega$, $\delta > 0$, utilizando a afirmação anterior com $v ^\varepsilon = D^\alpha u^\varepsilon$ e $v = D^\alpha u$ escolhendo $w \in \cC(W)$ tal que
    \[
        \Vert D^\alpha u - w \Vert_{\cL^p(W)} < \delta.
    \]
    Temos
    \[
        \begin{aligned}
            \Vert D^\alpha u^\varepsilon - D^\alpha u \Vert_{\cL^p(V)} &\leqslant \Vert D^\alpha u^\varepsilon - w^\varepsilon \Vert_{\cL^p(V)} + \Vert w^\varepsilon - w \Vert_{\cL^p(V)} + \Vert w - D^\alpha u \Vert_{\cL^p(V)}\\
            &\leqslant \Vert D^\alpha u - w \Vert_{\cL^p(W)} + \Vert w^\varepsilon - w \Vert_{\cL^p(V)} + \Vert w - D^\alpha u \Vert_{\cL^p(W)}\\
            &\leqslant 2 \Vert D^\alpha u - w \Vert_{\cL^p(W)} + \Vert w^\varepsilon - w \Vert_{\cL^p(V)}\\
            &\leqslant 2\delta + \Vert w^\varepsilon - w \Vert_{\cL^p(V)}
        \end{aligned}
    \]
    Como $w \in \cC(W)$, então $w^\varepsilon \to w$ uniformemente em $V$. 
    Portanto $D^\alpha u^\varepsilon \to D^\alpha u$ em $\cL^p(V)$.
    Dessa forma
    \[
        \Vert u^\varepsilon - u \Vert^p_{\cW^{k,p}(V)} = \sum_{|\alpha| \leqslant k} \Vert D^\alpha u^\varepsilon - D^\alpha u \Vert^p_{\cL^p(V)} \to 0 
    \]
    quando $\varepsilon \to 0$. Portanto
    \[
        u^\varepsilon \to u \text{ em } \cW^{k,p}_\loc(\Omega)
    \]
    como queriamos mostrar
\end{prf}

\begin{ex}
    A função $u(x) = |x|$ definida no intervalo aberto $\Omega = (-1,1) \subseteq \bR$ é um exemplo clássico de função que não é diferenciável. É fácil verificar que $u \in \cW^{1,p}(\Omega)$. Com efeito, dada uma função $\phi \in \cC^\infty_c(\Omega)$ temos que
    \[
        \int_\Omega u \phi' \,dx = \int_{\text{-}1}^1 u \phi' \,dx = \int_{\text{-}1}^0 u \phi' \,dx + \int_0^1 u \phi' \,dx.
    \]
    Utlizando integração por partes, obtemos
    \[
        \int_\Omega u \phi'\,dx = \bigg[ x\phi \bigg]_{\text{-}1}^0 - \int_{\text{-}1}^0 \phi \,dx + \bigg[ -x \phi \bigg]_0^1 - \int_0^1 -\phi \,dx.
    \]
    Como $\phi$ tem suporte compacto em $\Omega$, então
    \[
       \bigg[ x\phi \bigg]_{\text{-}1}^0 + \bigg[ -x \phi \bigg]_0^1 = 0
    \]
    Sendo assim
    \[
        \int_\Omega u \phi'\,dx = - \int_{\text{-}1}^0 \phi \,dx - \int_0^1 -\phi \,dx = -\int_\Omega \sgn(x)\phi \,dx.
    \]
    Portanto
    \[
        u'= \sgn(x)
    \]
    no sentido fraco, onde
    \[
        \sgn(x) = 
        \left\{ 
            \begin{array}{rr}
                1 & \text{se }\; x > 0\\
                0 & \text{se }\; x = 0\\
                -1& \text{se }\; x < 0
            \end{array}
        \right.
    \]
    Além disso
    \[
        \int_\Omega |\sgn(x)|^p \,dx = \int_{\text{-}1}^1 1^p \,dx = \bigg[ x \bigg]^1_{\text{-}1} = 2 < \infty
    \]
    Assim $u'\in \cL^p(\Omega)$ e portanto $u \in \cW^{1,p}(\Omega)$ para para $1 \leqslant p < \infty$.
    Vamos utiizar a convolução para encontrar uma aproximação suave de $u$. 
    Seja $\eta : \bR \to \bR$ dada por
    \[
        \eta(x) = \left\{ 
            \begin{array}{lr}
                c \exp\left(\frac{1}{x^2 - 1} \right) & \text{se }\; |x| \leqslant 1\\
                0 & \text{se }\; |x| > 1
            \end{array}
        \right.
    \]
    onde $c$ é determinado de forma que
    \[
        \int_{\bR} \eta = 1
    \]
    isto é
    \[
        c = \left( \int_\bR \exp \left(\frac{1}{x^2 - 1} \right) \, dx\right)^{-1}.
    \]
    Infelizmente, a função $\eta$ não tem primitiva que pode ser expressa por meio de funções elementares, então é necessário utilizar um método numérico, ou expansão em Taylor.
    Daí definimos a função molificadora $\eta_\varepsilon : \bR \to \bR$ por
    \[
        \eta_\varepsilon(x) = \frac{1}{\varepsilon} \eta\left( \frac{x}{\varepsilon} \right).
    \]
    Note que
    \[
        \int_\bR \eta_\varepsilon \, dx = 1 \;\text{ e }\; \supp \eta = [-\varepsilon,\varepsilon].
    \]
    Portanto, podemos utilizar essa função para aproximar $u$. Com efeito
    \[
        u^\varepsilon(x) = \int_{[-\varepsilon,\varepsilon]} \eta_\varepsilon(x) u(x-y) \,dy
    \]
    A Figura \ref{fig:convolucao} foi feita utilizando um método numérico para resolver essa integral para diferentes valores de $\varepsilon$ 

    \begin{figure}
        \centering
        \input{mollifiers/abs(x)-mollifiers.tex}
        \caption{Aproximações suaves da função $|x|$ (em preto) por meio da convolução com uma função molificadora $\eta_\varepsilon$ com $\varepsilon = 1, 0.5, 0.25$\\Fonte: Autoral}
        \label{fig:convolucao}
    \end{figure}

    \begin{figure}
        \centering
        \begin{tikzpicture}
            \begin{scope}[shift={(-4,0)}, scale=0.8]
                \draw[black!30] (-4,-4) grid (4,4);
                \draw[thick, black!60, -stealth] (-4,0) to (4,0); 
                \draw[thick, black!60, -stealth] (0,-4) to (0,4); 
                \draw[domain=-0.9999:0.9999, variable=\x, samples=50, smooth, very thick, ProcessBlue!90!black] plot ({\x}, {2.257 * exp(-1 / (1 - (\x * \x)))});
                \draw[very thick, ProcessBlue!90!black] (-1,0) -- (-3,0);
                \draw[very thick, ProcessBlue!90!black] (1,0) -- (3,0);
            \end{scope}

            \begin{scope}[shift={(4,0)}, scale=0.8]
                \draw[black!30] (-4,-4) grid (4,4);
                \draw[thick, black!60, -stealth] (-4,0) to (4,0); 
                \draw[thick, black!60, -stealth] (0,-4) to (0,4); 
                \draw[domain=-0.299:0.299, variable=\x, samples=50, smooth, very thick, ProcessBlue!90!black] plot ({\x}, {(1/0.3) * 2.257 * exp(-1 / (1 - ((\x / 0.3) * (\x / 0.3))))});
                \draw[very thick, ProcessBlue!90!black] (-0.3,0) -- (-3,0);
                \draw[very thick, ProcessBlue!90!black] (0.3,0) -- (3,0);
            \end{scope}
        \end{tikzpicture}
        \caption{Funções $\eta$ e $\eta_{\varepsilon}$ com $\varepsilon = 0.3$\\ Fonte: Autoral}
    \end{figure}
\end{ex}

\obs (converge para a função delta de Dirac)

\begin{ex}
    Seja $\Omega = (-1,1) \times (-1,1) \subseteq \bR^2$. A função $u : \Omega \to \bR$ dada por
    \[
        u(x_1,x_2) = |x_1|^{\frac{1}{2}} + |x_2|^{\frac{1}{2}}
    \]
    não possui derivada no sentido usual pelo fato de $|\,\cdot\,|$ não ser diferenciável.
    Por outro lado, $u$ possui derivadas parciais fracas em $\cL^p(\Omega)$ quando $0 < p < 2$ dada por
    \[
        D^{e_i}u(x_1,x_2) = \frac{1}{2}\sgn(x_i) |x_i|^{-\frac{1}{2}}
    \]
    Com efeito, vamos calcular a derivada parcial fraca em relação a $i$-ésima coordenada. Utilizando integração por partes obtemos
    \[
        \int_\Omega u D^{e_i} \phi = \int_{\partial\Omega} u \phi \nu^i \,ds - \int_\Omega \phi D^{e_i}u \,dx
    \]
    onde $\phi \in \cC^\infty_c(\Omega)$.
    Para calcular $D^{e_i} u$ precisamos dividir o domínio $\Omega$ em $\Omega_1$, $\Omega_2$, $\Omega_3$ e $\Omega_4$, onde $\Omega_i$ é a restrição ao $i$-ésimo quadrante.
    Note que em $\Omega_1 = (0,1) \times (0,1)$, $u(x_1,x_2) = x_1^{\frac{1}{2}} + x_2^{\frac{1}{2}}$. Logo, nesse conjunto $D^{e_i} u$ existe no sentido usual e é dada por
    \[
        D^{e_i} u = \frac{1}{2} x_i^{-\frac{1}{2}}.
    \]
    De forma análoga
    \[
        \begin{array}{ll}
            D^{e_i} u(x_1,x_2) = \frac{1}{2} (-x_i)^{-\frac{1}{2}} &\text{ em } \Omega_2 \text{ e } \Omega_3 \\
            D^{e_i} u(x_1,x_2) = \frac{1}{2} x_i^{-\frac{1}{2}} &\text{ em } \Omega_4.
        \end{array}
    \]
    Dito isso
    \[
        \int_\Omega \phi D^{e_i}u \,dx = \int_{\Omega_1}  \frac{1}{2} x_i^{-\frac{1}{2}}\phi \,dx + \int_{\Omega_2} \frac{1}{2} (-x_i)^{-\frac{1}{2}} \phi \,dx + \int_{\Omega_3} \frac{1}{2} (-x_i)^{-\frac{1}{2}} \phi \,dx + \int_{\Omega_4} \frac{1}{2} x_i^{-\frac{1}{2}} \phi \,dx
    \]
    que podemos escrever como
    \[
        \int_\Omega \phi D^{e_i} u \,dx = \int_{\Omega_1 \cup \Omega_4}  \frac{1}{2} x_i^{-\frac{1}{2}}\phi \,dx + \int_{\Omega_2 \cup \Omega_3} \frac{1}{2} (-x_i)^{-\frac{1}{2}} \phi \,dx = \int_\Omega \sgn(x_i) |x_i|^{-\frac{1}{2}} \phi \,dx
    \]
    Por fim, como $\phi$ tem suporte compacto em $\Omega$, $\phi$ se anula em $\partial\Omega$.
    Dessa forma
    \[
        \int_{\partial\Omega} u \phi \nu^i \,ds = 0.
    \]
    Portanto
    \[
        \int_\Omega  u D^{e_i} \phi \,dx = - \int_\Omega \sgn(x_i) |x_i|^{-\frac{1}{2}} \phi \,dx.
    \]
    Isto é
    \[
        D^{e_i} u(x_1,x_2) = \sgn(x_i) |x_i|^{-\frac{1}{2}} \,dx
    \]
    como queriamos mostrar.
    Além disso
    \[
        \int_\Omega |D^{e_i} (x_1,x_2)|^p \, dx = \int_{\text{-}1}^1 \int_{\text{-}1}^1 \left| \frac{1}{2} \sgn(x_i) |x_i|^{-\frac{1}{2}} \right|^p \, dx_i dx_j = \frac{1}{2^p}\int_{\text{-}1}^1 \int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i dx_j.
    \]
    Utilizando o Teorema de Fubini
    {\small
    \[
        \frac{1}{2^p}\int_{\text{-}1}^1\int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i dx_j = \frac{1}{2^p}\int_{\text{-}1}^1 dx_j \int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i = \frac{1}{2^{p-1}} \int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i.
    \]}
    Daí, precisamos ver para quais valores de $p$ essa integral é finita, sendo assim
    \[
        \frac{1}{2^{p-1}} \int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i = \frac{1}{2^{p-2}}\int_0^1 x_i^{\frac{p}{2}+1} \,dx = \frac{1}{2^{p-2}} \left[ -\frac{1^{-\frac{p}{2}+1} - 0^{-\frac{p}{2}+1}}{\tfrac{p}{2} - 1} \right]
    \]
    $0^{-\frac{p}{2} + 1} < \infty$ quando $p < 2$. Portanto $u \in \cW^{1,p}(\Omega)$ desde que $0 < p < 2$.

    Agora defina $\eta: \bR^2 \to \bR$ por
    \[
        \eta(x) = 
        \left\{ 
            \begin{array}{lr}
                c \exp\left(\frac{1}{|x|^2 - 1} \right) & \text{se } |x| < 1\\
                0 & \text{se } |x| \geqslant 1
            \end{array}
        \right.
    \]
    (ver Figura \ref{fig:eta-R2}) e $\eta_\varepsilon$ da mesma forma que foi feita no exemplo anterior. Novamente utilizaremos a convolução para encontrar uma aproximação suave para $u$.
    \[
        u^{\varepsilon}(x_1,x_2) = \int_\Omega \eta(x_1,x_2) u(x_1 - y_1, x_2 - y_2) \,dy
    \]

    Utilizando um metodo numérico para integrais duplas, podemos encontrar uma solução aproximada para $u^\varepsilon$.
    A figura \ref{fig:aproximacao-suave-R2} mostra o gráfico de $u$, onde é possível ver os pontos onde a função não é diferenciável, e a sua aproximação suave $u^\varepsilon$.

    \begin{figure}
        \centering
        \includegraphics[width=0.4\textwidth]{2η.pdf}
        \hspace{10mm}
        \includegraphics[width=0.4\textwidth]{2ηε.pdf}
        \caption{$\eta$ e $\eta_\varepsilon$ com $\varepsilon = 0.5$}
        \label{fig:eta-R2}
    \end{figure}

    \begin{figure}
        \centering
        \includegraphics[width=0.4\textwidth]{u.pdf}
        \hspace{10mm}
        \includegraphics[width=0.4\textwidth]{uε.pdf}
        \caption{À esquerda, a função $u(x_1,x_2) = |x_1|^{\frac{1}{2}} + |x_2|^{\frac{1}{2}}$ e à direita sua aproximação\\suave $u^\varepsilon$ com $\varepsilon = 0.5$\\Fonte: Autoral}
        \label{fig:aproximacao-suave-R2}
    \end{figure}
\end{ex}

\begin{tbox}
    Sejam $\Omega$ um aberto limitado e $u \in \cW^{k,p}(\Omega)$ com $1 \leqslant p < \infty$.
    Então existem funções $u_n \in \cC^{\infty}(\Omega) \cap \cW^{k,p}(\Omega)$ tais que
    \[
        u_n \to u \;\text{ em } \cW^{k,p}(\Omega).
    \] 
\end{tbox}
\begin{prf}
    Primeiramente, temos que
    \[
        \Omega = \bigcup_{i=1}^\infty \Omega_i   
    \]
    onde $\Omega_i = \{x \in \Omega \,; d(x, \partial\Omega) > \tfrac{1}{i}\}$. Defina $V_i = \Omega_{i+3} \smallsetminus \overline{\Omega_{i+1}}$.
    Além disso, escolha qualquer aberto $V_0 \Subset \Omega$ de forma que
    \[
        \Omega = \bigcup_{i=1}^\infty V_i
    \]
    e seja $(\phi_i)_{i=0}^\infty$ uma partição da unidade suave subordinada aos abertos $(V_i)_{i=0}^\infty$, isto é
    \[
       0 \leqslant \phi_i \leqslant 1 \text{ com } \phi_i \in \cC^\infty_c(V_i) \;\text{ e }\; \sum_{i=0}^\infty \phi_i = 1 \text{ em } \Omega.
    \]
    Agora escolha uma função $u \in \cW^{k,p}(\Omega)$, vimos que
    \[
        \phi_i u \in \cW^{k,p}(\Omega) \;\text{ e }\; \supp \phi_i u \subseteq V_i.
    \]
    Fixando $\delta > 0$, escolha um $\varepsilon_i > 0$ de forma que $u^i := \eta_{\varepsilon_i} * \phi_i u$ satisfaça
    \[
        \Vert u^i - \phi_i u \Vert_{\cW^{k,p}(\Omega)} \leqslant \frac{\delta}{2^{i+1}} \;\text{ e }\; \supp u^i \subseteq W_i
    \]
    com $W_i = \Omega_{i+4} \smallsetminus \overline{\Omega_{i}} \supseteq V_i$.

    Seja $v = \sum_{i=1}^\infty u^i$ (\dots ta confuso nas notas\dots).
    Como $u = u \sum_{i=1}^\infty \phi_i = \sum_{i=1}^n \phi_i u$ para cada $V \Subset \Omega$ temos
    \[
        \Vert v - u \Vert_{\cW^{k,p}(V)} \leqslant \sum_{i=1}^\infty \Vert u^i - \phi_i u \Vert_{\cW^{k,p}(\Omega)} \leqslant \sum_{i=1}^\infty \frac{\delta}{2^{i+1}} = \delta.
    \]
    Passando o supremo sobre os conjuntos $V \Subset \Omega$ obtemos
    \[
        \Vert v - u \Vert_{\cW^{k,p}(\Omega)} < \delta.
    \]
    Ou seja, podemos definir para cada $\delta > 0$

\end{prf}

\begin{dbox} \label{def:fronteira-ck}
    Seja $\Omega \subseteq \bR^n$ um aberto limitado. 
    Dizemos que $\partial \Omega$ é de classe $\cC^k$ se para cada ponto $x_0 \in \partial \Omega$ existe $r > 0$ e uma função de classe $\cC^k$ $\gamma : \bR^{n-1} \to \bR$ tal que, fazendo uma mudança de coordenadas se necessário, obtemos
    \[
        \Omega \cap B[x_0,r] = \{x \in B[x_0,r] \,; x_n > \gamma(x_1,\dots,x_{n-1})\}
    \]
    De forma análoga, $\partial\Omega$ é de classe $\cC^\infty$ se é de classe $\cC^k$ para todo $k \in \bN$.
\end{dbox}

\begin{tbox}
    Sejam $\Omega$ um aberto limitado com $\partial \Omega$ de classe $\cC^1$ e $u \in \cW^{k,p}(\Omega)$ com $1 \leqslant p < \infty$.
    Então existem funções $u_n \in \cC^\infty(\overline\Omega)$ tais que
    \[
        u_n \to u \;\text{ em } \cW^{k,p}(\Omega).
    \]
\end{tbox}
\begin{prf}
    
\end{prf}

\section{Extensões}

(introdução)

\begin{tbox}
    Sejam $\Omega$ um aberto limitado com $\partial\Omega$ de classe $\cC^1$ e um $\Omega'$ um aberto tal que $\Omega \Subset \Omega'$. Então existe um operador linear limitado $E : \cW^{1,p}(\Omega) \to \cW^{1,p}(\bR ^n)$ tal que para cada $u \in \cW^{k,p}(\Omega)$
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $Eu = u$ qtp em $\Omega$
        \item $\supp Eu \subseteq \Omega'$
        \item $\Vert Eu \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}$, onde a constante $c$ depende apenas de $p$, $\Omega$ e $\Omega'$
    \end{enumerate}
\end{tbox}
\begin{prf}
    Seja $x^0 \in \partial\Omega$ e suponha que $\partial\Omega$ esteja contido no plano $\{x_n = 0\}$ perto de $x^0$.
    Dessa forma, podemos supor que existe uma bola $B = B(x^0, r)$ tal que
    \[
        \begin{aligned}
            B^+ &= B \cap \{x_n \geqslant 0\} \subseteq \overline\Omega\\
            B^- &= B \cap \{x_n \leqslant 0\} \subseteq \bR^n \smallsetminus \Omega.
        \end{aligned}
    \]
    Além disso, suponha inicialmente que $u \in \cC^\infty(\overline\Omega)$ e defina
    \[
        \bar u(x) =
        \left\{ 
            \begin{array}{ll}
                u(x) & \text{se } x\in B^+\\
                -3u(x_1,\dots,x_{n-1}, -x_n) + 4u(x_1,\dots,x_{n-1},\frac{x_n}{2}) & \text{se } x \in B^-
            \end{array}
        \right.
    \]
    que chamamos de reflexão de ordem superior da função $u$ de $B^+$ a $B^-$.
    Afirmamos que $\bar u \in \cC^1(B)$.
    Com efeito, denotando $u^- = \bar u \big|_{B^-}$ e $u^+ = \bar u \big|_{B^+}$, podemos ver que
    \[
        \dfrac{\partial u^-}{\partial x_n} = \dfrac{\partial u^+}{\partial x_n} \;\text{ em }\; \{x_n = 0\}.
    \]
    De fato, pela regra da cadeia
    \[
        \dfrac{\partial u^-}{\partial x_n} = 3 u_{x_n}(x_1,\dots,x_{n-1}, -x_n)  - 2u_{x_n}(x_1,\dots,x_{n-1},\tfrac{x_n}{2})
    \]
    quando $x_n = 0$, obtemos
    \[
        \dfrac{\partial u^-}{\partial x_n} \Bigg|_{\{x_n = 0\}} = 3u_{x_n}(x_1,\dots,x_{n-1},0) - 2u_{x_n}(x_1,\dots,x_{n-1},0) = u_{x_n}(x_1,\dots,x_{n-1},0) = \dfrac{\partial u^+}{\partial x_n} \Bigg|_{\{x_n =0\}}
    \]
    Além disso
    \[
        u^+ = u^- \;\text{ e }\; \dfrac{\partial u^-}{\partial x_i} = \dfrac{\partial u^+}{\partial x_i}
    \]
    ambos em $\{x_n = 0\}$.
    Portanto $D^\alpha u^- = D^\alpha u^+$ em $\{x_n = 0\}$ com $|\alpha| \leqslant 1$. Sendo assim, $u \in \cC^1 (B)$.

    Agora, desejamos mostrar que
    \begin{equation} \label{eq:desigualdade-B-Bmais}
        \Vert \bar u \Vert_{\cW^{1,p}(B)} \leqslant c \Vert u \Vert_{\cW^{1,p}(B^+)}
    \end{equation}
    onde $c$ é uma constante positiva que não depende de $u$.
    De fato
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(B)}^p = \sum_{|\alpha| \leqslant 1} \Vert D^\alpha\bar u \Vert_{\cL^P(B)}^p = \sum_{|\alpha| \leqslant 1} \left[\int_B |D^\alpha \bar u| ^p \,dx\right].
    \]
    Como $B = B^+ \cup B^-$, e denotando $(x_1,\dots,x_{n-1})$ por $x'$ podemos reescrever o ultimo somatório da seguinte forma
    {\small
    \[
        \begin{aligned}
            \sum_{|\alpha| \leqslant 1} \left[\int_B |D^\alpha \bar u| ^p \,dx\right] &= \sum_{|\alpha| \leqslant 1} \left[ \int_{B^+} |D^\alpha u(x)|^p \,dx + \int_{B^-} |4D^\alpha u(x',-\tfrac{x_n}{2}) - 3D^\alpha u(x',-x_n) |^p \,dx \right]\\
            &\leqslant \sum_{|a| \leqslant 1} \left[ \int_{B^+} |D^\alpha u(x)|^p \,dx + 3 \cdot 2^p\int_{B^-} |D^\alpha u(x',-x_n)|^p \,dx + 4 \cdot 2^p\int_{B^-} |D^\alpha u(x',-x_n)|^p \,dx   \right]
        \end{aligned}
    \]}
    Porem, $-x_n, -\tfrac{x_n}{2} \geqslant 0$, então podemos considerar que as integrais em $B^-$ são integrais sobre $B^+$. Dito isso, ao menos de uma mudança de variáveis, obtemos
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(B)}^p = \sum_{|\alpha| \leqslant 1} \left[\int_B |D^\alpha \bar u| ^p \,dx\right] \leqslant c\sum_{|\alpha| \leqslant 1} \left[ \int_{B^+}|D^\alpha u|^p \,dx \right] = c \Vert u \Vert_{\cW^{1,p}(B^+)}^p
    \]
    Portanto
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(B)} \leqslant c \Vert u \Vert_{\cW^{1,p}(B^+)}
    \]

    Por outro lado, se $\partial\Omega$ está necessáriamente contido no plano $\{x_n = 0\}$ perto de $x^0$. Neste caso, existe um homeomorfismo $\Phi$ com inversa $\Psi$ que planifica $\partial \Omega$ perto de $x^0$. Utilizando a função $\gamma$ da Definição \ref{def:fronteira-ck}, definimos o homemorfismo $\Phi$ por
    \[
        \Phi(x) = (x_1,x_2,...,x_{n-1}, x_n - \gamma(x_1,\dots,x_{n-1})).
    \]
    De forma análoga definimos $\Psi$ por
    \[
        \Psi(y) = (y_1,y_2,\dots,y_{n-1},y_n + \gamma(y_1,\dots,y_{n-1})).
    \]
    Dessa forma $\Psi^{-1} = \Phi$. Sendo assim, seja $y = \Phi(x)$ (ou seja $x = \Psi(y)$) e definimos $u'(y) = u(\Psi(y))$, daí como foi feito anteriormente, podemos escolher uma bola $B = B(y_0, r)$ e definimos $\bar u'$ de forma que $\bar u' \in \cC^1(B)$ e
    \begin{equation}
        \Vert \bar u' \Vert_{\cW^{1,p}(B)} \leqslant c \Vert u' \Vert_{\cW^{1,p}(B^+)}.
    \end{equation}
    Seja $W = \Psi(B)$, assim conseguimos obter uma extensão $\bar u$ de $u$ para $W$ com
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(W)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    De fato, para $\bar u (w) = \bar u'(\Phi(w))$, obtemos, utilizando o Teorema de Mudança de Variáveis
    \[
        \Vert D^\alpha \bar u' \Vert_{\cL^p(B)} = \int_B |D^\alpha \bar u'(y)|^p \,dy = \int_B |D^\alpha \bar u (\Psi (y))|^p \,dy = \int_W |D^\alpha \bar u (x)|^p \,dx = \Vert D^\alpha \bar u \Vert_{\cL^p(W)}.
    \]
    Dessa forma, passando o somatório
    \begin{equation} \label{eq:normaBigualnormaW}
        \Vert \bar u' \Vert_{\cW^{1,p}(B)} = \Vert  \bar u \Vert_{\cW^{1,p}(W)}.
    \end{equation}
    Além disso
    \[
        \begin{aligned}
            \Vert D^\alpha u' \Vert_{\cL^p(B^+)} = \int_{B^+} |D^\alpha u'(y) |^p \,dy &= \int_{B^+} |D^\alpha u (\Psi(y))|^p \,dy\\ &= \int_{\Psi(B^+)} |D^\alpha u(x)|^p \,dx \leqslant \int_{\Omega} |D^\alpha u(x)|^p \,dx = \Vert D^\alpha u \Vert_{\cL^p(\Omega)}.
        \end{aligned}
    \]
    Isto significa que
    \begin{equation} \label{eq:normadesigualdadeBmais}
        \Vert u' \Vert_{\cW^{1,p}(B^+)} \leqslant \Vert u \Vert_{\cW^{1,p}(\Omega)}
    \end{equation}
    Portanto, por (\ref{eq:normaBigualnormaW}) e (\ref{eq:normadesigualdadeBmais}) obtemos
    \begin{equation} \label{eq:desigualdadeWO}
        \Vert \bar u \Vert_{\cW^{1,p}(W)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}
    \end{equation}
    como queriamos mostrar.

    Como $\partial\Omega$ é compacto, e $\partial \Omega \subseteq \bigcup_{x \in \partial\Omega} W_x$,
    que é uma cobertura aberta, pois $W_x = \Psi(B(y_0, r))$ (?), e imagem de um conjunto aberto por um homeomorfismo também é aberto.Pelo Teorema de Heine-Borel, existe uma subcobertura finita de $\partial\Omega$,
    sendo assim, existem uma quantidade finita de pontos $x^0_i \in \partial\Omega$, abertos $W_i$ e extensões $\bar u_i$ de $u$ em $W_i$ de forma que $\partial\Omega \subseteq \bigcup_{i=1}^N W_i$
    e considere $W_0 \Subset \Omega$ tal que
    \[
        \Omega \subseteq \bigcup_{i=0}^N W_i.
    \]
    Seja $(\phi_i)_{i=0}^N$ uma partição da unidade suave subordinada aos abertos $(W_i)_{i=0}^N$ e defina
    \[
        \bar u = \sum_{i=0}^N \phi_i \bar u_i
    \]
    onde $\bar u_i$ está associada a $W_i$ e $\bar u_0 = u$. Daí obtemos a desigualdade
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    Com efeito
    \[
        \Vert \bar u \Vert^p_{\cW^{1,p}(\bR^n)} = \sum_{|\alpha| \leqslant 1} \Vert D^\alpha \bar u \Vert^p_{\cL^p(\bR^n)}
        % = \sum_{|\alpha| \leqslant 1} \left\Vert \sum_{i=0}^N D^\alpha(\phi_i \bar u_i) \right\Vert _{\cL^p(\bR^n)}^p 
        \leqslant c\sum_{|\alpha| \leqslant 1} \sum_{n=1}^N \Vert D^\alpha (\phi_i \bar u_i) \Vert_{\cL^p(\bR)}^p
    \]
    onde $c$ é uma constante positiva que depende de $p$. Daí utuliziando a regra de Leibniz para derivada do produto em $\phi_i \bar u_i$ obtemos
    \[
        c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^N \Vert D^\alpha (\phi_i \bar u_i) \Vert_{\cL^p(\bR)}^p \leqslant c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert D^\sigma \phi_i D^{\alpha - \sigma} \bar u_i \Vert_{\cL^p(\bR^n)}^p.
    \]
    Como $\supp D^\sigma \phi_i \subseteq \supp \phi_i \subseteq W_i$, então o suporte de $D^\sigma \phi_i$ também é compacto (pois $W_i$ é limitado), sendo assim $\max |D^\sigma \phi_i|$ existe.
    Portanto
    \[
        c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert D^\sigma \phi_i D^{\alpha - \sigma} \bar u_i \Vert_{\cL^p(\bR^n)}^p \leqslant c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert D^{\alpha - \sigma} \bar u_i \Vert_{\cL^p(W_i)}^p
    \]
    onde agora a constante $c$ também depende de $W_i$. Além disso
    \[
        c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert D^{\alpha - \sigma} \bar u_i \Vert_{\cL^p(W_i)}^p \leqslant c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert \bar u_i \Vert_{\cW^{1,p}(W_i)}^p.
    \]
    Por fim, utilizando (\ref{eq:desigualdadeWO})
    \[
         \Vert \bar u \Vert^p_{\cW^{1,p}(\bR^n)} \leqslant c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert \bar u_i \Vert_{\cW^{1,p}(W_i)}^p \leqslant c\Vert \bar u_i \Vert_{\cW^{1,p}(\Omega)}
    \]
    onde $c$ depende de $W_i$, $p$ e $N$.
    Portanto
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(W)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}
    \]

    Defina $\Omega'$ de forma que $\bigcup_{i=0}^N W_i \subseteq \Omega'$.
    Dessa forma $\supp \bar u \in \Omega'$.
    
    Defina $\tilde E: \cC^\infty(\overline\Omega) \to C^\infty(\bR^n)$ dada por $\bar E u = \bar u$.
    Temos que $\bar E$ é linear,
    \[
        \Vert \bar E u \Vert_{\cW^{1,p}(\bR^n)} = \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    e $\supp \bar E u \subseteq \Omega'$
    Sendo assim definimos $E : \cW^{1,p}(\Omega) \to \cW^{1,p}(\bR^n)$ com $1 \leqslant p < \infty$ por
    \[
        E u = 
        \left\{ 
            \begin{array}{ll}
                \bar u & \text{se } u \in \cC^\infty(\overline \Omega)\\
                \lim \overline {u_k} &\text{se } u \not\in \cC^\infty(\overline\Omega)
            \end{array}
        \right.
    \]
    onde $(u_k)$ é uma sequência de funções em $\cC^\infty(\overline\Omega)$ que converge para $u$, sabemos que essa sequência existe pois mostramos que $\cC^\infty(\overline\Omega)$ é denso em $\cW^{1,p}(\Omega)$.
    Além disso
    \[
        \begin{aligned}
            \Vert Eu - u \Vert_{\cW^{1,p}(\Omega)} &\leqslant \Vert Eu - \overline{u_k} \Vert_{\cW^{1,p}(\Omega)} + \Vert \overline{u_k} - u_k \Vert_{\cW^{1,p}(\Omega)} + \Vert u_k - u\Vert_{\cW^{1,p}(\Omega)}\\
            &\leqslant \Vert Eu - \overline{u_k} \Vert_{\cW^{1,p}(\bR^n)} + \Vert u_k - u \Vert_{\cW^{1,p}(\Omega)} \to 0
        \end{aligned}
    \]
    pois $u_k \to u$.
    Portanto $Eu = u$ qtp em $\Omega$, provando o item \textbf{(a)}.

    Para verificar o ítem \textbf{(b)}, basta ver que por definição $\supp \overline{u_k} \subseteq \Omega'$.
    Dessa forma $\supp Eu \subseteq \Omega'$

    Por fim, para mostrar o item \textbf{(c)}.
    Note que $E$ é um operador limitado, pois
    \[
        \Vert E \Vert = \Vert \bar E \Vert \leqslant c
    \]
    Portanto
    \[
        \Vert Eu \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]

    Para o caso em que $p = \infty$\dots (continuar)
\end{prf}

\section{Traços}

(introdução)

\begin{tbox}
    Seja $\Omega$ um aberto limitado e $\partial\Omega$ de classe $\cC^1$. Então existe um operador linear limitado $T : \cW^{1,p}(\Omega) \to \cL^P(\partial \Omega)$ tal que
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $Tu = u \big|_{\partial \Omega}$ se $u \in \cW^{1,p}(\Omega) \cap \cC(\Omega)$
        \item $\Vert Tu \Vert_{\cL^p(\partial\Omega)} \leqslant c \Vert u \Vert_{W^{1,p}(\Omega)}$ onde $c$ depende apenas de $p$ e $\Omega$.
    \end{enumerate}
\end{tbox}
\begin{prf}
    
\end{prf}

\begin{tbox}[Funções traço zero em $\cW^{1,p}$]
    Seja $\Omega$ um aberto limitado com $\partial \Omega$ de classe $\cC^1$ e $u \in \cW^{1,p}(\Omega)$
    \[
        u \in \cW_0^{1,p}(\Omega) \iff Tu = 0 \text{ em } \partial \Omega
    \]
    onde $\cW_0^{1,p}(\Omega)$ é o fecho de $\cC^{\infty}_c(\Omega)$ em $\cW^{1,p}(\Omega)$.
\end{tbox}
\begin{prf}
    Suponha que $u \in \cW_0^{1,p}(\Omega)$\dots

    Reciprocamente, suponha que $Tu = 0$ em $\partial \Omega$ \dots
\end{prf}

\section{Desigualdades de Sobolev}


%%%%%%%%%%%%%%%%%%%%%%%

% \begin{center}
%     \begin{tikzpicture}
%         \draw[black!30] (-2,0) grid[step=0.5] (2,4);

%         % \draw[thick, ForestGreen] (-1.681,0) -- (-1.60085,0);
%         % \draw[thick, ForestGreen] (-1.60085,0.5) -- (-1.50518,0.5);
%         % \draw[thick, ForestGreen] (-1.50518,1) -- (0.44596,1);
%         % \draw[thick, ForestGreen] (0.44596,0.5) -- (1.31631,0.5);
%         % \draw[thick, ForestGreen] (1.31631,0) -- (1.87474,0);


%         \draw[very thick, ProcessBlue!90!black] plot[domain=-1.683:1.87474, variable=\x, samples=50, smooth] ({\x}, {(-(0.76*\x - 0.65)^4 - (0.76*\x - 0.65)^3 + (0.76*\x - 0.65)^2 - (0.76*\x - 0.65) + 1) * 0.7});
%     \end{tikzpicture}
% \end{center}

\nocite{*}
\printbibliography

\end{document}
