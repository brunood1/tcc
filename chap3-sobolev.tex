\chapter{Espaços de Sobolev} \label{ch:sobolev}

Os espaços de Sobolev desempenham um papel fundamental na análise funcional e nas equações diferenciais parciais, oferecendo uma estrutura adequada para o estudo de problemas envolvendo funções que podem não ser diferenciáveis no sentido clássico. Introduzidos como uma extensão dos conceitos de derivada e integrabilidade, esses espaços permitem trabalhar com soluções generalizadas, chamadas de soluções fracas, ampliando o escopo de problemas que podem ser tratados matematicamente. Neste capítulo, serão apresentados os conceitos básicos dos espaços de Sobolev e suas principais propriedades elementares.

Vale ressaltar que, quando necessário, consideramos que as funções $\Omega \subseteq \bR^n \to \bR$ são definidas de forma que sejam nulas em $\bR^n \setminus \Omega$. 
\section{Preliminares}

Antes de começarmos de fato o estudo dos espaços de Sobolev, precisamos de algumas definições que serão usadas extensivamente nesse capítulo.

\begin{dbox} \label{def:suporte}
    Seja $\varphi : \Omega \subseteq \bR ^n \to \bR$ uma função qualquer. Definimos o suporte de $\varphi$ por
    \[
        \supp \varphi = \overline{\{x \in \Omega \,; \varphi(x) \neq 0\}}.
    \]
    Além disso, se $\supp\varphi$ é compacto, dizemos que $\varphi$ tem suporte compacto.
\end{dbox}

Note que $\{x \in \Omega \,; \varphi(x) \neq 0\} \subseteq \supp \varphi$; então\footnotemark, $(\supp \varphi)^\cC \subseteq \{x \in \Omega \,; \varphi(x) = 0\}$. Ou seja, se $x \not\in \supp \varphi$, então $\varphi(x) = 0$.
Por outro lado, $\supp \varphi \subseteq \Omega$, então, $\Omega^\cC \subseteq (\supp \varphi)^\cC$. \footnotetext{Utilizamos a notação $X^\cC$ para o complementar do conjunto $X$.}
Se $\Omega$ é aberto, então $\partial \Omega \subseteq \Omega^\cC$.
Portanto, se $\Omega$ é aberto, $\varphi$ se anula em $\partial\Omega$, já que
\[
    \partial \Omega \subseteq \Omega^\cC \subseteq (\supp \varphi)^\cC \subseteq \{x \in \Omega \,; \varphi(x) = 0\}.
\]

\begin{dbox}
    Seja $\Omega$ um aberto de $\bR^n$. O espaço $\cC^k(\Omega)$ é composto por todas funções $f : \Omega \to \bR$ contínuas em que suas derivadas parciais de ordem menor ou igual a $k$ também são contínuas.
    Se $f \in \cC^k(\Omega)$, dizemos que $f$ é de classe $\cC^k$.

    O conjunto das funções infinitamente diferenciáveis é definido por
    \[
        \cC^\infty(\Omega) = \bigcap_{k=0}^\infty \cC^k(\Omega).
    \]
\end{dbox}

A definição abaixo será amplamente utilizada nesse capítulo.

\begin{dbox}
    O conjunto das funções contínuas com suporte compacto em $\Omega$ é definido por
    \[
        \cC_c(\Omega) = \{f : \Omega \to \bR \text{ contínua} \,; \supp f \text{ é compacto}\}.
    \]
    Além disso, definimos
    \[
        \cC^k_c(\Omega) = \cC_c(\Omega) \cap \cC^k(\Omega),
    \]
    que é o conjunto das funções $f : \Omega \to \bR$ de classe $\cC^k$ com suporte compacto.
\end{dbox}

Nesse texto, quanto não estiver explicito o contrário, $\Omega \subseteq \bR^n$

\begin{dbox}[Espaços $\cL^p$ e $\cL^\infty$]
    O espaço $\cL^p = \cL^p(\Omega)$, com $1 \leqslant p < \infty$, é composto pelas funções $f : \bR^n \to \bR$, tais que
    \[
        \Vert f \Vert_{\cL^p(\Omega)} = \int_\Omega |f|^p \, dx < \infty.
    \]
    O espaço $\cL^\infty = \cL^\infty(\Omega)$ é composto pelas funções $f : \bR^n \to \bR$ mensuráveis e limitadas em quase toda parte em $\Omega$, e definimos sua norma por
    \[
        \Vert f \Vert_{\cL^\infty(\Omega)} = \mathrm{ess\,sup} \{|f(x)|; x \in \Omega\} =\inf \{M \geqslant 0 \,; |f(x)| \leqslant M \text{ qtp em } \Omega\}.
    \]
\end{dbox}

\begin{dbox}
    O conjunto das funções $f \in \cL^p(\Omega)$ localmente somáveis, isto é, integráveis em todo conjunto compacto de $\Omega$ é denotado por $\cL^p_{\mathrm{loc}}(\Omega)$.
\end{dbox}

Os resultados abaixos são de extrema importância no estudo de espaços de Sobolev e podem ser encontrados, em sua maioria, em um curso introdutório de medida e integração de Lebesgue (ver \cite{axler-measure.theory,bartle-measure.theory,folland-real.analysis}).

\begin{tbox}[Teorema da Convergência Dominada] \label{thm:teorema-da-convergencia-dominada}
    Seja $(f_n)$ uma sequência de funções integráveis que converge em quase toda parte para a função mensurável $f$.
    Se existe uma função integrável $g$ tal que $|f_n| \leqslant g$ em quase toda parte, para todo $n \in \bN$, então $f$ é integrável e
    \[
        \int_\Omega f \,d\mu = \lim \int_\Omega f_n \,d\mu.
    \]
\end{tbox}
\begin{prf}
    Ver \cite{bartle-measure.theory}, p.p. 44.
\end{prf}

\begin{tbox} \label{thm:lp-completo-pre}
    O espaço $(\cL^p(\Omega), \Vert \cdot \Vert_{\cL^p(\Omega)})$, com $1 \leqslant p \leqslant \infty$, é um espaço de Banach.\footnotemark
\end{tbox}
\begin{prf}
    Ver \cite{bartle-measure.theory}, p.p. 59 ($1 \leqslant p < \infty$) e p.p. 61 ($p = \infty$).
\end{prf}

\footnotetext{Espaço vetorial normado completo, i.e., toda sequência de Cauchy é convergente.}

\begin{tbox}[Desigualdade de Hölder] \label{thm:pre-desigualdade-de-holder}
    Sejam $f \in \cL^p(\Omega)$ e $g \in \cL^q(\Omega)$, onde $1 \leqslant p \leqslant \infty$, e $q \in \bR$ é tal que $p$ e $q$ são expoentes conjugados\footnotemark.
    Então, $fg \in \cL^1(\Omega)$ e
    \[
        \Vert fg \Vert_{\cL^1(\Omega)} \leqslant \Vert f \Vert_{\cL^p(\Omega)} \Vert g \Vert_{\cL^q(\Omega)}.
    \]
\end{tbox}
\begin{prf}
    Ver \cite{bartle-measure.theory}, p.p. 56.
\end{prf}

\footnotetext{$p$ e $q$ são ditos expoentes conjugados se $\frac{1}{p} + \frac{1}{q} = 1$.}

Uma generalização desse resultado será apresentada abaixo.

\begin{tbox}[Desigualdade de Hölder Generalizada] \label{thm:pre-desigualdade-de-holder-gen}
    Sejam $0 < p_1,\dots,p_N \leqslant \infty$ tais que $\frac{1}{p} = \frac{1}{p_1} + \cdots + \frac{1}{p_N}$ e $f = f_1 f_2 \cdots f_N$ onde $f_j \in \cL^{p_j}(\Omega)$, para todo $j = 1,\dots,N$. 
    Então, $f \in \cL^p$ e 
    \[
        \Vert f \Vert_p \leqslant \Vert f_1 \Vert_{\cL^{p_1}(\Omega)} \cdots \Vert f_N \Vert_{\cL^{p_N}(\Omega)}.
    \] 
\end{tbox}
\begin{prf}
    Ver \cite{adams-sobolev}, p.p. 25.
\end{prf}

\begin{tbox}[Desigualdade de Young] \label{thm:desigualdade-de-young}
    Sejm $A,B \geqslant 0$, $1 \leqslant p < \infty$ e $q \in \bR$ tal que $p$ e $q$ são expoentes conjuntados. Então
    \[
        AB \leqslant \frac{A^p}{p} + \frac{B^q}{q},
    \]
    onde a igualdade é válida se, e somente se, $A^p = B^q$.
\end{tbox}
\begin{prf}
    Ver \cite{bartle-measure.theory}, p.p. 56.
\end{prf}

\begin{tbox}[Desigualdade de Young para convluções] \label{thm:desigualde-de-young-para-convolucoes}
    Sejam $f \in \cL^p(\Omega)$ e $g \in \cL^q(\Omega)$, com $1 \leqslant p,q,r \leqslant \infty$ e
    \[
        \frac{1}{p} + \frac{1}{q} = \frac{1}{r} +1.
    \]
    Então
    \[
        \Vert f * g \Vert_{\cL^r(\Omega)} \leqslant \Vert f \Vert_{\cL^p(\Omega)} \Vert g \Vert_{\cL^q(\Omega)}.
    \]
\end{tbox}
\begin{prf}
    Ver \cite{brezis-functional.analysis}, p.p. 104.
\end{prf}

\begin{tbox} \label{thm:omega-limitado}
    Se $\Omega$ é limitado e, $1 \leqslant p < q \leqslant \infty$.
    Então, $\cL^q(\Omega) \subseteq \cL^p(\Omega)$ e 
    \[
        \Vert f \Vert_{\cL^p(\Omega)} \leqslant c \Vert f \Vert_{\cL^q(\Omega)},
    \]
    para toda $f \in \cL^q(\Omega)$ e $c > 0$ é uma constante que depende de $p$, $q$ e $\Omega$.
    Além disso, se $f \in \cL^\infty(\Omega)$, tem-se que
    \[
        \Vert f \Vert_{\cL^p(\Omega)} \to \Vert f  \Vert_{\cL^\infty(\Omega)},
    \]
    quando $p \to \infty$.
\end{tbox}
\begin{prf}
    Ver \cite{adams-sobolev}, p.p. 28.
\end{prf}

\begin{tbox}[Desigualdade de Interpolação] \label{thm:desigualdade-de-inteporlacao}
    Sejam $0 < p < q < r \leqslant \infty$.
    Então $\cL^p(\Omega) \cap \cL^r(\Omega) \subseteq \cL^q(\Omega)$ e
    \[
        \Vert f \Vert_{\cL^q(\Omega)} \leqslant \Vert f \Vert_{\cL^p(\Omega)}^\theta \Vert f \Vert_{\cL^r(\Omega)}^{1 - \theta},
    \]
    para toda $f \in \cL^p(\Omega)$,
    onde $\theta \in (0,1)$ e
    \begin{equation*} \label{eq:3}
        \frac{1}{q} = \frac{\theta}{p} + \frac{1 - \theta}{r} \quad \left( \text{i.e., } \theta = \frac{\frac{1}{q} - \frac{1}{r}}{\frac{1}{p} - \frac{1}{r}}\right).
    \end{equation*}
\end{tbox}
\begin{prf}
    Ver \cite{folland-real.analysis}, p.p. 185.
\end{prf}

\begin{tbox} \label{thm:densidadeC}
    O espaço das funções contínuas $\cC(\Omega)$ é denso em $\cL^p(\Omega)$.
\end{tbox}
\begin{prf}
    Ver \cite{adams-sobolev}, p.p. 31.
\end{prf}


\begin{tbox}[Integração por partes em $\bR ^n$] \label{thm:integracao-por-partes}
    Seja $\Omega \subseteq \bR^n$ um aberto e $u, v : \overline\Omega \to \bR$ de classe $\cC^1$. 
    Então,
    \[
        \int_\Omega u \dfrac{\partial v}{\partial x_i} \,dx = \int_{\partial\Omega} uv \nu_i \, dS- \int_\Omega v \dfrac{\partial u}{\partial x_i} \,dx,
    \]
    onde $\nu = (\nu_1,\dots,\nu_n)$ é o vetor normal unitário que aponta para fora em $\partial\Omega$.   
\end{tbox}
\begin{prf}
    Ver \Cite{evans-pde}, p.p. 628.
\end{prf}

\begin{tbox}[Coordenadas polares em $\bR^n$] \label{thm:coordenadas-polares}
    Seja $f : B(y,s) \subseteq \bR^n \to \bR$ uma função integrável, então
    \[
        \int_{B(y,s)} f \,dx = \int_0^s\int_{\partial B(y,r)} f \,dS dr,
    \]
    onde $B(y,s)$ é a bola aberta de raio $s > 0$ e centrada em $y$.
\end{tbox}
\begin{prf}
    Ver \cite{folland-real.analysis}, p.p. 78.
\end{prf}

\begin{tbox} \label{thm:teorema-do-brezis}
    Seja $(u_n)_{n=1}^\infty$ uma sequência em $\cL^p(\Omega)$ tal que $\Vert u_n - u \Vert_{\cL^p(\Omega)} \to 0$, quando $n \to \infty$, para alguma função $u \in \cL^p(\Omega)$.
    Então, existem uma subsequência $(u_{n_k})_{k=1}^\infty$ de $(u_n)_{n=1}^\infty$ e uma função $v \in \cL^p(\Omega)$ tais que
    \begin{enumerate}[label=\textbf{(\alph*)}, leftmargin=*]
        \item $u_{n_k}(x) \to u(x)$ qtp\footnotemark ~ em $\Omega$;
        \item $|u_{n_k}(x)| \leqslant v(x)$ para todo $k \in \bN$, qtp em $\Omega$.
    \end{enumerate}
\end{tbox}
\begin{prf}
    Ver \cite{brezis-functional.analysis}, p.p. 94.
\end{prf}

\footnotetext{Duas funções $u$ e $v$ são ditas iguais em quase toda parte (qtp) se $u(x) = v(x)$ para todo $x \in X$, onde $X^\cC$ tem medida nula.}

\begin{tbox}[Critério de compacidade de Arzelà-Ascoli] \label{thm:arzela}
    Seja $(u_k)$ uma sequência de funções de $\bR^n$ em $\bR$ tal que
    \[
        |u_k(x)| \leqslant M,
    \]
    para todo $x \in \bR^n$, onde $M >0$ é uma constante e $(u_k)$ é equicontínua\footnotemark.
    Então, existem uma subsequência $(u_{k_j})_{j =1}^\infty \subseteq (u_k)_{k=1}^\infty$ e uma função contínua $u$ tal que $u_{k_j} \to u$, quando $j \to \infty$, uniformemente em conjuntos compactos de $\bR^n$.
\end{tbox}
\begin{prf}
    Ver \cite{folland-real.analysis}, p.p 137.
\end{prf}

\footnotetext{Uma sequência de funções $(u_k)$ é dita equicontínua se dado $\varepsilon > 0$, existe $\delta > 0$ (independente de $x$ e $k$), tal que
\[
    \Vert x - y \Vert < \delta \implies |u_k(x) - u_k(y)| < \varepsilon,
\]
para todo $k \in \bN$.
}

\begin{tbox}[Teorema de Fubini] \label{thm:fubini}
    Sejam $(\Omega_1, \cM_1, \mu)$ e $(\Omega_2, \cM_2, \nu)$ espaços de medida.
    Então, se $f \in \cL^1(\Omega_1 \times \Omega_2)$, a igualdade abaixo é válida:
    \[
        \int_{\Omega_1 \times \Omega_2} f \, d\mu \times d\nu = \int_{\Omega_1} \left( \int_{\Omega_2} f(x,y) \,d \nu \right) \, d\mu = \int_{\Omega_2} \left( \int_{\Omega_1} f(x,y) \,d\mu \right) \,d\nu.
    \]
\end{tbox}
\begin{prf}
    Ver \cite{folland-real.analysis}, p.p. 68.
\end{prf}

Uma outra forma de enunciar o Teorema de Fubini é a seguinte.
\begin{tbox}
    Sejam $\Omega_1 \subseteq \bR^n$, $\Omega_2  \subseteq \bR^d$ e $f : \Omega_1 \times \Omega_2 \to \bR$ uma função integrável.
Então,
\[
    \int_{\Omega_1 \times \Omega_2} f \,dX = \int_{\Omega_1} \int_{\Omega_2} f \, dydx = \int_{\Omega_2} \int_{\Omega_1} f \,dxdy.
\]
\end{tbox}

Essa versão do Teorema de Fubini é provada para integrais de Riemann, porém como em alguns casos as integrais de Riemann e Lebesgue coincidem, essas versões são equivalentes.


\begin{tbox}[Mudança de variáveis] \label{thm:mudanca-de-variaveis}
    Seja $\Psi : A \to B$ um difeomorfismo entre abertos de $\bR^n$. Seja $f : B \to \bR$ uma função contínua. Então, $f$ é integrável sobre $B$ se, e somente se, $(f \circ \Psi) |\det D\Psi|$ é integrável sobre $A$. Neste caso,
    \[
        \int_B f \,dx = \int_A (f \circ \Psi) |\det D\Psi| \,dy.
    \]
\end{tbox}
\begin{prf}
    O capítulo 4 de \cite{munkres-analysis.on.manifolds} é destinado a demonstração desse teorema.
\end{prf}

\section{Motivação} \label{sec:motivacao}
Considere o problema de Dirichlet
\begin{equation} \label{eq:problema-dirichlet-motivacao}
    \left\{  
        \begin{aligned}
            -\Delta u + u = f &\text{ em } \Omega;\\
            u = 0 &\text{ sobre } \partial\Omega,
        \end{aligned}
    \right.
\end{equation}
onde $\Omega \subseteq \bR^n$ é um aberto limitado.
Uma solução clássica para o problema acima é uma função $u \in \cC^2(\Omega)$ satisfazendo (\ref{eq:problema-dirichlet-motivacao}). 
Por outro lado, multiplicando ambos os lados da primeira equação em (\ref{eq:problema-dirichlet-motivacao}) por uma função $\phi \in \cC^{\infty}_C(\Omega)$ e integrando sobre $\Omega$, obtemos
\[
    \int_\Omega - \phi \Delta u \,dx + \int_\Omega u \phi \,dx = \int_\Omega f \phi \,dx.
\]
Note que, utlizando integração por partes (ver Teorema \ref{thm:integracao-por-partes}), a primeira integral acima pode ser reescrita como
\[
    \int_\Omega -\phi \Delta u \,dx = -\sum_{i=1}^n \int_\Omega \phi \frac{\partial^2 u}{\partial x_i^2} \,dx = -\sum_{i=1}^n \left( \int_{\partial\Omega} \phi \frac{\partial u}{\partial x_i} \nu_i \,dS - \int_\Omega \frac{\partial \phi}{\partial x_i} \frac{\partial u}{\partial x_i} \,dx\right).
\]
Mas, como $\phi$ se anula sobre $\partial \Omega$, inferimos
\[
    \int_\Omega -\phi \Delta u \,dx = \sum_{i=1}^n \int_\Omega \frac{\partial \phi}{\partial x_i} \frac{\partial u}{\partial x_i} \,dx = \int_{\Omega} \nabla u \cdot \nabla \phi \,dx.
\]
Dito isso, dizemos que $u$ é uma solução fraca do problema de Dirichlet se
\begin{equation} \label{eq:sol-fraca-dirichlet}
    \int_{\Omega} \nabla u \cdot \nabla \phi \,dx + \int_\Omega u\phi \,dx = \int_\Omega f \phi \,dx,
\end{equation}
para toda função $\phi \in \cC^{\infty}_C(\Omega)$\footnote{Nomenclatura: $\phi$ é chamada função teste.}.
Observe agora que, não precisamos mais que $u$ seja de classe $\cC^2$ já que a segunda derivada de $u$ não é utilizada em (\ref{eq:sol-fraca-dirichlet}). Na verdade, não precisamos nem que $u$ seja contínua, apenas integrável em $\Omega$.
Na Seção \ref{sec:dirichlet}, voltaremos a essa motivação para mostrar que para qualquer função $f \in \cL^2(\Omega)$, existe uma única solução fraca para (\ref{eq:problema-dirichlet-motivacao}). 
Essa solução é uma função que pertece ao espaço de Sobolev $H^1_0(\Omega)$ (esse e outros espaços e suas propriedades serão estudadas ao longo desse trabalho).


\section{Espaços de Sobolev $\cW^{k,p}(\Omega)$}

\begin{figure}
    \centering
    \includegraphics[height=3cm]{sobolev.jpg}
    \caption{Sergei Lvovich Sobolev (1908 -- 1989)}
\end{figure}

Nosso objetivo agora, é generalizar a noção de derivada para funções que não são diferenciáveis em um aberto $\Omega$ do $\bR^n$ e explorar algumas propriedades elementares.

Seja $u \in \cC^1(\Omega)$, então se $\phi \in \cC^\infty_c(\Omega)$, utilizando integração por partes (ver Teorema \ref{thm:integracao-por-partes}), temos que
\[
    \int_\Omega u \dfrac{\partial \phi}{\partial x_i} \,dx = \int_{\partial\Omega} u\phi \nu_i \, dS- \int_\Omega \phi \dfrac{\partial u}{\partial x_i} \,dx,
\]
para todo $i = 1,\dots,n$. Como $\phi$ tem suporte compacto e $\Omega$ é um aberto, segue que $\phi$ se anula sobre $\partial\Omega$, como foi mostrado abaixo da definição de suporte. Portanto, a expressão acima se torna
\begin{equation} \label{eq:derivada-fraca-xi}
    \int_\Omega u \dfrac{\partial \phi}{\partial x_i} \,dx = - \int_\Omega \phi \dfrac{\partial u}{\partial x_i} \,dx,
\end{equation}
para todo $i = 1,\dots,n$.
Ademais, se agora $u$ for de classe $\cC^k$ em $\Omega$, com $k \in \bN$ e $\alpha = (\alpha_1,\dots,\alpha_n) \in \bN^n$ um multi-índice de ordem $|\alpha| = \alpha_1 + \cdots + \alpha_n = k$, então
\begin{equation} \label{eq:derivada-fraca-dalpha}
    \int_\Omega u D^\alpha \phi \,dx = (-1)^{|\alpha|} \int_\Omega \phi D^\alpha u \,dx.
\end{equation}
Essa expressão é válida, já que
\[
    D^\alpha = \dfrac{\partial^{\alpha_1} }{\partial x_1^{\alpha_1}} \cdots \dfrac{\partial^{\alpha_n} }{\partial x_n^{\alpha_n}} = \dfrac{\partial^{|\alpha|} }{\partial x_1^{\alpha_1} \cdots \partial x_n^{\alpha_n}},
\]
e podemos aplicar (\ref{eq:derivada-fraca-xi}) $|\alpha|$ vezes.

Queremos descobrir se existe uma classe de funções tal que (\ref{eq:derivada-fraca-dalpha}) ainda é válida, mesmo se $u$ não for de classe $\cC ^k$. Note que o lado esquerdo de (\ref{eq:derivada-fraca-dalpha}) está bem definido se $u \in \cL^1_{\mathrm{loc}}(\Omega)$.
O problema é que se $u$ não é necessáriamente uma função de classe $\cC^k$ então, o lado direito de (\ref{eq:derivada-fraca-dalpha}) não está bem definido. Para resolver isso, perguntamos se existe uma função $v \in \cL^1_{\mathrm{loc}}(\Omega)$ tal que (\ref{eq:derivada-fraca-dalpha}) é válida quando substituimos $D^\alpha u$ por $v$.

Essa pergunta motiva a definição abaixo.

\begin{dbox}[Derivada fraca]
    Sejam $u,v \in \cL^1_{\mathrm{loc}}(\Omega)$ e $\alpha$ um multi-índice. Dizemos que $v$ é a $\alpha$-ésima derivada parcial fraca de $u$, denotada por
    \[
        v = D^\alpha u,
    \]
    dado que
    \begin{equation} \label{eq:derivada-fraca}
        \int_\Omega u D^\alpha \phi \,dx = (-1)^{|\alpha|} \int_\Omega \phi D^\alpha u\,dx,
    \end{equation}
    para toda função $\phi \in \cC ^\infty_c(\Omega)$.
\end{dbox}

Isto é, se dada uma função $u$ e existe uma função $v$ que satisfaz (\ref{eq:derivada-fraca}) para toda $\phi$ função teste, dizemos que $D^\alpha u = v$ no sentido fraco.
Caso contrário, se não existir uma função $v$ que satisfaz (\ref{eq:derivada-fraca}), então $u$ não possui a $\alpha$-ésima derivada parcial fraca.

\obs Aqui, utlizamos a notação $dx$ ao invés de $d\mu$ na integral de Lebesgue como convenção para dar ênfase que estamos utilizando a medida de Lebesgue (e não uma medida qualquer).
Além disso, se uma função é integrável a Riemann e a Lebesgue (utlizando a medida de Lebesgue), suas integrais coincidem.

Agora, vejamos alguns exemplos sobre a derivada fraca.

\begin{ex} \label{ex:derivada-fraca-R}
    A função $u : \Omega  =(0,2) \to \bR$ dada por
    \begin{equation} \label{eq:uxexemplo1}
        u(x) = \left\{
            \begin{array}{rl}
                x, & \!\text{se }\; 0 < x \leqslant 1;\\
                1, & \!\text{se }\; 1 < x < 2,\\
            \end{array}
        \right.
    \end{equation}
    não é diferenciável no sentido usual, já que
    \[
        \lim_{h\to 0^-} \frac{u(1 + h) - u(1)}{h} = \lim_{h \to 0^-} \frac{1 + h -1}{h} = 1,
    \]
    mas
    \[
        \lim_{h\to 0^+} \frac{u(1 + h) - u(1)}{h} = \lim_{h \to 0^+} \frac{1 -1}{h} = 0.
    \]
    Porém, $u$ possui derivada fraca dada pela função
    \[
        v(x) = \left\{
            \begin{array}{rl}
                1, & \text{se }\; 0 < x \leqslant 1;\\
                0, & \text{se }\; 1 < x < 2.\\
            \end{array}
        \right.
    \]
    Com efeito, note que, para toda função $\phi \in \cC^\infty_c(\Omega)$, temos que
    \[
        \int_0^2 u \phi' \,dx = \int_0^1 x \phi' \,dx + \int_1^2 \phi' \,dx = x \phi \bigg|_0^1 - \int_0^1 \phi \,dx + \phi \bigg|_1^2.
    \]
    Como $\phi$ tem suporte compacto, $\phi(0) = \phi(2) = 0$. Assim,
    \[
        \int_0^2 u \phi' \,dx = \phi(1) - \int_0^1 \phi \,dx - \phi(1) = -\int_0^1 \phi \,dx.
    \]
    Por fim, basta escrever $0$ como uma integral para obter
    \[
        \int_0^2 u \phi' \,dx = - \left(  \int_0^1 1\phi \, dx + \int_1^2 0\phi \,dx  \right) = -\int_0^2 v \phi \,dx.
    \]
    Portanto, $v$ é a derivada de $u$ no sentido fraco.
\end{ex}

\begin{ex}
    A função $u : \Omega  = (0,2) \to \bR$ dada por
    \[
        u(x) = \left\{
            \begin{array}{rl}
                x, & \!\text{se }\; 0 < x \leqslant 1;\\
                2, & \!\text{se }\; 1 < x < 2,\\
            \end{array}
        \right.
    \]
    não possuí derivada fraca.
    Mostremos que $u'$ não existe no sentido fraco.
    Isto significa que não existe uma função $v \in \cL^1_\loc(\Omega)$ que satisfaz
    \[
        \int_\Omega u \phi' \, dx = -\int_\Omega v \phi \,dx,
    \]
    para toda função $\phi \in \cC_c^\infty(\Omega)$. 
    Com efeito, suponha, por absurdo, que existe tal $v$. Deste modo,
    \[
        -\int_0^2 v \phi \, dx = \int_0^2 u \phi' \,dx = \int_0^1 x \phi' \,dx + 2\int_1^2 \phi' \,dx =- \int_0^1 \phi \,dx - \phi(1).
    \]
    Seja $(\phi_n)$ uma sequência de funções suaves satisfazendo
    \[
        0 \leqslant \phi_n \leqslant 1, \quad \phi_n(1) = 1, \quad \phi_n(x) \to 0, \text{ quando } n\to\infty,\text{ se } x \neq 1.
    \]
    Isolando $\phi(1)$, substituindo $\phi$ por $\phi_n$ e fazendo $n \to \infty$, obtemos
    \[
        1 = \lim \phi_n(1) = \lim \left[ \int_0^2 v \phi_n \, dx- \int_0^1 \phi_n \,dx \right] = 0,
    \]
    pelo Teorema da Convergência Dominada (ver Teorema \ref{thm:teorema-da-convergencia-dominada}), pois $\phi_n \to 0$ qtp em $\Omega$, quando $n\to\infty$ e $|\phi_n(x)| \leqslant 1$, para todo todo $x \in \Omega$ e $v \in \cL^1_\loc(\Omega)$.
    Portanto, $u$ não possui derivada fraca.
\end{ex}

O primeiro resultado sobre a derivada fraca que queremos mostrar é sobre sua unicidade, para isso precisamos antes do seguinte lema.

\begin{lbox} \label{lm:lema}
    Sejam $u \in \cL^1_{\loc}(\Omega)$ e $\phi \in \cC^\infty(\Omega)$.
    Então,
    \[
        \int_\Omega u \phi = 0,
    \]
    se, e somente se $u \equiv 0$ qtp em $\Omega$.
\end{lbox}
\begin{prf}
    Ver \cite{brezis-functional.analysis}, p.p. 110.
\end{prf}

Com o lema acima em mente, temos todas as ferramentas para mostrar a unicidade da derivda fraca.

\begin{pbox} \label{pr:unicidade}
    Seja $\alpha$ um multi-índice. Se $v$ e $\tilde v$ são ambas $\alpha$-ésimas derivadas parciais fracas de uma função $u$.
    Então,
    \[
        v = \tilde v \text{ qtp em } \Omega.
    \]
\end{pbox}
\begin{prf}
    Sejam $v, \tilde v \in \cL^1_{\mathrm{loc}}(\Omega)$ tais que
    \[
        \int_\Omega u D^\alpha \phi \,dx = (-1)^{|\alpha|} \int_\Omega v \phi \,dx \;\text{ e }\; \int_\Omega u D^\alpha \phi \, dx= (-1)^{|\alpha|}\int_\Omega \tilde v \phi \,dx,
    \]
    para toda $\phi \in \cC^\infty_c(\Omega)$. Com isso, podemos escrever
    \[
        \int_\Omega (v - \tilde v) \phi \, dx = 0,
    \]
    para todo $\phi \in \cC^{\infty}_c(\Omega)$.
    Logo, pelo Lema \ref{lm:lema}, chegamos a
    \[
        v - \tilde v = 0 \text{ qtp em } \Omega.
    \]
    Portanto, $v = \tilde v$ qtp em $\Omega$.
\end{prf}

Vejamos um exemplo prático da Proposição \ref{pr:unicidade}.

\begin{ex}
    Considere a função $u$ do Exemplo \ref{ex:derivada-fraca-R}, vimos que
    \[
        v(x) = \left\{
            \begin{array}{rl}
                1, & \!\text{se }\; 0 < x \leqslant 1;\\
                0, & \!\text{se }\; 1 < x < 2,\\
            \end{array}
        \right.
    \]
    é a derivada de $u$ (dada em \ref{eq:uxexemplo1}) no sentido fraco.
    Porém, a função
    \[
        \tilde v(x) = \left\{
            \begin{array}{rl}
                1, & \text{se }\; 0 < x < 1;\\
                0, & \text{se }\; 1 \leqslant x < 2,\\
            \end{array}
        \right.
    \]
    também satisfaz a definição de derivada fraca de $u$.
    A primeira vista, temos a sensação de que essa função é um contra-exemplo para unicidade da derivada fraca, todavia $v$ e $\tilde v$ são iguais fora de um conjunto de medida nula.
    De fato,
    \[
        (v - \tilde v)(x) = \left\{
            \begin{array}{rl}
                1, & \text{se }\; x = 1;\\
                0, & \text{se }\; x \neq 1,\\
            \end{array}
        \right.
    \]
    Portanto, é verdade que
    \[
        v = \tilde v \text{ qtp em } (0,2),
    \]
    pois $\{1\}$ é finito, logo tem medida nula.\footnote{Todo conjunto enumerável (em particular finito) tem medida (de Lebesgue) nula.}
\end{ex}

Com a definição de derivada fraca estabelecida, podemos definir os espaços de Sobolev $\cW^{k,p}(\Omega)$.

\begin{dbox}
    Sejam $\Omega \subseteq \bR^n$ um aberto e $1 \leqslant p \leqslant \infty$. 
    Definimos o espaço de Sobolev $\cW^{1,p}(\Omega)$ por
    \[
        \cW^{1,p}(\Omega) = \{u \in \cL^p(\Omega) \,; D^{e_i} u \in \cL^p(\Omega), \text{ para todo } i = 1,\dots,n\},
    \]
    onde $e_i = (0,\dots,0,1,0,\dots,0)$ é o vetor com $1$ na $i$-ésima cordenada e $0$ caso contrário.
\end{dbox}

Existem duas formas de definir os espaços de Sobolev $\cW^{k,p}(\Omega)$, com $k \in \bN$, indutivamente, e pela derivada fraca.

\begin{dbox}
    Sejam $\Omega \subseteq \bR ^n$ um aberto, $k \in \bN$ e $1 \leqslant p \leqslant \infty$. Definimos o espaço de Sobolev $\cW^{k,p}(\Omega)$ por
    \[
        \cW^{k,p}(\Omega) = \left\{ u \in \cL^p(\Omega) \,; D^\alpha u \in \cL^p(\Omega), \text{ para todo multi-índice } \alpha \text{ com } |\alpha| \leqslant k\right\}.
    \]
    Ou, de outra forma,
    \[
        \cW^{k,p}(\Omega) = \left\{ u \in \cW^{k-1,p}(\Omega) \,; D^\alpha u \in \cW^{k-1,p}(\Omega) , \text{ para todo multi-índice } \alpha \text{ com } |\alpha| = 1\right\},
    \]
    onde $D^\alpha u$ é a $\alpha$-ésima derivada parcial de $u$ no sentido fraco.
\end{dbox}

\obs Definimos também o espaço $\cW^{k,p}_\loc(\Omega)$ por
\[
    \cW^{k,p}_\loc(\Omega) = \left\{ u \in \cL^p_\loc(\Omega) \,; D^\alpha u \in \cL^p_\loc(\Omega), \text{ para todo multi-índice } \alpha \text{ com } |\alpha| \leqslant k\right\}.
\]

\obs Quando $p = 2$, a notação $H^{k}(\Omega)$ é comumente utilizada para dar ênfase que o espaço $\cW^{k,2}(\Omega)$ é um espaço de Hilbert\footnote{Espaço vetorial com produto interno completo.}, munido do produto interno
\[
    \left\langle u, v\right\rangle _{H^k(\Omega)} = \sum_{|\alpha| \leqslant k} \left\langle D^\alpha u, D^\alpha v\right\rangle _{\cL^2(\Omega)},
\]
onde
\[
    \left\langle D^\alpha u, D^\alpha v\right\rangle _{\cL^2(\Omega)} = \int_\Omega D^\alpha u D^\alpha v \,dx.
\]
No próximo capítulo, estudaremos algumas aplicações dos espaços de Sobolev, e os espaços $H^k(\Omega)$ serão utilizados.

\begin{dbox}
    O espaço $\cW^{k,p}(\Omega)$ admite norma
    \[
        \Vert u \Vert_{\cW^{k,p}(\Omega)} = \left( \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p \right)^{\frac{1}{p}},
    \]
    para $1 \leqslant p < \infty$ e 
    \[
        \Vert u \Vert_{\cW^{k,\infty}(\Omega)} 
        % = \sum_{|\alpha| \leqslant k} \esssup\!_\Omega |D^\alpha u| 
        = \sum_{|\alpha| \leqslant k} \Vert D^{\alpha}u \Vert_{\cL^\infty(\Omega)}.
    \]
\end{dbox}

\obs Dizemos que uma sequência $(u_n)$ converge para $u$ em $\cW^{k,p}(\Omega)$ se
\[
    \lim \Vert u_n - u \Vert_{\cW^{k,p}(\Omega)} = 0,
\]
e denotamos por $u_n \to u \text{ em } \cW^{k,p}(\Omega)$ quando $n \to \infty$.
Além disso, dizemos que $(u_n)$ converge para $u$ em $\cW^{k,p}_\loc(\Omega)$ se $u_n$ converge para $u$ em $\cW^{k,p}(\Omega')$ para todo conjunto aberto $\Omega'$ compactamente contido em $\Omega$, isto é $\Omega' \subseteq \Omega$ e $\overline{\Omega'}$ é compacto. Essa inclusão será denotada por $\Omega' \Subset \Omega$.

Ainda não temos todas as ferramentas necessárias para provar que as normas da definição anterior são de fato normas em $\cW^{k,p}(\Omega)$, com $1 \leqslant p \leqslant \infty$. Isso será feito após o Teorema \ref{thm:propriedades-derivada-fraca} sobre as propriedades da derivada fraca, que são necessárias para verificar que $\Vert \cdot \Vert_{\cW^{k,p}(\Omega)}$ satisfaz a definição de norma.

Um outro espaço importante é o espaço $\cW^{k,p}_0(\Omega)$ ($H^k_0(\Omega)$ se $p = 2$) que é definido como o fecho de $\cC^{\infty}_c(\Omega)$ em $\cW^{k,p}(\Omega)$. Ou seja, dada uma função em $u \in \cW^{k,p}_0(\Omega)$, existe uma sequência $(u_n)$ em $\cC^{\infty}_c(\Omega)$ tal que $u_n \to u$ em $\cW^{k,p}(\Omega)$, quando $n \to \infty$.
O Teorema \ref{thm:traco-2} mostra uma equivalência para as funções nesse espaço.

\obs Essa não é a única forma de definir uma norma em $\cW^{k,p}(\Omega)$, a norma que definimos acima é equivalente, por exemplo, à norma
\[
    \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)},
\]
com $1 \leqslant p < \infty$, e a norma $\Vert \cdot \Vert_{\cW^{k,\infty}(\Omega)}$ é equivalente a
\[
    \max_{|\alpha|\leqslant k} \Vert D^\alpha u \Vert_{\cL^\infty(\Omega)}.
\]

O próximo exemplo ilustra um caso em que uma função pode ou não possuir derivada fraca dependendo da dimensão $n$ do espaço Euclidiano e do expoente de integração $p$.

\begin{ex}
    Seja $\Omega = B(0,1) \subseteq \bR^n$ a bola aberta de raio 1 centrada na origem, e considere $u : \Omega \to \bR$ dada por
    \begin{equation} \label{eq:po}
        x \mapsto \Vert x \Vert^{-\alpha},
    \end{equation}
    onde $\alpha > 0$. Queremos verificar para quais valores de $\alpha > 0$, $n$ e $p$ a função $u$ pertence ao espaço $\cW^{1,p}(\Omega)$.
    Primeiramente, note que $u$ é suave fora de $0$ com
    \[
        \dfrac{\partial u}{\partial x_i} = \frac{-\alpha x_i}{\Vert x \Vert^{\alpha + 2}} \quad (x \neq 0),
    \]
    logo, como
    \[
        Du(x) = \left(\frac{-\alpha x_1}{\Vert x \Vert^{\alpha + 2}},\dots,\frac{-\alpha x_n}{\Vert x \Vert^{\alpha + 2}}  \right) \quad (x \neq 0),
    \]
    segue que
    \[
        \Vert Du(x) \Vert = \frac{|\alpha|}{\Vert x \Vert^{\alpha + 1}} \quad (x \neq 0).
    \]
    Seja $\phi \in \cC^\infty_c(\Omega)$ e fixe $\varepsilon > 0$. Por integração por partes (ver Teorema \ref{thm:integracao-por-partes}), temos que
    \begin{equation} \label{eq:op}
        \int_{\Omega \setminus B[0, \varepsilon]} u \dfrac{\partial \phi}{\partial x_i} \, dx = -\int_{\Omega \setminus B[0, \varepsilon]} \phi \dfrac{\partial u}{\partial x_i} \,dx + \int_{\partial B[0,\varepsilon]} u \phi \nu_i \,dS,
    \end{equation}
    onde $\nu = (\nu_1,\dots,\nu_n)$ denota o vetor normal unitário que aponta para fora em $\partial B[0,\varepsilon]$ (bola fechada de raio $\varepsilon > 0  $ centrada na origem).
    Agora se $\alpha + 1 < n$, $\Vert Du \Vert \in \cL^1(\Omega)$.
    De fato, integrando $\Vert Du \Vert$ sobre $\Omega$, concluímos que
    \[
        \int_\Omega \Vert Du \Vert \,dx = |\alpha|\int_{B(0,1)} \frac{1}{\Vert x \Vert^{\alpha+1}} \,dx.
    \]
    Transformando em coordenadas polares (ver Teorema \ref{thm:coordenadas-polares}), conseguimos simplificar essa integral da seguinte forma:
    \[
        \int_{B(0,1)} \frac{1}{\Vert x \Vert^{\alpha+1}} \,dx =  \int_0^1 \int_{\Vert x \Vert = r} \frac{1}{\Vert x \Vert^{\alpha + 1}} \,dS dr = \int_0^1 \int_{\Vert x \Vert= r} \frac{1}{r^{\alpha + 1}} \, dS dr = \int_0^1 \frac{1}{r^{\alpha+1}}  \int_{\Vert x \Vert = r} dS dr,
    \]
    onde a integral de superficie acima, é igual a área da esfera $n$-dimensional de raio $r$ dada por
    \[
        \frac{2\pi^{\frac{n}{2}}}{\Gamma(\frac{n}{2})}r^{n-1},
    \]
    onde $\Gamma$ e a função gama (ver \cite{artin-gamma} para mais detalhes), a qual, por simplicidade, vamos denotar por $\sigma(n) r^{n-1}$. Dessa forma, chegamos a
    \[
        \int_0^1 \frac{1}{r^{\alpha+1}}  \int_{\Vert x \Vert = r} dS dr = \sigma(n)\int_0^1 r^{n-\alpha-2} \,dr = \sigma(n)\left(\frac{1^{n-\alpha-1}}{n-\alpha -1} - \frac{0^{n-\alpha-1}}{n-\alpha-1}\right).
    \]
    Note que, se $n - \alpha - 1 < 0$ então $0^{n-\alpha-1} = \infty$. Sendo assim, deduzimos que
    \[
        \int_\Omega \Vert Du \Vert \, dx < \infty \iff \alpha + 1 < n.
    \]
    Portanto, $\Vert Du \Vert \in \cL^1(\Omega)$ desde que $\alpha + 1 < n$.
    Nesse caso, inferimos, por (\ref{eq:po}), que
    \[
        \left| \int_{\partial B[0,\varepsilon]} u \phi \nu_i \,dS \right| \leqslant 
        % \int_{\partial B[0,\varepsilon]} |u \phi \nu_i| \,dS = 
        \int_{\partial B[0,\varepsilon]} |u| |\phi| |\nu_i| \,dS \leqslant \Vert \phi \Vert_{\cL^\infty(\Omega)}\int_{\partial B[0,\varepsilon]} |u|dS \leqslant \Vert \phi \Vert_{\cL^\infty(\Omega)}\int_{\partial B[0,\varepsilon]} \varepsilon^{-\alpha} \,dS,
    \]
    pois $|\nu_i| \leqslant \Vert \nu \Vert = 1$. Essa última integral pode ser calculada por meio de coordenadas polares de forma análoga ao que foi feito anteriormente, resultando em
    \[
        \left| \int_{\partial B[0,\varepsilon]} u \phi \nu_i \,dS \right| \leqslant c \varepsilon^{n-1-\alpha} \to 0,
    \]
    quando $\varepsilon \to 0$. Portanto, por (\ref{eq:op}), deduzimos que
    \[
        \int_{\Omega} u \dfrac{\partial \phi}{\partial x_i} \, dx = -\int_{\Omega} \phi \dfrac{\partial u}{\partial x_i} \,dx,
    \]
    para toda $\phi \in \cC^\infty_c(\Omega)$, desde que $0 < \alpha < n-1$. 

    Além disso, $\Vert Du \Vert \in \cL^p(\Omega)$ se, e somente se, $(\alpha + 1)p < n$, esse cálculo é feito de forma análoga ao que foi feito para verificar quando $\Vert Du \Vert \in \cL^1(\Omega)$. Consequentemente, $u \in \cW^{1,p}(\Omega)$ se, e somente se $\alpha < \frac{n-p}{p}$.
    Em particular, $u \not\in \cW^{1,p}(\Omega)$ quando $p \geqslant n$.
\end{ex}

Agora, vamos explorar as propriedades elementares das derivadas fracas.

\begin{tbox}[Propriedades da derivada fraca] \label{thm:propriedades-derivada-fraca}
    Sejam $u, v \in \cW^{k,p}(\Omega)$ e $\alpha$ um multi-índice com $1 \leqslant |\alpha| \leqslant k$.
    Então,
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $D^\beta(D^\alpha u) = D^\alpha (D^\beta u) = D^{\alpha + \beta} u$ para todos multi-índices $\alpha$ e $\beta$ com $|\alpha| + |\beta| \leqslant k$;
        \item $D^\alpha u \in \cW^{k - |\alpha|,p}(\Omega)$;
        \item \textbf{(Linearidade)} para todo $\lambda \in \bR$, tem-se que $\lambda u + v \in \cW^{k,p}(\Omega)$ e
        \[
            D^{\alpha}(\lambda u + v) = \lambda D^\alpha u + D^\alpha v;
        \]
        \item se $\Omega'$ é um aberto de $\Omega$, então $u \in \cW^{k,p}(\Omega')$;
        \item \textbf{(Regra de Leibniz)} se $\eta \in \cC^\infty_c(\Omega)$, então $\eta u \in \cW^{k,p}(\Omega)$ e
        \begin{equation} \label{eq:regra-de-leibniz}
            D^\alpha (\eta u) = \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u,
        \end{equation}
        onde
        \[
            \binom{\alpha}{\sigma} = \frac{\alpha!}{\sigma!(\alpha - \sigma)!}, \quad \alpha! = \alpha_1!\cdots \alpha_n!
        \]
        e $\sigma \leqslant \alpha$ significa $\sigma_j \leqslant \alpha_j$, para todo $j = 1,\dots,n$.
    \end{enumerate}
\end{tbox}
\begin{prf}
    ~

    \textbf{(a)} Mostremos que $D^{\beta}D^{\alpha} u = D^{\alpha + \beta}u$ (a demonstração para $D^{\alpha}D^{\beta} u$ é análoga).
    Com efeito, é verdade que
    \[
        \int_\Omega D^{\alpha} u D^{\beta} \phi \, dx = (-1)^{|\alpha|} \int_\Omega u D^{\alpha} D^{\beta} \phi \, dx = (-1)^{|\alpha|} \int_\Omega u D^{\alpha + \beta} \phi \,dx,
    \]
    para toda $\phi \in \cC^{\infty}_c(\Omega)$. Note que a última igualdade é válida pelo fato de $\phi$ ser uma função infinitamente diferenciável e $D^\alpha$ e $D^\beta$ serem derivadas parciais usuais.
    Dessa forma $D^{\beta}D^{\alpha} \phi = D^{\alpha + \beta} \phi$.
    Dito isso, utilizando a definição de derivada fraca, obtemos
    \[
        \int_\Omega D^{\alpha} u D^{\beta} \phi \, dx = (-1)^{|\alpha|}(-1)^{|\alpha| + |\beta|} \int_\Omega \phi D^{\alpha+\beta} u \,dx = (-1)^{|\beta|} \int_\Omega \phi D^{\alpha + \beta} u \,dx.
    \]
    Portanto, $D^{\beta} D^{\alpha} u = D^{\alpha + \beta} u$ no sentido fraco.

    \textbf{(b)} Suponha que $D^\alpha u \not\in \cW^{k-|\alpha|,p}(\Omega)$, então existe um multi-índice $\beta$, com $|\beta| \leqslant k - |\alpha|$, tal que $D^{\beta}(D^{\alpha}u) \not\in \cL^p(\Omega)$.
    Pelo item anterior temos que $D^{\alpha+\beta}u \not\in \cL^p(\Omega)$, o que é uma contradição, pois por hipótese $D^{\gamma}u \in \cL^p(\Omega)$ para todo multi-índice $\gamma$ com $|\gamma| \leqslant k$ e, como $|\beta| \leqslant k - |\alpha|$, tem-se $|\gamma| = |\alpha| + |\beta| \leqslant k$ (para $\gamma = \alpha + \beta$).
    Portanto, $D^{\alpha}u \in \cW^{k-|\alpha|,p}(\Omega)$.

    \textbf{(c)} Note que
    \[
        \int_\Omega (\lambda u + v) D^{\alpha}\phi \,dx = \int_\Omega \lambda u D^\alpha \phi \, dx + \int_\Omega v D^\alpha \phi \, dx = \lambda \int_\Omega u D^{\alpha} \phi \,dx + \int_\Omega v D^{\alpha} \phi \, dx.
    \]
    Utilizando a definição de derivada fraca nas duas útlimas integrais acima, obtemos
    {\small
    \[
        \lambda \int_\Omega u D^{\alpha} \phi \,dx + \int_\Omega v D^{\alpha} \phi \, dx = \lambda (-1)^{|\alpha|} \int_\Omega \phi D^{\alpha} u \, dx + (-1)^{|\alpha|}\int_\Omega \phi D^{\alpha} v \, dx = \int_\Omega (\lambda D^{\alpha}u + D^{\alpha}v )\phi \,dx,
    \]}\!
    para todo $\phi \in \cC^{\infty}_c(\Omega)$. Portanto, $D^{\alpha}(\lambda u + v) = \lambda D^\alpha u + D^\alpha v$ no sentido fraco.

    \textbf{(d)} Seja $\Omega' \subseteq \Omega$ um aberto, queremos verificar que $u \in \cW^{k,p}(\Omega')$.
    De fato, basta verificar que as integrais
    \[
        \int_{\Omega'} |u|^p \, dx \;\text{ e }\; \int_{\Omega'} |D^{\alpha}u|^p \, dx
    \]
    são finitas, para todo $\alpha$ multi-índice com $|\alpha| \leqslant k$. De fato, é verdade que
    \[
        \int_{\Omega'} |u|^p \, dx \leqslant \int_{\Omega} |u|^p \,dx < \infty,
    \]
    e
    \[
        \int_{\Omega'} |D^\alpha u|^p \, dx \leqslant \int_{\Omega} |D^\alpha u|^p \,dx < \infty,
    \]
    para todo $\alpha$ multi-índice com $|\alpha| \leqslant k$, ambas pelo fato de $u \in \cW^{k,p}(\Omega)$.
    Assim, $u \in \cW^{k,p}(\Omega')$.

    \textbf{(e)} Para mostrar que (\ref{eq:regra-de-leibniz}) é válida, utilizaremos indução sobre $|\alpha|$. 
    
    Com efeito, para $|\alpha|= 1$, como $\eta,\phi \in \cC^{\infty}_c(\Omega)$, temos que
    \[
        D^{\alpha} (\eta \phi) = \phi D^{\alpha}\eta + \eta D^{\alpha} \phi.
    \]
    Dessa forma,
    \[
        \int_\Omega \eta u D^{\alpha} \phi \, dx = \int_\Omega u D^{\alpha} (\eta \phi) - \int_\Omega u\phi D^{\alpha} \eta \, dx.
    \]
    Como $\eta$ e $\phi$ têm suporte compacto, então $\eta\phi$ também tem.
    De fato, é fácil ver que
    \[
        \{x \in \Omega \,; \eta(x)\phi(x) \neq 0\} \subseteq \{x \in \Omega \,; \eta(x) \neq 0\} \cap \{x \in \Omega \,; \phi(x) \neq 0\},
    \] 
    o que implica em
    \[
        \supp(\eta\phi) \subseteq \supp \eta \cap \supp \phi.
    \]
    Portanto $\supp(\eta\phi)$ é comapcto, desde que $\supp \eta$ e $\supp \phi$ tambem sejam.
    Dito isso, utilizando a definição de derivada fraca apenas na primeira integral do lado direito da igualdade acima, chegamos a
    \[
        \int_\Omega \eta u D^{\alpha} \phi \, dx = -\int_\Omega \eta \phi D^{\alpha} u \, dx - \int_\Omega u\phi D^{\alpha} \eta \, dx = -\int_\Omega (\eta D^{\alpha}u + uD^{\alpha}\eta) \phi \,dx.
    \]
    Portanto, $D^{\alpha}(\eta u) = \eta D^{\alpha}u + uD^{\alpha}\eta$ como queriamos mostrar.

    Agora seja $m \in \bN$ tal que $m < k$ e suponha que $(\ref{eq:regra-de-leibniz})$ é válida para todo multi-índice $\alpha$ com $|\alpha| \leqslant m$ e toda função teste $\eta$.
    Considere um multi-índice $\alpha$ com $|\alpha| = m + 1$.
    Então, $\alpha$ é da forma $\alpha = \beta + \gamma$ com $|\beta| = m$ e $|\gamma| = 1$. 
    Deste modo, podemos escrever por \textbf{(a)} que
    \[
        \int_\Omega \eta u D^{\alpha}\phi \, dx = \int_\Omega \eta u D^{\beta + \gamma}\phi \, dx = \int_\Omega \eta u D^\beta(D^\gamma \phi) \, dx = (-1)^{|\beta|} \int_\Omega D^{\beta} (\eta u) D^{\gamma}\phi \,dx,
    \]
    para todo $\phi \in \cC^{\infty}_c(\Omega)$.
    Como $|\beta| = m$ podemos utilizar a hipótese de indução em $D^{\beta}(\eta u)$ e a definição da $\gamma$-ésima derivada fraca. Assim, por \textbf{(c)}, deduzimos que
    {\small
    \[
        \int_\Omega \eta u D^{\alpha}\phi \, dx = (-1)^{|\beta|} \int_\Omega \sum_{\sigma \leqslant \beta} \binom{\beta}{\sigma} D^{\sigma} \eta D^{\beta - \sigma} u D^{\gamma}\phi \, dx = (-1)^{|\beta| + |\gamma|} \int_\Omega \bigg[\sum_{\sigma \leqslant \beta} \binom{\beta}{\sigma} D^{\gamma}(D^{\sigma} \eta D^{\beta - \sigma} u)\bigg] \phi \, dx.
    \]}\!
    Além disso, como $|\gamma| = 1$, podemos aplicar a regra de Leibniz novamente, obtendo
    \begin{equation} \label{eq:integral-etau}
        \int_\Omega \eta u D^{\alpha}\phi \, dx = (-1)^{|\alpha|} \int_\Omega \bigg[\sum_{\sigma \leqslant \beta} \binom{\beta}{\sigma} \left(D^{\rho}\eta D^{\alpha - \rho} u + D^{\sigma} \eta D^{\alpha - \sigma} u\right)\bigg] \phi \,dx,
    \end{equation}
    onde $\rho = \sigma + \gamma$. 
    Note que podemos escrever o somatório acima da seguinte forma:
    \begin{equation*} \label{eq:somatorio}
        \sum_{\gamma \leqslant \rho \leqslant \alpha} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u + \sum_{0 \leqslant\sigma \leqslant \beta} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u,
    \end{equation*}
    o qual ainda pode ser expandido em quatro somatórios como abaixo:
    \begin{equation} \label{eq:somatorio-2}
        \begin{aligned}
            \sum_{\gamma \leqslant \rho \leqslant \beta} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u &+ \sum_{\beta < \rho \leqslant \alpha} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u \\
            &+ \sum_{0 \leqslant \sigma < \gamma} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u + \sum_{\gamma \leqslant \sigma \leqslant \beta} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u.
           \end{aligned}
    \end{equation}
    Porém, note que $0 \leqslant \sigma < \gamma$ implica em $\sigma = 0$. Com efeito, $0 \leqslant \sigma$ significa que $0 \leqslant \sigma_i$ para todo $i = 1,\dots,n$ e $\sigma < \gamma$ significa que existe um $j = 1,\dots,n$ tal que $\sigma_j < \gamma_j$. Como $|\gamma| = 1$, suponha, sem perda de generalidade, que $\gamma = e_1 = (1,0,\dots,0)$.
    Dessa forma, para $j = 1$, concluímos que $0 \leqslant \sigma_1 < 1$.
    Como $\sigma_1 \in \bN$ segue que $\sigma_1 = 0$. Por outro lado, para $i = 2,\dots,n$, vale $0 \leqslant \sigma_i < 0$,
    que implica em $\sigma_i = 0$. Portanto $\sigma = 0$.
    Da mesma forma, $\beta < \rho \leqslant \alpha$ implica em $\rho =\alpha$.
    Assim, (\ref{eq:somatorio-2}) pode ser escrito da seguinte forma:
    \begin{equation} \label{eq:somatorio-3}
        % \binom{\alpha - \gamma}{0}
        \eta D^{\alpha} u + \sum_{\gamma \leqslant \rho \leqslant \beta} \binom{\alpha - \gamma}{\rho - \gamma} D^{\rho}\eta D^{\alpha - \rho} u + \sum_{\gamma \leqslant \sigma \leqslant \beta} \binom{\alpha - \gamma}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u + 
        % \binom{\alpha - \gamma}{\alpha - \gamma}
        u D^{\alpha}\eta.
    \end{equation}
    Por fim, a menos de uma mudança de variaveis, escrevemos (\ref{eq:somatorio-3}) como
    \[
        \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u,
    \]
    pois
    \[
        \binom{\alpha - \gamma}{\sigma} + \binom{\alpha - \gamma}{\sigma - \gamma} = \binom{\alpha}{\sigma}
    \]
    e
    \[
        \binom{\alpha}{0} = 1 = \binom{\alpha}{\alpha}.
    \]
    Sendo assim, voltando para a igualdade (\ref{eq:integral-etau}), temos que
    \[
        \int_\Omega \eta u D^{\alpha}\phi \, dx = (-1)^{|\alpha|} \int_\Omega \bigg[\sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u\bigg] \phi \,dx,
    \]
    para todo $\phi \in \cC^{\infty}_c(\Omega)$,
    Portanto, inferimos que
    \[
        D^\alpha (\eta u) = \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} D^{\sigma} \eta D^{\alpha - \sigma} u,
    \]
    como queriamos mostrar.
\end{prf}

Com os resultados obtidos, agora é possível verificar que os espaços de Sobolev $W^{k,p}(\Omega)$ são espaços de Banach. Inicialmente, verificamos que $\Vert \cdot \Vert_{\cW^{k,p}(\Omega)}$ é uma norma em $\cW^{k,p}(\Omega)$.

\begin{tbox}
    $(\cW^{k,p}(\Omega), \Vert \cdot \Vert_{\cW^{k,p}(\Omega)})$, com $1 \leqslant p \leqslant \infty$ é um espaço vetorial normado.
\end{tbox}
\begin{prf}
    Inicialmente, considere que $1 \leqslant p < \infty$.
    \begin{enumerate}[leftmargin=*]
        \item Seja $u \in \cW^{k,p}(\Omega)$. Com isso, é verdade que
        \[
            \Vert u \Vert_{\cW^{k,p}(\Omega)} = 0 \iff \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = 0 \iff \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = 0 \iff D^\alpha u = 0,
        \]
        para todo multi-índice $\alpha$ com $|\alpha| \leqslant k$.
        Em particular, se $\alpha = (0,\dots,0)$, $u = D^\alpha u = 0$.

        Por outro lado, se $u = 0$, $D^\alpha u = 0$ para todo multi-índice $\alpha$. Sendo assim, $\Vert u \Vert_{\cW^{k,p}(\Omega)} = 0$.

        \item Sejam $\lambda \in \bR$ e $u \in \cW^{k,p}(\Omega)$. Sendo assim, pelo Teorema \ref{thm:propriedades-derivada-fraca}, podemos escrever
        \[
            \begin{aligned}
                \Vert \lambda u \Vert_{\cW^{k,p}(\Omega)}^p = \sum_{|\alpha| \leqslant k} \Vert D^\alpha (\lambda u) \Vert_{\cL^p(\Omega)}^p &= \sum_{|\alpha| \leqslant k} \Vert \lambda D^\alpha u \Vert_{\cL^p(\Omega)}^p\\ 
                &= |\lambda|^p\sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p = |\lambda|^p\Vert u \Vert_{\cW^{k,p}(\Omega)}^p.
            \end{aligned}
        \]
        Portanto, $\Vert \lambda u \Vert_{\cW^{k,p}(\Omega)} = |\lambda|\Vert u \Vert_{\cW^{k,p}(\Omega)}$.

        \item Sejam $u, v \in \cW^{k,p}(\Omega)$ Pelos Teoremas \ref{thm:lp-completo-pre} e \ref{thm:propriedades-derivada-fraca}, segue que
        {\small
        \[
            \begin{aligned}
                \Vert u + v \Vert_{\cW^{k,p}(\Omega)} = \left(\sum_{|\alpha| \leqslant k} \Vert D^\alpha u + D^\alpha v \Vert_{\cL^p(\Omega)}^p\right)^{\!\!\frac{1}{p}} &\leqslant \left(\sum_{|\alpha| \leqslant k} \left(\Vert D^\alpha u \Vert_{\cL^p(\Omega)} + \Vert D^\alpha v \Vert_{\cL^p(\Omega)}\right)^p \right)^{\!\!\frac{1}{p}}.\\
            &\leqslant \left( \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p \right)^{\!\!\frac{1}{p}} + \left( \sum_{|\alpha| \leqslant k} \Vert D^\alpha v \Vert_{\cL^p(\Omega)}^p \right)^{\!\!\frac{1}{p}}.
            \end{aligned}
        \]}\!
        Ou seja,
        \[
            \Vert u + v \Vert_{\cW^{k,p}(\Omega)} \leqslant \Vert u \Vert_{\cW^{k,p}(\Omega)} + \Vert v \Vert_{\cW^{k,p}(\Omega)}.
        \]
    \end{enumerate}
    Portanto, $\Vert \cdot \Vert_{\cW^{k,p}(\Omega)}$ é uma norma em $\cW^{k,p}(\Omega)$, com $1 \leqslant p < \infty$.

    Para o caso $p = \infty$, a demonstração é análoga.
    \begin{enumerate}[leftmargin=*]
        \item Seja $u \in \cW^{k,\infty}(\Omega)$. Com isso, é verdade que
        \[
            \Vert u \Vert_{\cW^{k,\infty}(\Omega)} = 0 \iff \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^\infty(\Omega)} = 0 \iff \Vert D^\alpha u \Vert_{\cL^\infty(\Omega)} = 0 \iff D^\alpha u = 0,
        \]
        para todo multi-índice $\alpha$ com $|\alpha| \leqslant k$.
        Em particular, se $\alpha = (0,\dots,0)$, $u = D^\alpha u = 0$.

        Por outro lado, se $u = 0$, $D^\alpha u = 0$ para todo multi-índice $\alpha$. Sendo assim, $\Vert u \Vert_{\cW^{k,\infty}(\Omega)} = 0$.

        \item Sejam $\lambda \in \bR$ e $u \in \cW^{k,\infty}(\Omega)$. Sendo assim, pelos Teoremas \ref{thm:lp-completo-pre}, \ref{thm:propriedades-derivada-fraca}, podemos escrever
        \[
            \begin{aligned}
                \Vert \lambda u \Vert_{\cW^{k,\infty}(\Omega)} = \sum_{|\alpha| \leqslant k} \Vert D^\alpha (\lambda u) \Vert_{\cL^\infty(\Omega)} &= \sum_{|\alpha| \leqslant k} \Vert \lambda D^\alpha u \Vert_{\cL^\infty(\Omega)}\\ 
                &= |\lambda|\sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^\infty(\Omega)} = |\lambda\Vert u \Vert_{\cW^{k,\infty}(\Omega)}.
            \end{aligned}
        \]
        Portanto, $\Vert \lambda u \Vert_{\cW^{k,\infty}(\Omega)} = |\lambda|\Vert u \Vert_{\cW^{k,\infty}(\Omega)}$.

        \item Sejam $u, v \in \cW^{k,\infty}(\Omega)$. Daí, pelo Teorema \ref{thm:propriedades-derivada-fraca}, segue que
        \[
            \begin{aligned}
                \Vert u + v \Vert_{\cW^{k,\infty}(\Omega)} &= \sum_{|\alpha| \leqslant k} \Vert D^\alpha u + D^\alpha v \Vert_{\cL^\infty(\Omega)}\\ &\leqslant \sum_{|\alpha| \leqslant k} \Big( \Vert D^\alpha u \Vert_{\cL^\infty(\Omega)} + \Vert D^\alpha v \Vert_{\cL^\infty(\Omega)} \Big)\\
                &= \sum_{|\alpha| \leqslant k} \Vert D^\alpha u \Vert_{\cL^\infty(\Omega)} + \sum_{|\alpha| \leqslant k}\Vert D^\alpha v \Vert_{\cL^\infty(\Omega)} = \Vert u \Vert_{\cW^{k,\infty}(\Omega)} + \Vert v \Vert_{\cW^{k,\infty}(\Omega)}.
            \end{aligned}
        \]
    \end{enumerate}
    Portanto, $\Vert \cdot \Vert_{\cW^{k,\infty}(\Omega)}$ é uma norma em $\cW^{k,\infty}(\Omega)$.
\end{prf}

Agora, mostremos a completude do espaço de Sobolev $\cW^{k,p}(\Omega)$.

\begin{tbox} \label{thm:sobolev-completo}
    $(\cW^{k,p}(\Omega), \Vert \cdot \Vert_{\cW^{k,p}(\Omega)})$, com $1 \leqslant p \leqslant \infty$, é completo.
\end{tbox}
\begin{prf}
    Seja $(u_n)$ uma sequência de Cauchy em $\cW^{k,p}(\Omega)$, com $1 \leqslant p < \infty$. Isto é, dado $\varepsilon > 0$ existe $n_0 \in \bN$ tal que
    \[
        \Vert u_n - u_m \Vert_{\cW^{k,p}(\Omega)} < \varepsilon,
    \]
    para todo $n,m > n_0$.
    Note que, se $1 \leqslant p < \infty$, tem-se
    % \[
    % \begin{aligned}
    %     \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p &\leqslant \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p\\ 
    %     &= \sum_{|\alpha| \leqslant k} \Vert D^\alpha (u_n - u_m) \Vert_{\cL^p(\Omega)}^p = \Vert u_n - u_m \Vert_{\cW^{k,p}(\Omega)}^p < \varepsilon^p
    % \end{aligned}
    % \]
    \[
        \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p \leqslant \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^p(\Omega)}^p = \Vert u_n - u_m \Vert_{\cW^{k,p}(\Omega)}^p < \varepsilon^p,
    \]
    e se $p = \infty$,
    \[
        \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^\infty(\Omega)} \leqslant \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u_m \Vert_{\cL^\infty(\Omega)} = \Vert u_n - u_m \Vert_{\cW^{k,\infty}(\Omega)} < \varepsilon,
    \]
    para todo $n,m > n_0$ e $\alpha$ multi-índice com $|\alpha| \leqslant k$. Ou seja, $(D^\alpha u_n)$ é uma sequência de Cauchy em $\cL^p(\Omega)$, com $1 \leqslant p \leqslant \infty$, para cada $\alpha$ multi-índice com $|\alpha| \leqslant k$. Lembrando que $\cL^p(\Omega)$, com $1 \leqslant p \leqslant \infty$, é um espaço completo (ver Teorema \ref{thm:lp-completo-pre}), podemos escrever
    \begin{equation} \label{eq:Dalfaun}
        D^\alpha u_n \to u_\alpha \text{ em } \cL^p(\Omega).
    \end{equation}
    Em particular, se $\alpha = (0,\dots,0)$, denotamos $D^\alpha u_n$ por $u_n$ e $u_\alpha$ por $u$.
    Por fim, precisamos mostrar que
    \[
        D^\alpha u = u_\alpha.
    \]
Com efeito, pelo Teorema \ref{thm:teorema-do-brezis}, utlizando a definição de derivada fraca e passando a uma subsequência (se necessário), obtemos
    \[
        \begin{aligned}
            \int_\Omega u D^\alpha \phi \, dx 
            = \int_\Omega (\lim u_n) D^\alpha \phi 
            = \lim\! \int_\Omega u_n D^\alpha \phi \,dx
            &= \lim\, (-1)^{|\alpha|}\!\int_\Omega  D^\alpha u_n \phi\,dx \\
            &= (-1)^{|\alpha|}\!\int_\Omega \lim D^\alpha u_n \phi \,dx 
            = (-1)^{|\alpha|}\!\int_\Omega u_\alpha \phi \,dx,
        \end{aligned}
    \]
    para todo $\phi \in \cC^{\infty}_c(\Omega)$ e mult-índice $\alpha$ com $|\alpha| \leqslant k$.
    Portanto, $D^\alpha u = u_\alpha$.
    Por fim, se $1 \leqslant p < \infty$,
    \[
        \Vert u_n - u \Vert_{\cW^{k,p}(\Omega)}^p = \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u \Vert_{\cL^p(\Omega)}^p = \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - u_\alpha \Vert_{\cL^p(\Omega)}^p \to 0,
    \]
    e se $p = \infty$,
    \[
        \Vert u_n - u \Vert_{\cW^{k,\infty}(\Omega)} = \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - D^\alpha u \Vert_{\cL^\infty(\Omega)} = \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_n - u_\alpha \Vert_{\cL^\infty(\Omega)} \to 0,
    \]
    quando $n \to \infty$ por (\ref{eq:Dalfaun}).
    Consequentemente, $u_n \to u$ em $\cW^{k,p}(\Omega)$ quando $n \to \infty$, com $1 \leqslant p \leqslant \infty$.
\end{prf}

\section{Aproximações} \label{sec:aproximacoes}

% Não é ideal ficar voltando o tempo todo à definição de derivadas fracas. Para explorar as propriedades mais profundas dos espaços de Sobolev, precisamos de métodos sistemáticos para aproximar funções nesses espaços por funções suaves. A técnica de molificação, que envolve a convolução de uma função com uma função conhecida como função molificadora que é suave e tem suporte compacto, oferece essa ferramenta. Esse processo resulta em uma sequência de funções suaves que convergem para a função original no espaço de Sobolev, permitindo a aproximação de funções sem derivada bem definida por funções suaves. As funções molificadoras são essenciais na teoria dos espaços de Sobolev, possibilitando o estudo de soluções fracas para equações diferenciais parciais e estabelecendo resultados importantes de densidade.

A definição de derivada fraca, em muitos casos, não é suficiente para mostrar propriedades mais profundas dos espaços de Sobolev.
Uma forma de contornar esse problema é procurando formas de aproximar em $\cW^{k,p}$ por uma sequência de funções suaves.
Esse processo é conhecido como molificação ou regularização e é feito por meio de uma convolução da função a ser aproximada e uma função especial chamada função molificadora. 
Nesse capítulo, apresentaremos alguns resultados e exemplos da teoria de aproximação, que é de extrema importância no estudo de equações diferenciais parciais.

Um exemplo de função molificadora é
\begin{equation} \label{eq:molificador-friedrich}
    \eta(x) =
    \left\{
        \begin{array}{lr}
            c \exp \left( \frac{1}{|x|^2 - 1} \right), &\! \text{se }\; |x| < 1;\\
            0, &\!\text{se }\; |x| \geqslant 1,
        \end{array}
    \right.
\end{equation}
conhecida como molificador de Friedrich, onde $c > 0$ é uma constante tal que
\[
    \int_{\bR^n} \eta \,dx = 1.
\]
De forma geral, uma função molificadora é uma função $\eta$ de classe $\cC^\infty$ com suporte compacto satifazendo:
\begin{itemize}[leftmargin=*, label=\small{$\bullet$}]
    \item $\displaystyle \int_{\bR^n} \eta \,dx = 1$;
    \item $\displaystyle \lim_{\varepsilon \to 0} \varepsilon^{-n}\eta(x/\varepsilon) = \delta(x)$, onde $\delta$ é a função delta de Dirac\footnote{i.e., $\delta(x) = 
    \left\{  
        \begin{array}{ll}
            0 &\text{se } x \neq 0\\
            \infty &\text{se } x = 0.
        \end{array}
    \right.
    $}.
\end{itemize}
Dada uma função molificadora, para cada $\varepsilon > 0$, definimos
\begin{equation} \label{eq:eta-epsilon}
    \eta_\varepsilon(x) = \frac{1}{\varepsilon^n} \eta\left( \frac{x}{\varepsilon} \right), 
\end{equation}
para todo $x \in \bR^n$. Essa função $\eta_\varepsilon$ é de classe $\cC^\infty$, $\supp \eta_\varepsilon \subseteq B[0,\varepsilon]$ e, por mudança de variáveis
\begin{equation} \label{eq:integral1}
    \int_{\bR^n} \eta_\varepsilon \,dx = 1.
\end{equation}
Essa aplicação será utilizada para realizar as convoluções que aproximam as funções em $\cW^{k,p}(\Omega)$. Se $u$ é uma função locamente integrável, definimos a molificação de $u$ por $u^\varepsilon = \eta_\varepsilon * u$, isto é,
\[
    u^\varepsilon(x) = \int_\Omega \eta_\varepsilon(x-y) u(y) = \int_{B[0,\varepsilon]} \eta_\varepsilon(y) u(x-y) \,dy,
\]
para todo $x \in \bR^n$.

O primeiro teorema que vamos estudar demonstra algumas propriedades importantes sobre essas aproximações.

\begin{tbox}[Aproximação local por funções suaves] \label{thm:aprox1}
    Seja $u \in \cW^{k,p}(\Omega)$, com $1 \leqslant p < \infty$, e defina
    \[
        u^{\varepsilon} = \eta_{\varepsilon} * u \;\text{ em } \Omega_\varepsilon,
    \]
    onde
    \[
        \Omega_\varepsilon = \{ x \in \Omega \,; d(x,\partial\Omega) > \varepsilon\}.
    \]
    Então,
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $u^\varepsilon \in \cC^{\infty}(\Omega_\varepsilon)$, para cada $\varepsilon > 0$;
        \item $u^\varepsilon \to u$ em $\cW^{k,p}_{\mathrm{loc}}(\Omega)$, quando $\varepsilon \to 0$.
    \end{enumerate}
\end{tbox}
\begin{prf}
    ~

    \textbf{(a)} Seja $g(x) = (x-y)/\varepsilon $. Logo, pela regra da cadeia, chegamos a
    \begin{align}
        \dfrac{\partial}{\partial x_i} \big[\eta_\varepsilon(x-y)\big] &= \frac{1}{\varepsilon^n}\dfrac{\partial }{\partial x_i}\left[\eta\left( \frac{x - y}{\varepsilon} \right) \right]\label{eq:l} \\
        &=\frac{1}{\varepsilon^n} \frac{\partial}{\partial x_i} \big[ \eta \circ g(x) \big] = \frac{1}{\varepsilon^n} \sum_{k =1}^n \dfrac{\partial \eta}{\partial x_k}\left( \frac{x - y}{\varepsilon} \right) \dfrac{\partial g_k}{\partial x_i}(x) = \frac{1}{\varepsilon^{n+1}} \dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right), \nonumber
    \end{align}
    para todo $i = 1,\dots,n$. Por outro lado, sejam $x \in \Omega_\varepsilon$, $i = 1,\dots,n$ e $h$ de forma que $x + he_i \in \Omega_\varepsilon$. Deste modo,
    \begin{equation} \label{eq:m}
        \frac{u^\varepsilon(x + he_i) - u^\varepsilon(x)}{h} 
            = \frac{1}{\varepsilon^n} \int_\Omega \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] u(y) \,dy.
    \end{equation} 
    Novamente utilizando a regra da cadeia e (\ref{eq:l}), segue que
    \begin{equation} \label{eq:n}
        \begin{aligned}
            \frac{1}{h}\left[  \eta\left( \frac{x + he_i - y}{\varepsilon} \right) - \eta\left( \frac{x -y}{\varepsilon} \right) \right] &=
            \frac{\varepsilon^n}{h} \bigg[ \eta_\varepsilon (x-y + he_i) - \eta_\varepsilon(x-y) \bigg]\\
            &\to
            \varepsilon^n \frac{\partial\eta_\varepsilon}{\partial x_i} (x-y) =
            \frac{1}{\varepsilon}\dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right),
        \end{aligned}
    \end{equation}
    quando $h \to 0$. Consequentemente, por (\ref{eq:l}), (\ref{eq:m}), (\ref{eq:n}) e pelo Teorema da converência dominada (ver Teorema \ref{thm:teorema-da-convergencia-dominada}), temos que
    \[
        \dfrac{\partial u^\varepsilon}{\partial x_i}(x) = \int_\Omega \frac{1}{\varepsilon^{n+1}} \dfrac{\partial \eta}{\partial x_i}\left( \frac{x - y}{\varepsilon} \right) u(y) \,dy = \int_\Omega \dfrac{\partial \eta_\varepsilon}{\partial x_i} (x-y) u(y) \,dy = \frac{\partial \eta_\varepsilon}{\partial x_i} * u(x).
    \]
    Sendo assim,
    indutivamente, podemos mostrar que $D^\alpha u^\varepsilon$ existe e
    \[
        D^\alpha u^\varepsilon = D^\alpha\eta_\varepsilon * u,
    \]
    para todo multi-índice $\alpha$
    O fato de $u^\varepsilon$ ser de classe $\cC^\infty$ segue do fato de $\eta_\varepsilon$ ser de classe $\cC^\infty$ (por definição) e $u \in \cW^{k,p}(\Omega)$.

    \begin{figure}
        \centering
        \input{mollifiers/omegaepsilon.tex}
        \caption{Representação visual dos conjuntos $\Omega_\varepsilon$.\\Fonte: Autoral.}
    \end{figure}

    \textbf{(b)} Afirmamos que a $\alpha$-ésima derivada parcial de $u^\varepsilon$ no sentido usual é igual a convulução de $\eta_\varepsilon$ com a $\alpha$-ésima derivada parcial fraca de $u$ para todo $\alpha$ com $|\alpha| \leqslant k$, isto é,
    \[
        D^\alpha u^\varepsilon = \eta_\varepsilon * D^\alpha u.
    \]
    Com efeito, no item \textbf{(a)} vimos que $D^\alpha u^\varepsilon = D^\alpha \eta_\varepsilon * u$. Primeiramente, se $g(x) = x - y$, pela regra da cadeia, temos que
    \[
        D^{e_i}_x \eta_\varepsilon (x -y) = \dfrac{\partial}{\partial x_i} (\eta_\varepsilon \circ g)(x) = \sum_{k=1}^n \dfrac{\partial \eta_\varepsilon}{\partial x_k} (x - y) \dfrac{\partial g_k}{\partial x_i}(x) = \dfrac{\partial \eta_\varepsilon}{\partial x_i}(x-y).
    \]
    Por outro lado, se $h(y) = x - y$, obtemos, pela regra da cadeia novamente, que
    \[
        D^{e_i}_y \eta_\varepsilon (x-y) = \dfrac{\partial}{\partial y_i} (\eta_\varepsilon \circ h)(y) = \sum_{k=1}^n \dfrac{\partial \eta_\varepsilon}{\partial y_k} (x - y) \dfrac{\partial h_k}{\partial y_i}(y) = -\dfrac{\partial \eta_\varepsilon}{\partial y_i}(x-y).
    \]
    Dessa forma, ao menos de uma mudança de notação, chegamos a
    \[
        D^{e_i}_x \eta_\varepsilon (x-y) = -D^{e_i}_y \eta_\varepsilon (x-y).
    \]
    Repetindo esse cálculo $|\alpha|$ vezes, obtemos
    \[
        D^\alpha_x \eta_\varepsilon (x-y) = (-1)^{|\alpha|} D^\alpha_y \eta_\varepsilon (x-y).
    \]
    Deste modo, podemos escrever
    \[
        D^{\alpha} u^\varepsilon (x) = \int_\Omega D^\alpha_x \eta_\varepsilon (x-y) u(y) \,dy = (-1)^{|\alpha|} \int_\Omega D^{\alpha}_y \eta_\varepsilon (x-y) u(y) \,dy.
    \]
    Fixando $x \in \Omega_\varepsilon$, a função $\phi_x(y) =\eta_\varepsilon(x-y)$ é suave e tem suporte compacto em $\Omega$.
    Aplicando a definição de derivada fraca com função teste $\eta_\varepsilon(x-y)$, segue que
    \[
        D^\alpha u^\varepsilon(x) = (-1)^{|\alpha| + |\alpha|}  \int_\Omega \eta_\varepsilon(x-y) D^{\alpha} u(y) \,dy = \int_\Omega \eta_\varepsilon(x-y) D^\alpha u(y).
    \]
    Portanto, deduzimos que
    \begin{equation}
        D^\alpha u^\varepsilon = \eta_\varepsilon * D^\alpha u = [D^\alpha u]^\varepsilon.
    \end{equation}

    Além disso, afirmamos que dados abertos $V, W$ tais que $V \Subset W \Subset \Omega$, uma função $v \in \cL^p_\loc(\Omega)$ e $\varepsilon > 0$ suficientemente pequeno, inferimos
    \begin{equation} \label{eq:assss}
        \Vert v^\varepsilon \Vert_{\cL^p(V)} \leqslant \Vert v \Vert_{\cL^p(W)}.
    \end{equation}
    Com efeito, se $p = 1$, note que
    \[
        |v^\varepsilon(x)| =  \left| \int_{B[x,\varepsilon]} \eta_\varepsilon (x-y) v(y) \,dy \right| \leqslant \int_{B[x,\varepsilon]} |\eta_\varepsilon(x-y)| | v(y)| \,dy.
    \]
    Integrando sobre $V$ e utilizando o Teorema de Fubini (ver Teorema \ref{thm:fubini}), concluímos que
    \[
        \int_V |v^\varepsilon(x)| \,dx \leqslant \int_V  \int_{B[x,\varepsilon]} |v(y)||\eta_\varepsilon(x-y)| \, dydx \leqslant \int_W |v(y)| \int_{B[y,\varepsilon]} |\eta_\varepsilon (x-y)| dxdy.
    \]
    Porém, $\int_{B[y,\varepsilon]} \eta_\varepsilon(x- y) \,dx = 1$ (ver \ref{eq:integral1}); sendo assim, obtemos
    \[
        \Vert v^\varepsilon \Vert_{\cL^1(V)} \leqslant \Vert v \Vert_{\cL^1(W)}.
    \]
    Se $1 < p < \infty$, observe que
    \begin{equation} \label{eq:nn1}
        |v^\varepsilon(x)| = \left| \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) v(y) \,dy \right| \leqslant \int_{B[x,\varepsilon]} \left| \eta_\varepsilon^{1 - \frac{1}{p}} (x-y) \eta_\varepsilon^{\frac{1}{p}} (x-y) v(y) \right| \,dy.
    \end{equation}
    Utilizando a desigualdade de Hölder (ver Teorema \ref{thm:pre-desigualdade-de-holder}) na última integral acima, segue que
    {\small
        \begin{equation} \label{eq:nn2}
            \int_{B[x,\varepsilon]} \left| \eta_\varepsilon^{1 - \frac{1}{p}} (x-y) \eta_\varepsilon^{\frac{1}{p}} (x-y) v(y) \right| \,dy \leqslant \left( \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) dy \right)^{1 - \frac{1}{p}} \left( \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) |v(y)|^p \,dy \right)^{\frac{1}{p}}.
        \end{equation}
    }\!\!
    Lembrando que, $\int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) \,dy = 1$ (ver (\ref{eq:integral1})), integrando  as desigualdades (\ref{eq:nn1}) e (\ref{eq:nn2}) sobre $V$ e utilizando o Teorema de Fubini (ver Teorema \ref{thm:fubini}), obtemos
    \[
        \int_V |v^\varepsilon(x)|^p \,dx \leqslant \int_V \int_{B[x,\varepsilon]} \eta_\varepsilon(x-y) |v(y)|^p \,dy dx \leqslant \int_W |v(y)|^p \int_{B[y,\varepsilon]} \eta_\varepsilon(x-y) \,dxdy.
    \]
    Isto é,
    \begin{equation*}
        \Vert v^\varepsilon \Vert_{\cL^p(V)} \leqslant \Vert v \Vert_{\cL^p(W)}.
    \end{equation*}
    Isto prova \ref{eq:assss}.

    Por fim, seja $V \Subset \Omega$ um aberto. Afirmamos que
    \begin{equation}
        D ^\alpha u^\varepsilon \to D^\alpha u \text{ em } \cL^p(V),
    \end{equation}
    quando $\varepsilon \to 0$, para todo multi-índice $\alpha$ com $|\alpha| \leqslant k$.
    De fato, sejam $W$ um aberto de forma que $V \Subset W \Subset \Omega$ e $\delta > 0$. Utilizando (\ref{eq:assss}) com $v ^\varepsilon = D^\alpha u^\varepsilon$ e $v = D^\alpha u$, e escolhendo $w \in \cC(W)$ tal que
    \[
        \Vert D^\alpha u - w \Vert_{\cL^p(W)} < \delta,
    \]
    (ver Teorema \ref{thm:densidadeC}), temos que
    \[
        \begin{aligned}
            \Vert D^\alpha u^\varepsilon - D^\alpha u \Vert_{\cL^p(V)} 
            &\leqslant \Vert D^\alpha u^\varepsilon - w^\varepsilon \Vert_{\cL^p(V)} + \Vert w^\varepsilon - w \Vert_{\cL^p(V)} + \Vert w - D^\alpha u \Vert_{\cL^p(V)}\\
            &\leqslant \Vert D^\alpha u - w \Vert_{\cL^p(W)} + \Vert w^\varepsilon - w \Vert_{\cL^p(V)} + \Vert w - D^\alpha u \Vert_{\cL^p(W)}\\ 
            &\leqslant 2\delta + \Vert w^\varepsilon - w \Vert_{\cL^p(V)},
        \end{aligned}
    \]
    para todo $\alpha$ multi-índice com $|\alpha| \leqslant k$.
    Como $w \in \cC(W)$, então $w^\varepsilon \to w$ uniformemente\footnote{Uma sequência de funções $(w_k)$ converge uniformemente para $w$, se, dado $\varepsilon > 0$, existe $K \in \bN$ (que não pode depender de $x$) tal que
    \[
        | w_k(x) - w(x) | < \varepsilon,
    \]
    para todo $x$ e $k > K$.
    } em $V$ quando $\varepsilon \to 0$. 
    Portanto, $D^\alpha u^\varepsilon \to D^\alpha u$ em $\cL^p(V)$, quando $\varepsilon \to 0$, para todo $\alpha$ multi-índice com $|\alpha| \leqslant k$ (basta utilizar o Teorema da Convergência Dominada).
    Dessa forma,
    \[
        \Vert u^\varepsilon - u \Vert^p_{\cW^{k,p}(V)} = \sum_{|\alpha| \leqslant k} \Vert D^\alpha u^\varepsilon - D^\alpha u \Vert^p_{\cL^p(V)} \to 0,
    \]
    quando $\varepsilon \to 0$. Portanto, $u^\varepsilon \to u$ em $\cW^{k,p}(V)$, quando $\varepsilon \to 0$, para todo $V \Subset \Omega$. Isto é,
    \[
        u^\varepsilon \to u \text{ em } \cW^{k,p}_\loc(\Omega),
    \]
    quando $\varepsilon \to 0$.
\end{prf}

Agora, apresentaremos dois exemplos em que podemos visualizar essas aproximações graficamente.

\begin{ex}
    A função $u(x) = |x|$ definida no intervalo aberto $\Omega = (-1,1) \subseteq \bR$ é um exemplo clássico de função que não é diferenciável no sentido usual. É fácil verificar que $u \in \cW^{1,p}(\Omega)$. Com efeito, dada uma função teste $\phi \in \cC^\infty_c(\Omega)$ temos que
    \[
        \int_\Omega u \phi' \,dx = \int_{\text{-}1}^1 u \phi' \,dx = \int_{\text{-}1}^0 u \phi' \,dx + \int_0^1 u \phi' \,dx.
    \]
    Utlizando integração por partes (ver Teorema \ref{thm:integracao-por-partes}), obtemos
    \[
        \int_\Omega u \phi'\,dx =  - \int_{\m1}^0 -\phi \,dx  - \int_0^1 \phi \,dx -x \phi \bigg|^{0}_{\m1}+ x\phi \bigg|_0^1 = -\int_{\m1}^{0} - \phi \,dx -\int_0^1 \phi \,dx - \phi(-1) + \phi(1).
    \]
    Porém, $\phi$ tem suporte compacto, logo; se anula em $\partial\Omega = \{-1,1\}$. Dito isso, podemos escrever
    \[
        \int_\Omega u \phi'\,dx = - \int_{\text{-}1}^0 -\phi \,dx - \int_0^1 \phi \,dx = -\int_\Omega \sgn(x)\phi \,dx.
    \]
    Portanto, é verdade que
    \[
        u'= \sgn
    \]
    no sentido fraco, onde
    \[
        \sgn(x) = 
        \left\{ 
            \begin{array}{rr}
                1, &\!\text{se }\; x > 0;\\
                0, &\!\text{se }\; x = 0;\\
                -1,&\!\text{se }\; x < 0.
            \end{array}
        \right.
    \]
    Além disso, é verdade que
    \[
        \int_\Omega |\sgn(x)|^p \,dx = \int_{\text{-}1}^1 1^p \,dx =  \mu((-1,1)) = 2 < \infty,
    \]
    onde $\mu$ é a medida de Lebesgue (ver \cite{axler-measure.theory} para mais detalhes). Assim, $u'\in \cL^p(\Omega)$ e, portanto, $u \in \cW^{1,p}(\Omega)$ para $1 \leqslant p < \infty$.
    Vamos utiizar a convolução para encontrar uma aproximação suave de $u$. 
    Seja $\eta : \bR \to \bR$ dada por
    \[
        \eta(x) = \left\{ 
            \begin{array}{lr}
                c \exp\left(\frac{1}{x^2 - 1} \right), & \text{se }\; |x| \leqslant 1;\\
                0, & \text{se }\; |x| > 1,
            \end{array}
        \right.
    \]
    (ver Figura \ref{fig:eta})
    onde $c$ é determinado de forma que
    \[
        \int_{\bR} \eta \,dx = 1,
    \]
    isto é,
    \[
        c = \left( \int_{[-1,1]} \exp \left(\frac{1}{x^2 - 1} \right) \, dx\right)^{-1}.
    \]
    Infelizmente, a função $\eta$ não tem primitiva que pode ser expressa por meio de funções elementares, então é necessário utilizar um método numérico, ou expansão em Taylor para calcular a constante $c$.
    Também, definimos a função molificadora $\eta_\varepsilon : \bR \to \bR$ por
    \[
        \eta_\varepsilon(x) = \frac{1}{\varepsilon} \eta\left( \frac{x}{\varepsilon} \right).
    \]
    para todo $x \in \bR^n$. Note que
    \[
        \int_\bR \eta_\varepsilon \, dx = 1 \;\text{ e }\; \supp \eta = [-\varepsilon,\varepsilon].
    \]
    Portanto, podemos utilizar essa função para aproximar $u$. Com efeito, basta realizar a convolução $\eta_\varepsilon * u$, isto é,
    \[
        u^\varepsilon(x) = \int_{[-\varepsilon,\varepsilon]} \eta_\varepsilon(x) u(x-y) \,dy.
    \]
    A Figura \ref{fig:convolucao} foi feita utilizando um método numérico para resolver essa integral para diferentes valores de $\varepsilon$.

    \begin{figure}
        \centering
        \input{mollifiers/abs(x)-mollifiers.tex}
        \caption{Aproximações suaves da função $|x|$ (em preto) por meio da convolução com uma função molificadora $\eta_\varepsilon$ com $\varepsilon = 1, 0.5, 0.25$.\\Fonte: Autoral.}
        \label{fig:convolucao}
    \end{figure}

    \begin{figure} 
        \centering
        \begin{tikzpicture}
            \begin{scope}[shift={(-4,0)}, scale=0.8]
                \draw[black!30] (-4,-4) grid (4,4);
                \draw[thick, black!60, -stealth] (-4,0) to (4,0); 
                \draw[thick, black!60, -stealth] (0,-4) to (0,4); 
                \draw[domain=-0.9999:0.9999, variable=\x, samples=50, smooth, ultra thick, tangerine!90!black] plot ({\x}, {2.257 * exp(-1 / (1 - (\x * \x)))});
                \draw[ultra thick, tangerine!90!black] (-1,0) -- (-3,0);
                \draw[ultra thick, tangerine!90!black] (1,0) -- (3,0);
            \end{scope}

            \begin{scope}[shift={(4,0)}, scale=0.8]
                \draw[black!30] (-4,-4) grid (4,4);
                \draw[thick, black!60, -stealth] (-4,0) to (4,0); 
                \draw[thick, black!60, -stealth] (0,-4) to (0,4); 
                \draw[domain=-0.299:0.299, variable=\x, samples=50, smooth, ultra thick, tangerine!90!black] plot ({\x}, {(1/0.3) * 2.257 * exp(-1 / (1 - ((\x / 0.3) * (\x / 0.3))))});
                \draw[ultra thick, tangerine!90!black] (-0.3,0) -- (-3,0);
                \draw[ultra thick, tangerine!90!black] (0.3,0) -- (3,0);
            \end{scope}
        \end{tikzpicture}
        \caption{Funções $\eta$ e $\eta_{\varepsilon}$ com $\varepsilon = 0.3$.\\ Fonte: Autoral.}
        \label{fig:eta}
    \end{figure}
\end{ex}

\begin{ex}
    Seja $\Omega = (-1,1) \times (-1,1) \subseteq \bR^2$. A função $u : \Omega \to \bR$ dada por
    \[
        u(x_1,x_2) = |x_1|^{\frac{1}{2}} + |x_2|^{\frac{1}{2}},
    \]
    não possui derivada no sentido usual pelo fato de $|\,\cdot\,|$ não ser diferenciável.
    Por outro lado, $u$ possui derivadas parciais fracas em $\cL^p(\Omega)$, quando $0 < p < 2$, dada por
    \[
        D^{e_i}u(x_1,x_2) = \frac{1}{2}\sgn(x_i) |x_i|^{-\frac{1}{2}},
    \]
    para todo $i = 1,2$.
    Com efeito, vamos calcular a derivada parcial fraca em relação a $i$-ésima coordenada. Utilizando integração por partes (ver Teorema \ref{thm:integracao-por-partes}), obtemos
    \begin{equation} \label{eq:derivada-fraca-exemplo-legal}
        \int_\Omega u D^{e_i} \phi \,dx = \int_{\partial\Omega} u \phi \nu^i \,ds - \int_\Omega \phi D^{e_i}u \,dx,
    \end{equation}
    onde $\phi \in \cC^\infty_c(\Omega)$ e $\nu = (\nu_1, \nu_2)$ é o vetor normal unitário que aponta para fora em $\partial \Omega$.
    Para calcular $D^{e_i} u$ precisamos dividir o domínio $\Omega$ em $\Omega_1$, $\Omega_2$, $\Omega_3$ e $\Omega_4$, onde $\Omega_i$ é a restrição ao $i$-ésimo quadrante (ver Figura \ref{fig:dominio}).
    \begin{figure}[H]
        \centering
        \begin{tikzpicture}
            \filldraw[tangerine!30] (2,2) rectangle (0,0);
            \filldraw[tangerine!30] (-2,-2) rectangle (0,0);
            \filldraw[tangerine!40] (-2,2) rectangle (0,0);
            \filldraw[tangerine!40] (2,-2) rectangle (0,0);
            
            \draw[thick] (2,2) rectangle (-2,-2);
            \draw[very thick, -stealth] (-3,0) to (3,0) node [right] {$x_1$};
            \draw[very thick, -stealth] (0,-3) to (0,3) node [above] {$x_2$};
        
            \node[align=center] at (1,1) {
                $\Omega_1$\\
                $x_1 > 0$\\
                $x_2 > 0$
            };
        
            \node[align=center] at (-1,1) {
                $\Omega_2$\\
                $x_1 < 0$\\
                $x_2 > 0$
            };
        
            \node[align=center] at (1,-1) {
                $\Omega_4$\\
                $x_1 > 0$\\
                $x_2 < 0$
            };
        
            \node[align=center] at (-1,-1) {
                $\Omega_3$\\
                $x_1 < 0$\\
                $x_2 < 0$
            };
        
            \filldraw (0,2) circle (0.05);
            \filldraw (0,-2) circle (0.05);
            \filldraw (2,0) circle (0.05);
            \filldraw (-2,0) circle (0.05);
        
            \node[below right] at (2,0) {$1$};
            \node[above right] at (0,2) {$1$};
            \node[above left] at (-2,0) {$-1$};
            \node[below left] at (0,-2) {$-1$};
        \end{tikzpicture}
        \caption{Domínio da função $u(x_1,x_2) = |x_1|^{\frac{1}{2}} + |x_2|^{\frac{1}{2}}$.\\
        Fonte: Autoral.}
        \label{fig:dominio}
    \end{figure}
    % Note que em $\Omega_1 = (0,1) \times (0,1)$, $u(x_1,x_2) = x_1^{\frac{1}{2}} + x_2^{\frac{1}{2}}$. Logo, nesse conjunto $D^{e_i} u$ existe no sentido usual e é dada por
    % \[
    %     D^{e_i} u = \frac{1}{2} x_i^{-\frac{1}{2}}.
    % \]
    % De forma análoga, deduzimos que
    % \[
    %     \begin{array}{ll}
    %         D^{e_i} u(x_1,x_2) = \frac{1}{2} (-x_i)^{-\frac{1}{2}}, &\text{ em } \Omega_2 \text{ e } \Omega_3, \\
    %         D^{e_i} u(x_1,x_2) = \frac{1}{2} x_i^{-\frac{1}{2}}, &\text{ em } \Omega_4.
    %     \end{array}
    % \]
    Note que, podemos escrever
    \begin{equation}
        u(x_1,x_2) =
        \left\{
            \begin{array}{lr}
                x_1^{\frac{1}{2}} + x_2^{\frac{1}{2}}, &\;\text{ em } \Omega_1;\\
                (-x_1)^{\frac{1}{2}} + x_2^{\frac{1}{2}}, &\;\text{ em } \Omega_2;\\
                (-x_1)^{\frac{1}{2}} + (-x_2)^{\frac{1}{2}}, &\;\text{ em } \Omega_3;\\
                x_1^{\frac{1}{2}} + (-x_2)^{\frac{1}{2}}, &\;\text{ em } \Omega_4.\\
            \end{array}
        \right.
    \end{equation}
    Além disso, em cada $\Omega_i$, a derivada parcial $D^{e_1}u$ existe no sentido usual, e é dada por
    \begin{equation}
        D^{e_1}u(x_1,x_2) =
        \left\{
            \begin{array}{lr}
                \frac{1}{2}x_1^{-\frac{1}{2}}, &\;\text{ em } \Omega_1;\\
                -\frac{1}{2}(-x_1)^{-\frac{1}{2}}, &\;\text{ em } \Omega_2;\\
                -\frac{1}{2}(-x_1)^{-\frac{1}{2}}, &\;\text{ em } \Omega_3;\\
                \frac{1}{2}x_1^{-\frac{1}{2}}, &\;\text{ em } \Omega_4.\\
            \end{array}
        \right.
    \end{equation}
    Dito isso, concluímos que
    \[
        \int_\Omega \phi D^{e_1}u \,dx = \int_{\Omega_1}  \frac{1}{2} x_1^{-\frac{1}{2}}\phi \,dx - \int_{\Omega_2} \frac{1}{2} (-x_1)^{-\frac{1}{2}} \phi \,dx - \int_{\Omega_3} \frac{1}{2} (-x_1)^{-\frac{1}{2}} \phi \,dx + \int_{\Omega_4} \frac{1}{2} x_1^{-\frac{1}{2}} \phi \,dx,
    \]
    que podemos escrever como
    \[
        \int_\Omega \phi D^{e_1} u \,dx = \int_{\Omega_1 \cup \Omega_4}  \frac{1}{2} x_1^{-\frac{1}{2}}\phi \,dx - \int_{\Omega_2 \cup \Omega_3} \frac{1}{2} (-x_1)^{-\frac{1}{2}} \phi \,dx = \frac{1}{2}\int_\Omega \sgn(x_1) |x_1|^{-\frac{1}{2}} \phi \,dx.
    \]
    De forma análoga, inferimos que
    \begin{equation}
        D^{e_2}u(x_1,x_2) =
        \left\{
            \begin{array}{lr}
                \frac{1}{2}x_2^{-\frac{1}{2}}, &\;\text{ em } \Omega_1;\\
                \frac{1}{2}x_2^{-\frac{1}{2}}, &\;\text{ em } \Omega_2;\\
                -\frac{1}{2}(-x_2)^{-\frac{1}{2}}, &\;\text{ em } \Omega_3;\\
                -\frac{1}{2}(-x_2)^{-\frac{1}{2}}, &\;\text{ em } \Omega_4.\\
            \end{array}
        \right.
    \end{equation}
    Sendo assim, deduzimos que
    \[
        \int_\Omega \phi D^{e_2} u \,dx = \int_{\Omega_1 \cup \Omega_2}  \frac{1}{2} x_2^{-\frac{1}{2}}\phi \,dx - \int_{\Omega_3 \cup \Omega_4} \frac{1}{2} (-x_2)^{-\frac{1}{2}} \phi \,dx = \frac{1}{2}\int_\Omega \sgn(x_2) |x_2|^{-\frac{1}{2}} \phi \,dx.
    \]
    Por fim, como $\phi$ tem suporte compacto em $\Omega$ (e $\Omega$ é aberto), $\phi$ se anula em $\partial\Omega$.
    Dessa forma, inferimos que
    \[
        \int_{\partial\Omega} u \phi \nu^i \,ds = 0.
    \]
    Portanto, por (\ref{eq:derivada-fraca-exemplo-legal}), chegamos a
    \[
        \int_\Omega  u D^{e_i} \phi \,dx = - \int_\Omega \frac{1}{2}\sgn(x_i) |x_i|^{-\frac{1}{2}} \phi \,dx,
    \]
    para todo $i=1,2$.
    Isto é,
    \[
        D^{e_i} u(x_1,x_2) = \frac{1}{2}\sgn(x_i) |x_i|^{-\frac{1}{2}},
    \]
    para todo $i = 1,2$, como queriamos mostrar.
    Além disso, podemos escrever
    \[
        \int_\Omega |D^{e_i} u (x_1,x_2)|^p \, dx = \int_{\text{-}1}^1 \int_{\text{-}1}^1 \left| \frac{1}{2} \sgn(x_i) |x_i|^{-\frac{1}{2}} \right|^p \, dx_i dx_j = \frac{1}{2^p}\int_{\text{-}1}^1 \int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i dx_j.
    \]
    Utilizando o Teorema de Fubini (ver Teorema \ref{thm:fubini}), encontramos
    {\small
    \[
        \int_\Omega |D^{e_i} u (x_1,x_2)|^p \, dx = \frac{1}{2^p}\int_{\text{-}1}^1 dx_j \int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i = \frac{1}{2^{p-1}} \int_{\text{-}1}^1 |\sgn(x_i)|^p |x_i|^{-\frac{p}{2}} \,dx_i.
    \]}\!
    Dito isso, precisamos ver para quais valores de $p$ essa integral é finita. Sendo assim
    \[
        \int_\Omega |D^{e_i} u (x_1,x_2)|^p \, dx = \frac{1}{2^{p-2}}\int_0^1 x_i^{-\frac{p}{2}} \,dx = \frac{1}{2^{p-2}} \left[ -\frac{1^{-\frac{p}{2}+1} - 0^{-\frac{p}{2}+1}}{\tfrac{p}{2} - 1} \right] = \frac{1}{2^{p-2}\left( 1 - \frac{p}{2} \right)}.
    \]
    Note que, a igualdade acima está bem definida quando $p < 2$. Portanto, $u \in \cW^{1,p}(\Omega)$ desde que $0 < p < 2$.

    Agora defina $\eta: \bR^2 \to \bR$ por
    \[
        \eta(x) = 
        \left\{ 
            \begin{array}{lr}
                c \exp\left(\frac{1}{\Vert x \Vert^2 - 1} \right), & \text{se } \Vert x \Vert < 1;\\
                0, & \text{se } \Vert x \Vert \geqslant 1,
            \end{array}
        \right.
    \]
    (ver Figura \ref{fig:eta-R2}) e $\eta_\varepsilon$ da mesma forma que foi feita no exemplo anterior. Novamente utilizaremos a convolução para encontrar uma aproximação suave para $u$, dada por
    \[
        u^{\varepsilon}(x_1,x_2) = \int_\Omega \eta(x_1,x_2) u(x_1 - y_1, x_2 - y_2) \,dy.
    \]

    Utilizando um método numérico para integrais duplas, podemos encontrar uma solução aproximada para $u^\varepsilon$.
    A Figura \ref{fig:aproximacao-suave-R2} mostra o gráfico de $u$, onde é possível ver os pontos onde a função não é diferenciável, e a sua aproximação suave $u^\varepsilon$.

    \begin{figure}
        \centering
        \includegraphics[width=0.4\textwidth]{2η.pdf}
        \hspace{10mm}
        \includegraphics[width=0.4\textwidth]{2ηε.pdf}
        \caption{$\eta$ e $\eta_\varepsilon$ com $\varepsilon = 0.5$.\\Fonte: Autoral.}
        \label{fig:eta-R2}
    \end{figure}

    \begin{figure}
        \centering
        \includegraphics[width=0.4\textwidth]{u.pdf}
        \hspace{10mm}
        \includegraphics[width=0.4\textwidth]{uε2.pdf}
        \caption{À esquerda, a função $u(x_1,x_2) = |x_1|^{\frac{1}{2}} + |x_2|^{\frac{1}{2}}$ e à direita sua aproximação\\suave $u^\varepsilon$ com $\varepsilon = 0.25$.\\Fonte: Autoral.}
        \label{fig:aproximacao-suave-R2}
    \end{figure}
\end{ex}

Agora, mostraremos que $\cC^{\infty}(\Omega) \cap \cW^{k,p}(\Omega)$ é um conjunto denso em $\cW^{k,p}(\Omega)$, sempre que 

\begin{tbox}[Meyers-Serrin] \label{thm:aprox-2}
    Sejam $\Omega$ um aberto limitado e $u \in \cW^{k,p}(\Omega)$, com $1 \leqslant p < \infty$.
    Então, existe uma sequência $(u_n) \subseteq \cC^{\infty}(\Omega) \cap \cW^{k,p}(\Omega)$ tal que
    \[
        u_n \to u \;\text{ em } \cW^{k,p}(\Omega),
    \] 
    quando $n \to \infty$.
\end{tbox}
\begin{prf}
    Primeiramente, temos que
    \begin{equation} \label{eq:omegai}
        \Omega = \bigcup_{i=1}^\infty \Omega_i,
    \end{equation}
    onde $\Omega_i = \{x \in \Omega \,; d(x, \partial\Omega) > \tfrac{1}{i}\}$ (ver Figura \ref{fig:omegai}). De fato,
    se $x \in \bigcup_{i=1}^\infty \Omega_i$, então $x \in \Omega_{i_0}$ para algum $i_0 \in \bN$, em particular, $x \in \Omega$ pois $\Omega_i \subseteq \Omega$ para todo $i \in \bN$.
    Por outro lado, se $x \in \Omega$, então $d(x,\partial \Omega) > 0$ (pois $\partial\Omega$ é fechado e $x \not\in \partial\Omega$), então existe algum $i_0 \in \bN$ tal que $d(x, \partial \Omega) > \frac{1}{i_0}$; logo, $x \in \Omega_{i_0}$. Dessa forma, $x \in \bigcup_{i=1}^\infty \Omega_i$.
    Portanto, vale (\ref{eq:omegai}). 
    \begin{figure}
        \centering
        \input{mollifiers/omega_i.tex}
        \caption{Representação visual dos conjuntos $\Omega_i$.\\Fonte: Autoral.}
        \label{fig:omegai}
    \end{figure}
    
    Defina $\Omega'_i = \Omega_{i+3} \setminus \overline{\Omega_{i+1}}$ (ver Figura \ref{fig:omegaii}).
    Além disso, escolha qualquer aberto $\Omega'_0 \Subset \Omega$ de forma que
    \[
        \Omega = \bigcup_{i=0}^\infty \Omega'_i
    \]
    \begin{figure}
        \centering
        \input{mollifiers/omegal_i.tex}
        \caption{Representação visual (em azul) dos conjuntos $\Omega'_i$.\\Fonte: Autoral.}
        \label{fig:omegaii}
    \end{figure}
    e seja $\{\phi_i\}_{i=0}^\infty$ uma partição da unidade suave subordinada à cobertura aberta\footnote{i.e., Uma cobertura de um conjunto $X$ é uma família $\{Y_\lambda\}_{\lambda\in L}$, tal que $X \subseteq \bigcup_{\lambda \in L} Y_\lambda$. $\{Y_\lambda\}$ é dita uma cobertura aberta se $Y_\lambda$ é aberto para todo $\lambda \in L$.} $\{\Omega'_i\}_{i=0}^\infty$, isto é,
    \[
       0 \leqslant \phi_i \leqslant 1 \text{ com } \phi_i \in \cC^\infty_c(\Omega'_i) \;\text{ e }\; \sum_{i=0}^\infty \phi_i = 1 \text{ em } \Omega.
    \]
    Como, por hipótese, $u \in \cW^{k,p}(\Omega)$, temos, pelo Teorema \ref{thm:propriedades-derivada-fraca}, que
    \[
        \phi_i u \in \cW^{k,p}(\Omega).
    \]
    Além disso, $\supp(\phi_i u) \subseteq \Omega'_i$.
    Fixando $\delta > 0$, escolha um $\varepsilon_i > 0$ de forma que $u^i := \eta_{\varepsilon_i} * \phi_i u \in \cC^{\infty}(\Omega) \cap \cW^{k,p}(\Omega)$ satisfaça
    \[
        \Vert u^i - \phi_i u \Vert_{\cW^{k,p}(\Omega)} \leqslant \frac{\delta}{2^{i+1}} \;\text{ e }\; \supp u^i \subseteq \Omega''_i,
    \]
    (ver Teorema \ref{thm:aprox1}),
    com $\Omega''_i = \Omega_{i+4} \setminus \overline{\Omega_{i}} \supseteq \Omega'_i$ .

    Seja $v = \sum_{i=1}^\infty u^i \in \cC^{\infty}(\Omega) \cap \cW^{k,p}(\Omega)$.
    Como 
    \[
        u = u \sum_{i=1}^\infty \phi_i = \sum_{i=1}^n \phi_i u,
    \]
    então, para cada $V \Subset \Omega$, inferimos que
    \[
        \Vert v - u \Vert_{\cW^{k,p}(V)} \leqslant \sum_{i=1}^\infty \Vert u^i - \phi_i u \Vert_{\cW^{k,p}(\Omega)} \leqslant \sum_{i=1}^\infty \frac{\delta}{2^{i+1}} = \frac{\delta}{2}.
    \]
    Passando ao supremo sobre os conjuntos $V \Subset \Omega$, obtemos
    \[
        \Vert v - u \Vert_{\cW^{k,p}(\Omega)} \leqslant \frac{\delta}{2} < \delta.
    \]
    Isto mostra que $u$ pertence ao fecho de $\cC^\infty(\Omega) \cap \cW^{k,p}(\Omega)$ em $\cW^{k,p}(\Omega)$. Logo é equivalente a existir uma sequência $(u_n) \subseteq \cC^\infty(\Omega) \cap \cW^{k,p}(\Omega)$ tal que $u_n \to u$ em $\cW^{k,p}(\Omega)$, quando $n \to \infty$.
\end{prf}

A definição abaixo é necessária para o próximo resultado de densidade.

\begin{dbox} \label{def:fronteira-ck}
    Sejam $\Omega \subseteq \bR^n$ um aberto limitado e $k \in \bN$. 
    Dizemos que sua fronteira $\partial \Omega$ é de classe $\cC^k$ se para cada ponto $\tilde x \in \partial \Omega$ existe um raio $r > 0$ e uma função de classe $\cC^k$ $\gamma : \bR^{n-1} \to \bR$ tal que, fazendo uma mudança de coordenadas se necessário, obtemos
    \[
        \Omega \cap B[\tilde x,r] = \{x \in B[\tilde x,r] \,; x_n > \gamma(x_1,\dots,x_{n-1})\}.
    \]
    De forma análoga, $\partial\Omega$ é de classe $\cC^\infty$ se é de classe $\cC^k$ para todo $k \in \bN$.
\end{dbox}

\begin{figure}
    \centering
    \begin{tikzpicture}[scale=1.5]
        \draw[thick, dashed, tangerine!30!black, fill=tangerine!40] (-2.076,1.929) .. controls (-1.374,-0.882) and (-0.462,2.304) .. (0.81,1.5) .. controls (2.112,0.549) and (2.121,1.836) .. (2.136,1.941) to (2.136,1.929);
    
        \draw[thick, -stealth, draw=black!70] (-2.2,0) to (2.2,0) node[right] {$\mathbb R^{n-1}$};
        \draw[thick, -stealth, draw=black!70] (0,-1) to (0,2.1) node[above] {$x_n$};
    
        \draw[stealth-stealth, thick, tangerine!50!black, font=\small] (0.5616,0) to node[right] {$\gamma(x_1,\dots,x_{n-1})$} (0.5616,1.6102);
        \node[below=2pt,font=\footnotesize, fill=white] at (0.5616,0) {$(x_1,\dots,x_{n-1})$};
        \filldraw (0.5616,0) circle (0.03);

        \node[tangerine!50!black] at (-1.419,1.524) {$\Omega$};
        \node[tangerine!50!black] at (-0.5,0.8) {$\partial\Omega$};
    \end{tikzpicture}
    \caption{Função $\gamma$ da Definição \ref{def:fronteira-ck}.\\
    Fonte: Autoral. Baseada em \cite{evans-pde} p.p. 626.}
\end{figure}

Com essa definição, conseguimos mostrar que $\cC^{\infty}(\overline{\Omega})$ é denso em $\cW^{k,p}(\Omega)$.

\begin{tbox} \label{thm:aprox3}
    Sejam $\Omega$ um aberto limitado com fronteira de classe $\cC^1$ e $u \in \cW^{k,p}(\Omega)$, com $1 \leqslant p < \infty$.
    Então, existe uma sequência $(u_n) \subseteq \cC^\infty(\overline\Omega)$ tal que
    \[
        u_n \to u \;\text{ em } \cW^{k,p}(\Omega),
    \]
    quando $n \to \infty$.
\end{tbox}
\begin{prf}
    Seja $\tilde x \in \partial \Omega$, como $\Omega$ tem fronteira de classe $\cC^1$, existe um raio $r > 0$ e uma função $\gamma : \bR^{n-1} \to \bR$ de classe $\cC^1$ tal que
    \begin{equation} \label{eq:E}
        \Omega \cap B[\tilde x, r] = \{x \in B[\tilde x, r] \,; x_n > \gamma(x_1,\dots,x_{n-1})\}.
    \end{equation}
    Definimos $V = \Omega \cap B[\tilde x, \sfrac{r}{2}]$ (ver Figura \ref{fig:conjunto-demonstracao-aprox-3}).
    Além disso, definimos para cada $\varepsilon > 0$, $\lambda > 0$ e $x \in V$
    \begin{equation} \label{eq:D}
        x^\varepsilon = x + \lambda \varepsilon e_n = (x_1,\dots,x_{n-1}, x_n + \lambda\varepsilon),
    \end{equation}
    onde $x = (x_1,\dots,x_n)$.
    Observe que, para um $\lambda > 0$ suficientemente grande e $\varepsilon > 0$ suficientemente pequeno, a bola $B[x^\varepsilon\!,\varepsilon]$ está contída em $\Omega \cap B[\tilde x,r]$ para todo $x \in V$.
    De fato, por definição, dado $x \in V$ temos que $x \in \Omega$ e $\Vert x - \tilde x \Vert \leqslant \sfrac{r}{2}$.
    Note que $x^\varepsilon \in \Omega \cap B(\tilde x, r)$ para todo $\varepsilon > 0$ suficientemente pequeno e $\lambda > 0$ suficientemente grande.
    Com efeito, como $x \in V$, então, $x \in \Omega \cap B[\tilde x, r]$, por \ref{eq:E}. Assim,
    \[
        x^\varepsilon_n = x_n + \lambda \varepsilon > x_n >  \gamma(x_{1},\dots,x_{n-1}),
    \]
    e, por (\ref{eq:D}), deduzimos que
    \[
        \Vert x^\varepsilon - \tilde x \Vert = \Vert x + \lambda \varepsilon e_n - \tilde x \Vert \leqslant \Vert x - \tilde x \Vert + \Vert \lambda \varepsilon e_n  \Vert \leqslant \frac{r}{2} + \lambda\varepsilon < r,
    \]
    fornecido que $0 <\varepsilon < \sfrac{r}{2\lambda}$.
    Logo, $x^\varepsilon \in \Omega \cap B(\tilde x, r)$ para todo $\varepsilon > 0$ suficientemente pequeno (pois $\Omega$ é aberto e $x \in \Omega$).
    Por isso,
    $B[x^\varepsilon\!, \varepsilon] \subseteq \Omega \cap B[\tilde x,r]$, diminuindo $\varepsilon > 0$ se necessário (já que $\Omega \cap B(\tilde x, r)$ é aberto).
    \begin{figure}
        \centering
        \input{mollifiers/bola.tex}
        \caption{Fonte: Autoral. Baseada em \cite{evans-pde} p.p. 253}
        \label{fig:conjunto-demonstracao-aprox-3}
    \end{figure}

    Agora, definimos $u_\varepsilon(x) = u(x^\varepsilon)$, para todo $x \in V$, e $v^\varepsilon = \eta_\varepsilon * u_\varepsilon$. Assim, pelo Teorema \ref{thm:aprox1}, $v^\varepsilon \in \cC^{\infty}(\overline{V})$ (lembre que $\lambda > 0$ e grande e $\varepsilon > 0$ é pequeno). 
    Dito isso, afirmamos que
    \[
        \Vert v^\varepsilon - u \Vert_{\cW^{k,p}(V)} \to 0,
    \]
    quando $\varepsilon \to 0$.
    De fato, seja $\alpha $ um multi-índice com $|\alpha| \leqslant k$, então
    \[
        \Vert D^\alpha v^\varepsilon - D^\alpha u \Vert_{\cL^p(V)} \leqslant \Vert D^\alpha v^\varepsilon - D^\alpha u_\varepsilon \Vert_{\cL^p(V)} + \Vert D^\alpha u_\varepsilon - D^\alpha u \Vert_{\cL^p(V)}.
    \]
   A segunda norma do lado direito da desigualdade acima vaí a $0$, quando $\varepsilon \to 0$, pois a translação é contínua na norma do espaço $\cL^p$ e
    \[
        \Vert D^\alpha v^\varepsilon - D^\alpha u_\varepsilon \Vert_{\cL^p(V)} = \Vert D^\alpha (\eta_\varepsilon * u_\varepsilon) - D^\alpha u_\varepsilon \Vert_{\cL^p(V)} \to 0,
    \]
    quando $\varepsilon \to 0$ (ver Teorema \ref{thm:aprox1}). Ou seja, é verdade que
    \[
        \begin{aligned}
            \Vert v^\varepsilon - u \Vert_{\cW^{k,p}(V)} &= \sum_{|\alpha| \leqslant k} \Vert D^\alpha v^\varepsilon - D^\alpha u \Vert_{\cL^p(V)} \\
            &\leqslant \sum_{|\alpha| \leqslant k} \Vert D^\alpha v^\varepsilon - D^\alpha u_\varepsilon \Vert_{\cL^p(V)} + \sum_{|\alpha| \leqslant k} \Vert D^\alpha u_\varepsilon - D^\alpha u \Vert_{\cL^p(V)} \to 0,
        \end{aligned}
    \]
    quando $\varepsilon \to 0$.

    Note que todos os cálculos foram feitos em uma vizinhança de um ponto $\tilde x \in \partial\Omega$. Dito isso, como $\partial \Omega$ é compacto (pois, $\Omega$ é limitado), pelo Teorema de Heine-Borel\footnote{Toda cobertura aberta de um conjunto compacto admite uma subcobertura finita.}, podemos encontrar uma quantidade finita de pontos $\tilde x_i \in \partial \Omega$, raios $r_i > 0$, conjuntos $V_i = \Omega \cap B[\tilde x_i,\sfrac{r_i\,}{2}]$ e funções $v_i^\varepsilon$, com $i = 1,\dots,N \in \bN$ tal que $\Vert v_i^\varepsilon - u \Vert_{\cW^{k,p}(V_i)} \to 0$, quando $\varepsilon \to 0$, e 
    \begin{equation} \label{eq:cobertura}
        \partial\Omega \subseteq \bigcup_{i=1}^N B(\tilde x_i, \sfrac{r_i}{2}).
    \end{equation}
    Além disso, considere um aberto $V_0 \Subset \Omega$ tal que $\Omega \subseteq \bigcup_{i=0}^N V_i$ (ver Figura \ref{fig:coberturafronteirav0}), e pelo Teorema \ref{thm:aprox-2}, encontramos $v_0^\varepsilon \in \cC^{\infty}(V_0) \cap \cW^{k,p}(V_0)$ com $\Vert v_0^\varepsilon - u \Vert_{\cW^{k,p}(V_0)} \to 0$, quando $\varepsilon \to 0$.
    \begin{figure}
        \centering
        \input{mollifiers/cobertura1.tex}
        \caption{Representação visual dos conjuntos em (\ref{eq:cobertura}).Note que $\{V_0\} \cup \{B (\tilde x_i, \sfrac{r_i}{2})\}_{i=1}^N$ forma uma cobertura para $\Omega$. \\Fonte: Autoral.}
        \label{fig:coberturafronteirav0}
    \end{figure}
    Seja $\{\phi_i\}_{i=0}^N$ uma partição da unidade subordinada aos conjuntos $\{V_i\}_{i=0}^N$ em $\Omega$.
    Defina
    \[
        v^\varepsilon = \sum_{i=0}^N \phi_i v_i^\varepsilon \in \cC^{\infty}(\overline\Omega),
    \]
    e observando que $u = \sum_{i=0}^N \phi_i u$ (pois $\sum_{i=0}^N \phi_i = 1$), obtemos
    \[
        \Vert D^\alpha v^\varepsilon - D^\alpha u \Vert_{\cL^p(\Omega)} \leqslant \sum_{i=0}^N \Vert D^\alpha (\phi_i v_i^\varepsilon) - D^\alpha(\phi_i u) \Vert_{\cL^p(\Omega)}.
    \]
    Utilizando a regra de Leibniz (ver Teorema \ref{thm:propriedades-derivada-fraca}), segue que
    \[
        \begin{aligned}
            \Vert D^\alpha v^\varepsilon - D^\alpha u \Vert_{\cL^p(\Omega)} &\leqslant \sum_{i=0}^N\sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \left\Vert  D^{\sigma} \phi_i \left[ D^{\alpha - \sigma} \left( v_i^\varepsilon - u \right) \right] \right\Vert _{\cL^p(V_i)}\\ 
            &\leqslant c\sum_{i=0}^N\sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert D^{\alpha-\sigma}(v^\varepsilon_i - u) \Vert_{\cL^p(V_i)},
        \end{aligned}
    \]
    onde utilizamos o fato de $\phi_i$ (e consequentemente $D^\sigma \phi_i$) ter suporte compacto e ser suave na última desigualdade acima. 
    Ademais, como $|\alpha - \sigma| \leqslant k$, temos que
    \[
        \Vert D^\alpha v^\varepsilon - D^\alpha u \Vert_{\cL^p(\Omega)} \leqslant c \sum_{i=0}^N\sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert v_i^\varepsilon - u \Vert_{\cW^{k,p}(V_i)} \leqslant c\sum_{i=0}^N \Vert v_i^\varepsilon - u \Vert_{\cW^{k,p}(V_i)} \to 0 ,
    \]
    quando $\varepsilon \to 0$.
    Por fim, definindo $u_n := v^{\frac{1}{n}} \in \cC^{\infty}(\overline\Omega)$, para todo $n \in \bN$, chegamos a 
    \[
        \Vert u_n - u \Vert_{\cW^{k,p}(\Omega)} \to 0,
    \]
    quando $n \to \infty$, como era desejado.
\end{prf}

\section{Extensões}

Em alguns casos é mais viável trabalhar com funções definidas no espaço Euclidiano inteiro ao invés de funções definida em um aberto específico.
Nessa seção, veremos uma forma de estender funções em $\cW^{1,p}(\Omega)$ para aplicações em $\cW^{1,p}(\bR^n)$ por meio de um operador linear.

\begin{tbox} \label{thm:extensao}
        Sejam $\Omega$ um aberto limitado, com fronteira de classe $\cC^1$ e $\Omega'$ um aberto tal que $\Omega \Subset \Omega'$. Então, existe um operador linear limitado $E : \cW^{1,p}(\Omega) \to \cW^{1,p}(\bR ^n)$, com $1 \leqslant p < \infty$, tal que para cada $u \in \cW^{k,p}(\Omega)$, tem-se que
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $Eu = u$ qtp em $\Omega$;
        \item $\supp Eu \subseteq \Omega'$;
        \item $\Vert Eu \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}$, onde a constante $c$ depende apenas de $p$, $\Omega$ e $\Omega'$.
    \end{enumerate}
\end{tbox}
\begin{prf}
    Seja $\tilde x \in \partial\Omega$ e considere inicialmente que $\partial\Omega$ esteja contido no plano $\{x_n = 0\}$ perto de $\tilde x$.
    Dessa forma, podemos supor que existe uma bola $B = B(\tilde x, r)$ tal que
    \begin{equation} \label{eq:reflexao}
        \begin{aligned}
            B^+ &= B \cap \{x_n > 0\} \subseteq \overline\Omega;\\
            B^- &= B \cap \{x_n \leqslant 0\} \subseteq \bR^n \setminus \Omega.
        \end{aligned}
    \end{equation}
    \begin{figure}
        \centering
        \input{mollifiers/fronteira.tex}
        \caption{Representação visual de (\ref{eq:reflexao}). Note que perto de $\tilde x$, a fronteira de $\Omega$ é plana.\\Fonte: Autoral.}
        \label{fig:BmaisBmenos}
    \end{figure}
    (ver Figura \ref{fig:BmaisBmenos}).
    Além disso, assuma que $u \in \cC^\infty(\overline\Omega)$ e defina
    \begin{equation} \label{eq:barux}
        \bar u(x) =
        \left\{ 
            \begin{array}{ll}
                u(x), & \text{se } x\in B^+;\\
                -3u(x_1,\dots,x_{n-1}, -x_n) + 4u(x_1,\dots,x_{n-1},-\frac{x_n}{2}), & \text{se } x \in B^-,
            \end{array}
        \right.
    \end{equation}
    a qual chamamos de reflexão de ordem superior da função $u$ de $B^+$ a $B^-$.
    Afirmamos que $\bar u \in \cC^1(B)$.
    Com efeito, denotando $u^- = \bar u \big|_{B^-}$, $u^+ = \bar u \big|_{B^+}$, podemos ver que
    \[
        \dfrac{\partial u^-}{\partial x_n} = \dfrac{\partial u^+}{\partial x_n} \;\text{ em }\; \{x_n = 0\}.
    \]
    De fato, pela regra da cadeia, podemos escrever
    \[
        \dfrac{\partial u^-}{\partial x_n}(x_1,\dots,x_n) = 3 \frac{\partial u}{\partial x_n}(x_1,\dots,x_{n-1}, -x_n)  - 2\frac{\partial u}{\partial x_n}(x_1,\dots,x_{n-1},\tfrac{x_n}{2}),
    \]
    quando $x_n = 0$, obtemos
    \[
        \begin{aligned}
            \dfrac{\partial u^-}{\partial x_n}(x_1,\dots,x_{n-1},0)
         &= 3\frac{\partial u}{\partial x_n}(x_1,\dots,x_{n-1},0) - 2\frac{\partial u}{\partial x_n}(x_1,\dots,x_{n-1},0) = \frac{\partial u}{\partial x_n}(x_1,\dots,x_{n-1},0)\\[5pt] 
         &= \dfrac{\partial u^+}{\partial x_n}(x_1,\dots,x_{n-1},0).
        \end{aligned}
    \]
    Também é verdade que
    \[
        u^+ = u^- \,\text{ e }\, \dfrac{\partial u^-}{\partial x_i} = \dfrac{\partial u^+}{\partial x_i}  \;\text{ em }\; \{x_n = 0\},
    \]
    para todo $i = 1,2,\dots,n-1$ (ver \ref{eq:reflexao}). Portanto, $D^\alpha u^- = D^\alpha u^+$ em $\{x_n = 0\}$ com $|\alpha| \leqslant 1$. Sendo assim, $\bar u \in \cC^1 (B)$, pois fora de $\{x_n = 0\}$, as componentes de $\bar u$ já eram de classe $\cC^\infty$, então apenas restava verificar que em $B^+ \cap B^- = B \cap \{x_n = 0\}$ as componentes em $B^+$ e $B^-$ se igualavam, implicando a continuidade $\bar u$ e suas derivadas.

    Agora, desejamos mostrar que 
    \begin{equation} \label{eq:desigualdade-B-Bmais}
        \Vert \bar u \Vert_{\cW^{1,p}(B)} \leqslant c \Vert u \Vert_{\cW^{1,p}(B^+)},
    \end{equation}
    onde $c$ é uma constante positiva que não depende de $u$.
    De fato, sabemos que
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(B)}^p = \sum_{|\alpha| \leqslant 1} \Vert D^\alpha\bar u \Vert_{\cL^P(B)}^p = \sum_{|\alpha| \leqslant 1} \left[\int_B |D^\alpha \bar u| ^p \,dx\right].
    \]
    Como $B = B^+ \cup B^-$, e denotando $(x_1,\dots,x_{n-1})$ por $x'$ podemos reescrever o último somatório acima da seguinte forma:
    % \small{
    % \[
    %     \begin{aligned}
    %         \sum_{|\alpha| \leqslant 1} \left[\int_B |D^\alpha \bar u| ^p \,dx\right] &= \sum_{|\alpha| \leqslant 1} \left[ \int_{B^+} |D^\alpha u(x)|^p \,dx + \int_{B^-} |4D^\alpha u(x',-\tfrac{x_n}{2}) - 3D^\alpha u(x',-x_n) |^p \,dx \right]\\
    %         &\leqslant \sum_{|a| \leqslant 1} \left[ \int_{B^+} |D^\alpha u(x)|^p \,dx + 3 \cdot 2^p\int_{B^-} |D^\alpha u(x',-x_n)|^p \,dx + 4 \cdot 2^p\int_{B^-} |D^\alpha u(x',-x_n)|^p \,dx   \right]
    %     \end{aligned}
    % \]}
    \[
        \sum_{|\alpha| \leqslant 1} \left[\int_B |D^\alpha \bar u| ^p \,dx\right] = \sum_{|\alpha| \leqslant 1} \left[ \int_{B^+} |D^\alpha u(x)|^p \,dx + \int_{B^-} |4D^\alpha [u(x',-\tfrac{x_n}{2})] - 3D^\alpha [u(x',-x_n)] |^p \,dx \right]
    \]
    \[
        \leqslant \sum_{|\alpha| \leqslant 1} \left[ \int_{B^+} |D^\alpha u(x)|^p \,dx + 3 \cdot 2^p\int_{B^-} |D^\alpha u(x',-x_n)|^p \,dx + 4 \cdot 2^p\int_{B^-} |D^\alpha u(x',-x_n)|^p \,dx   \right], 
    \]
    onde usamos o fato de que
    \[
        (a + b)^p \leqslant (2 \max\{a,b\})^p = 2^p \max\{a,b\}^p \leqslant 2^p (a^p + b^p),
    \]
    para todo $a,b \geqslant 0$. Porém, $-x_n, -\tfrac{x_n}{2} \geqslant 0$ em $B^-$, então podemos considerar, através de uma mudança de variáveis ($y_i = x_i$ para todo $i = 1,\dots,n-1$ e $y_n = -x_n$), que as integrais sobre $B^-$ são integrais sobre $B^+$, para encontrar
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(B)}^p = \sum_{|\alpha| \leqslant 1} \left[\int_B |D^\alpha \bar u| ^p \,dx\right] \leqslant c\sum_{|\alpha| \leqslant 1} \left[ \int_{B^+}|D^\alpha u|^p \,dx \right] = c \Vert u \Vert_{\cW^{1,p}(B^+)}^p.
    \]
    Portanto,
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(B)} \leqslant c \Vert u \Vert_{\cW^{1,p}(B^+)}.
    \]

    Por outro lado, se $\partial\Omega$ não está necessáriamente contido no plano $\{x_n = 0\}$ perto de $\tilde x$, temos que existe um homeomorfismo $\Phi$, com inversa $\Psi$, que planifica $\partial \Omega$ perto de $\tilde x$ (ver Figura \ref{fig:homeomorfismo}),  basta usar a função $\gamma$ de classe $\cC^1$ da Definição \ref{def:fronteira-ck} e definir $\Phi$ por
    \begin{equation} \label{eq:Phi}
        \Phi(x) = (x_1,x_2,...,x_{n-1}, x_n - \gamma(x_1,\dots,x_{n-1})).
    \end{equation}
    De forma análoga, definimos $\Psi$ por
    \begin{equation} \label{eq:Psi}
        \Psi(y) = (y_1,y_2,\dots,y_{n-1},y_n + \gamma(y_1,\dots,y_{n-1})).
    \end{equation}
    \begin{figure}
        \centering
        \input{mollifiers/homeomorfismo.tex}
        \caption{Representação gráfica do homemorfismo $\Phi$.\\Fonte: Autoral. Baseada em \cite{evans-pde} p.p. 256.}
        \label{fig:homeomorfismo}
    \end{figure}
    \!\!Deste modo, é fácil ver que $\Psi^{-1} = \Phi$ e que $\Phi$ e $\Psi$ são de classe $\cC^1$ (por definição). Sendo assim, seja $y = \Phi(x)$ (ou seja, $x = \Psi(y)$) e definimos $u' \equiv u \circ \Psi$. Logo, como foi feito anteriormente ($u'$ é de classe $\cC^1$), podemos escolher uma bola $B = B(\tilde y, r)$ e definimos $\bar u'$ de forma que $\bar u' \in \cC^1(B)$ e
    \begin{equation} \label{eq:BBBB}
        \Vert \bar u' \Vert_{\cW^{1,p}(B)} \leqslant c \Vert u' \Vert_{\cW^{1,p}(B^+)}.
    \end{equation}
    Seja $B' = \Psi(B)$, assim conseguimos obter uma extensão $\bar u$ de $u$ para $B'$ com
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(B')} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    De fato, para $\bar u \equiv \bar u' \circ \Phi$ (i.e., $\bar u' = \bar u \circ \Psi$), obtemos, utilizando o Teorema de Mudança de Variáveis (ver Teorema \ref{thm:mudanca-de-variaveis}), que
    \[
        \Vert D^\alpha \bar u' \Vert_{\cL^p(B)}^p = \int_B |D^\alpha \bar u'(y)|^p \,dy = \int_B |D^\alpha \bar u (\Psi (y))|^p \,dy = \int_{B'} |D^\alpha \bar u (x)|^p \,dx = \Vert D^\alpha \bar u \Vert_{\cL^p(B')}^p.
    \]
    Dessa forma, passando ao somatório, quando $|\alpha| \leqslant 1$, chegamos a
    \begin{equation} \label{eq:normaBigualnormaW}
        \Vert \bar u' \Vert_{\cW^{1,p}(B)} = \Vert  \bar u \Vert_{\cW^{1,p}(B')}.
    \end{equation}
    Além disso, é verdade que
    \[
        \begin{aligned}
            \Vert D^\alpha u' \Vert_{\cL^p(B^+)}^p = \int_{B^+} |D^\alpha u'(y) |^p \,dy &= \int_{B^+} |D^\alpha u (\Psi(y))|^p \,dy\\ &= \int_{\Psi(B^+)} |D^\alpha u(x)|^p \,dx \leqslant \int_{\Omega} |D^\alpha u(x)|^p \,dx = \Vert D^\alpha u \Vert_{\cL^p(\Omega)}^p,
        \end{aligned}
    \]
    para todo multi-índice $\alpha$, com $|\alpha| \leqslant 1$.
    Consequentemente, podemos escrever
    \begin{equation} \label{eq:normadesigualdadeBmais}
        \Vert u' \Vert_{\cW^{1,p}(B^+)} \leqslant \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \end{equation}
    Portanto, por (\ref{eq:BBBB}), (\ref{eq:normaBigualnormaW}) e (\ref{eq:normadesigualdadeBmais}), obtemos
    \begin{equation} \label{eq:desigualdadeWO}
        \Vert \bar u \Vert_{\cW^{1,p}(B')} = \Vert \bar u' \Vert_{\cW^{1,p}(B)} \leqslant c \Vert u' \Vert_{\cW^{1,p}(B^+)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)},
    \end{equation}

    Como $\partial\Omega$ é compacto (pois $\Omega$ é limitado) e $\partial \Omega \subseteq \bigcup_{x \in \partial\Omega} B'_x$,
    onde $B'_x$ é aberto para cada $x \in \partial\Omega$, pois $B'_x = \Psi(B(\tilde y, r))$, e a imagem de um conjunto aberto por um homeomorfismo também é aberto. Pelo Teorema de Heine-Borel, existem pontos $x_i \in \partial\Omega$, abertos $B'_i$ e extensões $\bar u_i$ de $u$ em $B'_i$, com $i = 1,\dots,N$, de forma que $\partial\Omega \subseteq \bigcup_{i=1}^N B'_i$ (ver Figura \ref{fig:coberturafronteirab0}).
    Por outro lado, considere um aberto $B'_0 \Subset \Omega$ tal que
    \begin{equation} \label{eq:cobertura2}
        \Omega \subseteq \bigcup_{i=0}^N B'_i.
    \end{equation}
    \begin{figure}
        \centering
        \input{mollifiers/cobertura2.tex}
        \caption{Representação visual dos conjuntos em (\ref{eq:cobertura2}). Note que $\{B_i'\}_{i=1}^N$ é uma cobertura finita para o conjunto $\Omega$.\\Fonte: Autoral.}
        \label{fig:coberturafronteirab0}
    \end{figure}


    Seja $\{\phi_i\}_{i=0}^N$ uma partição da unidade suave subordinada aos abertos $\{B'_i\}_{i=0}^N$ e defina
    \begin{equation}
        \bar u = \sum_{i=0}^N \phi_i \bar u_i,
    \end{equation}
    onde $\bar u_i$ está associada a $B'_i$ e $\bar u_0 = u$ (pois $\sum_{i=0}^N \phi_i = 1$). Deste modo, obtemos a desigualdade
    \begin{equation} \label{eq:xmmx}
        \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \end{equation}
    Com efeito,
    \[
        \Vert \bar u \Vert^p_{\cW^{1,p}(\bR^n)} = \sum_{|\alpha| \leqslant 1} \Vert D^\alpha \bar u \Vert^p_{\cL^p(\bR^n)}
        % = \sum_{|\alpha| \leqslant 1} \left\Vert \sum_{i=0}^N D^\alpha(\phi_i \bar u_i) \right\Vert _{\cL^p(\bR^n)}^p 
        \leqslant \sum_{|\alpha| \leqslant 1} \sum_{i=0}^N \Vert D^\alpha (\phi_i \bar u_i) \Vert_{\cL^p(\bR)}^p,
    \]
    Logo, utilizando a regra de Leibniz (ver Teorema \ref{thm:propriedades-derivada-fraca}), inferimos
    \[
        \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)}^p \leqslant \sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert D^\sigma \phi_i D^{\alpha - \sigma} \bar u_i \Vert_{\cL^p(\bR^n)}^p.
    \]
    Como $\supp D^\sigma \phi_i \subseteq \supp \phi_i \subseteq B'_i$, então o suporte de $D^\sigma \phi_i$ também é compacto (pois $B'_i$ é limitado), sendo assim $\max |D^\sigma \phi_i|$ existe em $B'_i$.
    Portanto, vale a desigualdade
    \[
        \begin{aligned}
            \Vert \bar u \Vert_{\cL^p(\bR^n)}^p &\leqslant c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert D^{\alpha - \sigma} \bar u_i \Vert_{\cL^p(B'_i)}^p \leqslant c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert \bar u_i \Vert_{\cW^{1,p}(B'_i)}^p,
        \end{aligned}
    \]
    onde $c$ é uma constante que depende de $B'_i$.
    Por fim, utilizando (\ref{eq:desigualdadeWO}) e o Teorema de Mudança de Variaveis (ver \ref{thm:mudanca-de-variaveis}), chegamos a
    \[
         \Vert \bar u \Vert^p_{\cW^{1,p}(\bR^n)} \leqslant c\sum_{|\alpha| \leqslant 1} \sum_{i=0}^{N} \sum_{\sigma \leqslant \alpha} \binom{\alpha}{\sigma} \Vert \bar u_i \Vert_{\cW^{1,p}(B'_i)}^p \leqslant c\Vert u_i \Vert_{\cW^{1,p}(\Omega)}^p \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}^p,
    \]
    onde $c$ depende de $B'_i$, $p$ e $N$.
    Portanto, deduzimos que
    \begin{equation} \label{eq:Mm}
        \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \end{equation}
    Isto prova (\ref{eq:xmmx}).

    Como, por hipótese, $\Omega \Subset \Omega'$, então $\supp \bar u \subseteq \Omega'$, (pois $\supp \phi_i \subseteq B_i'$), diminuindo $B'_i$ se necessário.
    Defina também $\bar E: \cC^\infty(\overline\Omega) \to \cC^\infty(\bR^n)$ dada por $\bar E u = \bar u \in \cC^{\infty}(\bR^n)$.
    Temos que $\bar E$ é linear, pois \ref{eq:barux}, se $x \in B^+$, temos que
    \[
        \bar E(u + \lambda v)(x) = (\overline{u + \lambda v})(x) = (u + \lambda v)(x) = u(x) + \lambda v(x) = \bar u(x) + \lambda \bar v(x).
    \]
    Por outro lado, se $x \in B^-$
    \[
        \begin{aligned}
            \bar E(u + \lambda v)(x) = (\overline{u + \lambda v})(x) &= -3(u + \lambda v)(x_1,\dots,x_{n-1},-x_n) + 4(u + \lambda v)(x_1,\dots,x_{n-1},-\tfrac{x_n}{2})\\
            &= -3 u(x_1,\dots,x_{n-1},-x_n) + 4 u(x_1,\dots,x_{n-1},-\tfrac{x_n}{2})\\ &\quad\;+ \lambda\big[-\!3 v(x_1,\dots,x_{n-1},-x_n) + 4v(x_1,\dots,x_{n-1},-\tfrac{x_2}{2}) \big]\\[5pt]
            &= \bar u(x) + \lambda \bar v(x).
        \end{aligned}
    \]
    Além disso, é válido que
    \[
        \Vert \bar E u \Vert_{\cW^{1,p}(\bR^n)} = \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    e $\supp \bar E u  = \supp \bar u \subseteq \Omega'.$
    Sendo assim, definimos $E : \cW^{1,p}(\Omega) \to \cW^{1,p}(\bR^n)$ por
    \[
        Eu = \lim \bar u_k,
    \]
    onde $(u_k)$ é uma sequência de funções em $\cC^\infty(\overline\Omega)$ que converge para $u$ em $\cW^{1,p}(\Omega)$ (sabemos que essa sequência existe pois mostramos no Teorema \ref{thm:aprox3} que $\cC^\infty(\overline\Omega)$ é denso em $\cW^{1,p}(\Omega)$) e pela linearidade do limite, $E$ é linear.
    Podemos afirmar que o limite existe em $\cW^{1,p}(\bR^n)$, já que, por (\ref{eq:Mm}), vale
    \[
        \Vert \bar u_k - \bar u_\ell \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u_k - u_\ell \Vert_{\cW^{1,p}(\Omega)} \to 0,
    \]
    quando $k,\ell \to \infty$.
    Logo $(\bar u_k)$ é de Cauchy em $\cW^{1,p}(\bR^n)$.
    Como $\cW^{1,p}(\bR^n)$ é completo (ver Teorema \ref{thm:sobolev-completo}), deduzimos que $\lim \bar u_k$ existe em $\cW^{1,p}(\bR^n)$.
    Além disso, é verdade que
    \[
        \begin{aligned}
            \Vert Eu - u \Vert_{\cW^{1,p}(\Omega)} &\leqslant \Vert Eu - \bar u_k \Vert_{\cW^{1,p}(\Omega)} + \Vert \bar u_k - u_k \Vert_{\cW^{1,p}(\Omega)} + \Vert u_k - u\Vert_{\cW^{1,p}(\Omega)}\\
            &\leqslant \Vert Eu - \bar u_k \Vert_{\cW^{1,p}(\bR^n)} + \Vert u_k - u \Vert_{\cW^{1,p}(\Omega)} \to 0,
        \end{aligned}
    \]
    quando $k \to \infty$,
    pois $u_k \to u$ em $\cW^{1,p}(\Omega)$, quando $k \to \infty$ e $\bar u_k = u_k$ em $\Omega$.
    Portanto, $Eu = u$ qtp em $\Omega$, provando o item \textbf{(a)}.

    Para verificar o ítem \textbf{(b)}, lembre que, por (\ref{eq:Mm}), $\supp \bar u_k \subseteq \Omega'$.
    Dessa forma, $\supp Eu \subseteq \Omega'$, já que
    \[
        \{ \lim u_k = Eu \neq 0\} \subseteq \{ \bar u_k \neq 0 \} \implies \supp Eu \subseteq \supp \bar u_k \subseteq \Omega'
    \]

    Por fim, para mostrar o item \textbf{(c)}, note que $E$ é um operador limitado, pois
    \[
        \Vert Eu \Vert_{\cW^{1,p}(\bR^n)} = \Vert \lim \bar u_k \Vert_{\cW^{1,p}(\bR^n)} = \lim \Vert \bar u_k \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \lim \Vert u_k \Vert_{\cW^{1,p}(\Omega)} = c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    Portanto,
    \[
        \Vert Eu \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
\end{prf}

\section{Traços}

Em alguns casos, no estudo de equações diferenciais parciais, é necessário impor condições de contorno na fronteira de um domínio. Para isso, precisamos entender o que significa restringir uma função em $\cW^{1,p}(\Omega)$ à fronteira de $\Omega$. Nesta seção, veremos como isso pode ser feito por meio do operador traço.

\begin{tbox} \label{thm:traco-1}
    Seja $\Omega$ um aberto limitado, com fronteira de classe $\cC^1$. Então, existe um operador linear limitado $T : \cW^{1,p}(\Omega) \to \cL^p(\partial \Omega)$, com $1 \leqslant p < \infty$, tal que
    \begin{enumerate}[leftmargin=*, label=\textbf{(\alph*)}]
        \item $Tu = u \big|_{\partial \Omega}$ se $u \in \cW^{1,p}(\Omega) \cap \cC(\Omega)$;
        \item $\Vert Tu \Vert_{\cL^p(\partial\Omega)} \leqslant c \Vert u \Vert_{W^{1,p}(\Omega)}$, onde $c$ depende apenas de $p$ e $\Omega$.
    \end{enumerate}
\end{tbox} 
\begin{prf}
    Incialmente suponha que $u \in \cC^1(\overline{\Omega})$. Da mesma forma que foi feito no Teorema \ref{thm:extensao}, considere $\tilde x \in \partial\Omega$ e suponhamos que $\partial\Omega$ está contido no plano $\{x_n = 0\}$ perto de $\tilde x$.
    Sejam $B = B(\tilde x, r)$ (e defina $B^+$ e $B^-$ como em (\ref{eq:reflexao})) e $\widehat B = B(\tilde x, \sfrac{r}{2})$,
    e considere $\xi \in \cC^{\infty}_c(B)$ de forma que $\xi \geqslant 0$ em $B$ e $\xi \equiv 1$ em $\widehat B$, e denote $\Gamma_{\tilde x} = \partial \Omega \cap \widehat B$ (ver Figura \ref{fig:tracos}) e $x' = (x_1,\dots,x_{n-1}) \in \bR^{n-1}$.
    Note que, utilizando integração por partes (ver Teorema \ref{thm:integracao-por-partes}), obtemos
    \[
        \int_{B^+} \dfrac{\partial (\xi |u|^p)}{\partial x_n}\,dx = \int_{\partial B^+} \xi |u|^p \nu_n dx' - \int_{B^+} \xi |u|^p \frac{\partial}{\partial x_n} \big( 1 \big) = \int_{\partial B^+} \xi |u|^p \, \nu_n dx'
    \]
    onde $\nu$ é o vetor normal unitário que aponta para baixo em $\partial B^+$ (pois, o pontos de $\partial B^+$ que não estão em $\partial \Omega$ estão em $\partial B$ e, consequentemente, $\xi$ os anula.), isto é $\nu =  (0,\dots,0,-1)$. Sendo assim, $\nu_n = -1$ e 
    \[
        \int_{B^+} \dfrac{\partial (\xi |u|^p)}{\partial x_n} \,dx = -\int_{\partial B^+} \xi |u|^p \,dx'.
    \]
    pois $\supp \xi |u|^p \subseteq \sup \xi \subseteq B$.
    Dessa forma, como $\Gamma_{\tilde x} \subseteq \hat B$ e $\xi(x) = 1$ para todo $x \in \hat B$, concluímos que
    \[
        \int_{\Gamma_{\tilde x}} |u|^p \,dx' = \int_{\Gamma_{\tilde x}} \xi|u|^p \,dx' \leqslant \int_{\partial B^+} \xi|u|^p \,dx' = -\int_{B^+} \dfrac{\partial (\xi |u|^p)}{\partial x_n} \,dx.
    \]
    Calculando a derivada acima, obtemos
    \[
        \int_{\Gamma_{\tilde x}} |u|^p \,dx' \leqslant - \int_{B^+} \Big[ \dfrac{\partial \xi}{\partial x_n} |u|^p + p|u|^{p-1} \sgn\,u\,\dfrac{\partial u}{\partial x_n} \xi \Big] \,dx \leqslant c \int_{B^+} \Big[ |u|^p + |u|^{p-1} \Vert Du \Vert \Big] \,dx,
    \]
    onde utilizamos o fato de $\xi$ e suas derivadas parciais terem suporte compacto para a última desigualdade. Por fim utilizando a Desigualdade de Young (ver Teorema \ref{thm:desigualdade-de-young}), resulta em
    \begin{equation} \label{eq:umaisdu}
        \int_{\Gamma_{\tilde x}} |u|^p \,dx' \leqslant c \int_{B^+} \bigg[ |u|^p + \frac{|u|^{(p-1)p'}}{p'} + \frac{\Vert Du \Vert^p}{p} \bigg] \,dx \leqslant c \int_{B^+} |u|^p + \Vert Du \Vert^p \,dx,
    \end{equation}
    onde $\frac{1}{p} + \frac{1}{p'} = 1$.

    \begin{figure}
        \centering
        \begin{tikzpicture}[scale=1.75]
        
            \draw[thick, dashed, fill=tangerine, fill opacity=0.2, draw=black!70] (1.5,0) circle (1.25);
            \draw[thick, dashed, fill=tangerine, fill opacity=0.3, draw=black!70] (1.5,0) circle (0.625);
        
            \draw[Blue, thick] (0.25,0) to (2.75,0);
            \node[above=-1pt, Blue] at (2.4,0) {$\partial \Omega$};
        
            \draw[tangerine!50!BrickRed, thick, dash pattern=on 4.5pt off 2pt] (0.875,0) to (2.125,0);
            \node[above=-1pt, tangerine!50!BrickRed] at (1.1875,0) {$\Gamma_{\tilde x}$};
        
            \filldraw (1.5,0) circle (0.03) node[below=1pt] {$\tilde x$};
        
            \node[above] at (1.5,0.625) {$\hat B$};
            \node[above] at (1.5,1.25) {$B$};


            \draw[stealth-] (1.7,0.2) to[in=180, out=90, looseness=1] (2.2,1.2) node[right] {$\xi \equiv 1$};
        \end{tikzpicture}
        \caption{}
        \label{fig:tracos}
    \end{figure}

    Caso $\partial \Omega$ não esteja necessariamente contido em $\{x_n =0 \}$ perto de $\tilde x$, considere o homeomorfismo $\Phi$  com inversa $\Psi$ da demonstração do Teorema \ref{thm:extensao} (ver (\ref{eq:Phi}) e (\ref{eq:Psi})) e defina $u' \equiv u \circ \Psi$ (i.e., $u = u' \circ \Phi$). Logo, utilizando o Teorema de Mudança de Variáveis (ver Teorema \ref{thm:mudanca-de-variaveis}), inferimos
    \[
        \int_{\Gamma_{\tilde x}} |u'|^p \,dy' = \int_{\Gamma_{\tilde x}} |u \circ \Psi| \, dy' = \int_{\Psi(\Gamma_{\tilde x})} |u|^p \,dx'
    \]
    e
    \[
        \int_{B^+} \big[ |u'(y)|^p + \Vert Du'(y) \Vert^p \big] \,dy \leqslant c\int_{\Psi(B^+)} \big[ |u(x)|^p + \Vert Du(x) \Vert^p \big] \,dx,
    \]
    onde $c$ é uma constante que depende de $\gamma$ que surge devido a regra da cadeia. Dessa forma, por (\ref{eq:umaisdu}) e pelo Teorema de Mudança de Variáveis (ver \ref{thm:mudanca-de-variaveis}) , podemos escrever
    \[
        \begin{aligned}
            \Vert u \Vert^p_{\cL^p(\Psi(\Gamma_{\tilde x}))} = \int_{\Psi(\Gamma_{\tilde x})} |u|^p \,dx' = \int_{\Gamma_{\tilde x}} |u'|^p \,dy' &\leqslant c\int_{B^+} \big[ |u'|^p + \Vert Du' \Vert^p \big]\,dy\\ 
            &\leqslant c \int_{\Psi(B^+)} \big[ |u|^p + \Vert Du \Vert^p \big] \,dx = \Vert u \Vert_{\cW^{1,p}(\Psi(B^+))}^p.
        \end{aligned}
    \]
    Como $\Psi(B^+) \subseteq \Omega$, obtemos 
    \[
        \Vert u \Vert_{\cL^p(\Psi(\Gamma_{\tilde x}))} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]

    Como $\partial\Omega$ é compacto (pois $\Omega$ é limitado) e $\partial \Omega \subseteq \bigcup_{\tilde x \in \partial \Omega} \Psi(\Gamma_{\tilde x})$ (lembre que $\Gamma_{\tilde x}$ é um aberto em $\partial\Omega$ e que $\Psi$ é um homeomorfismo) , pelo Teorema de Heine-Borel, existe uma quantidade finita de abertos (em $\partial \Omega$) $\Psi(\Gamma_i)$ tal que,
    \[
        \partial\Omega \subseteq \bigcup_{i=1}^N \Psi(\Gamma_i)
    \]
    e
    \begin{equation} \label{eq:1111}
        \Vert u \Vert_{\cL^p(\Psi(\Gamma_i))} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \end{equation}
    Considere uma partição da unidade $\{\phi_i\}_{i=1}^N$ subordinada a cobertura $\{\Psi(\Gamma_i)\}_{i=1}^N$, e note que $u = \sum_{i=1}^N \phi_i u$ (pois $\sum_{i=1}^N \phi_i$).

    Defina $\widetilde T : \cC^1(\overline \Omega) \to \cL^p(\partial\Omega)$ por $\widetilde T u = u |_{\partial \Omega}$.
    Observe, que por definição, $T$ é linear.
    Dessa forma, podemos escrever, por (\ref{eq:1111}), que
    \begin{equation} \label{eq:2222}
        \begin{aligned}
            \Vert \widetilde Tu \Vert_{\cL^p(\partial \Omega)}^p = \int_{\partial\Omega} | \widetilde T u|^p \,dx = \int_{\partial\Omega} |u|^p \,dx &\leqslant c \sum_{i=1}^{N} \int_{\partial \Omega} \phi_i^p |u|^p \,dx\\ 
            &= c \sum_{i=1}^N \int_{\Psi(\Gamma_i)} |u|^p \,dx\\ 
            &= c\sum_{i=1}^N \Vert u \Vert_{\cL^p(\Psi(\Gamma_i))}^p \leqslant c\Vert u \Vert_{\cW^{1,p}(\Omega)}^p,
        \end{aligned}
    \end{equation}
    onde $c$ é uma constante que depende de $p$ e $\Omega$. Isto mostra que $\widetilde T$ é um operador limitado.
    Por fim, defina $T : \cW^{1,p}(\Omega) \to \cL^p(\partial \Omega)$ por (\ref{eq:2222})
    \[
        T u = \lim \widetilde T u_k \text{ em } \cL^p(\partial \Omega),
    \]
    onde $(u_k)$ é uma sequência de funções em $\cC^{\infty}(\overline\Omega)$ que converge para $u$ em $\cW^{1,p}(\Omega)$ (essa sequência existe pelo Teorema \ref{thm:aprox3}). 
    Primeiramente, veja que $T$ é linear por definição.
    Observe também que, por (\ref{eq:2222})
    \[
        \Vert Tu \Vert_{\cL^p(\partial \Omega)} = \Vert \lim \widetilde T u_k \Vert_{\cL^p(\partial \Omega)} = \lim \Vert \widetilde T u_k \Vert_{\cL^p(\partial \Omega)} \leqslant c \lim \Vert u_k \Vert_{\cW^{1,p}(\Omega)} = c \Vert u \Vert_{\cW^{1,p}(\Omega)},
    \]
    para todo $u \in \cW^{1,p}(\Omega)$. Isto prova \textbf{(b)}.

    Por fim, se $u \in \cW^{1,p}(\Omega) \cap \cC(\Omega)$, então, pela demonstração do Teorema \ref{thm:aprox3}, temos que $u_k \to u$ uniformemente sobre $\overline\Omega$, quando $k \to \infty$.
    Por outro lado, como
    \[
        \Vert u_k |_{\partial\Omega} - Tu \Vert_{\cL^p(\partial \Omega)} = \Vert \widetilde T u_k - Tu \Vert_{\cL^p(\partial\Omega)} \to 0,
    \]
    quando $k \to \infty$, então passando a uma subsequência (se necessário), temos, pelo Teorema \ref{thm:teorema-do-brezis} que $u_k \to Tu$ qtp em $\partial \Omega$.
    Mas como $\partial \Omega \subseteq \overline\Omega$, segue que $Tu = u$ qtp em $\partial \Omega$ (por unicidade do limite), isto é, $Tu = u|_{\partial\Omega}$ se $u \in \cW^{1,p}(\Omega) \cap \cC(\Omega)$, provando o item \textbf{(a)}.
\end{prf}

O teorema a seguir é uma caracterização do espaço de Sobolev $\cW^{1,p}_0(\Omega)$, por meio do operador traço.

\begin{tbox}[Funções traço zero em $\cW^{1,p}$] \label{thm:traco-2}
    Sejam $\Omega$ um aberto limitado, com fronteira de classe $\cC^1$ e $u \in \cW^{1,p}(\Omega)$, com $1 \leqslant p < \infty$. Então,
    \[
        u \in \cW_0^{1,p}(\Omega) \iff Tu = 0 \text{ sobre } \partial \Omega,
    \]
    onde $\cW_0^{1,p}(\Omega)$ é o fecho de $\cC^{\infty}_c(\Omega)$ em $\cW^{1,p}(\Omega)$.
\end{tbox}
\begin{prf}
    Suponha que $u \in \cW_0^{1,p}(\Omega)$. Por definição, existe uma sequência de funções $(u_k) \subseteq \cC^{\infty}_c(\Omega)$ tal que
    \[
        \Vert u_k - u \Vert_{\cW^{1,p}(\Omega)} \to 0,
    \]
    quando $k \to \infty$. Como $u_k$ tem suporte compacto e é suave em $\Omega$, então $u_k$ se anula em $\partial \Omega$ (pois $T$ é linear) para todo $k \in \bN$. Sendo assim, $Tu_k = 0$ sobre $\partial\Omega$, para todo $k \in \bN$, e como $T : \cW^{1,p}(\Omega) \to \cL^p(\partial \Omega)$ é um operador linear limitado, então
    \[
        0 = \lim \Vert Tu_k - Tu \Vert_{\cL^p(\partial \Omega)} = \Vert Tu \Vert_{\cL^p(\partial \Omega)}.
    \]
    Portanto, $Tu =0$ qtp sobre $\partial \Omega$.

    Reciprocamente, suponha que $Tu = 0$ em $\partial \Omega$. Utilizando partições da unidade e o homeomorfismo $\Phi$ que planifica $\partial \Omega$, como foi feito anteriormente (ver (\ref{eq:Phi})), podemos supor que
    \begin{equation} \label{eq:hh}
        \begin{aligned}
            &u \in \cW^{1,p}(\bR^n_+);\\
            &u \text{ tem suporte compacto em } \overline{\bR^n_+};\\
            &Tu = 0 \text{ em } \partial \bR^n_+ = \bR^{n-1},
        \end{aligned}
    \end{equation}
    onde $\bR^n_+$ denota o semiplano superior de $\bR^n$.
    Como $u \in \cW^{1,p}(\bR^n_+)$ então existe um sequência de funções $(u_k) \subseteq \cC^{\infty}(\overline{\bR^n_+}) \subseteq \cC^1(\overline{\bR^n_+})$ tal que $u_k \to u$ em $\cW^{1,p}(\bR^n_+)$, quando $k \to \infty$ (ver Teorema \ref{thm:aprox3}). Como $(u_k) \subseteq \cW^{1,p}(\bR^n_+) \cap \cC^\infty(\bR^n_+)$, então $T u_k = u_k |_{\partial \bR^n_+} = u_k |_{\bR^{n-1}}$.
    Assim, por (\ref{eq:hh}) e usando que $T$ é limitado, temos que
    \begin{equation} \label{eq:nanna}
        0 = \lim \Vert Tu_k - Tu \Vert_{\cL^p(\partial \bR^n)} = \lim \Vert Tu_k - Tu \Vert_{\cL^p(\bR^{n-1})} = \lim \Vert Tu_k \Vert_{\cL^p(\bR^{n-1})}.
    \end{equation}
    Isto é, $T u_k = u_k |_{\bR^n} \to 0$ em $\cL^p(\bR^{n-1})$, quando $k \to \infty$.

    Dito isso, seja $x' \in \bR^{n-1}$ e $x_n \geqslant 0$.
    Pelo Teorema Fundamental do Cálculo, podemos escrever $u_k$ da seguinte forma:
    \[
        u_k(x'\!,x_n) = u_k(x'\!,0) + \int_0^{x_n} \dfrac{\partial u_k}{\partial x_n} (x'\!,t) \,dt
    \]
    e, consequentemente,
    \[
        |u_k(x'\!,x_n)|^p \leqslant c \left(  |u_k(x'\!,0)|^p + \left(  \int_0^{x_n} \left|\dfrac{\partial u_k}{\partial x_n} (x'\!,t)\right| \,dt\right)^{\!p\,} \right),
    \]
    onde a constante $c$ depende de $p$ (aqui, utlizamos a desigualdade $(a + b)^p \leqslant 2^p (a^p + b^p)$). Integrando ambos os lados sobre $\bR^{n-1}$, obtemos
    \[
        \int_{\bR^{n-1}} |u_k(x',x_n)|^p \,dx' \leqslant c \left( \int_{\bR^{n-1}} |u_k(x',0)|^p \,dx' + \int_{\bR^{n-1}} \left(  \int_0^{x_n} \Vert Du_k(x',t) \Vert \,dt\right)^{\!p\,} dx' \right)
    \]
    \[
        \leqslant  c \left( \int_{\bR^{n-1}} |u_k(x',0)|^p \,dx' + \int_{\bR^{n-1}} \left( \int_0^{x_n} \Vert Du_k (x',t) \Vert^p \,dt \right)\left( \int_0^{x_n} 1^{p'} \,dt \right)^{p/p'} dx'\right),
    \]
    onde utilizamos a desigualdade de Hölder (ver Teorema \ref{thm:pre-desigualdade-de-holder}), com $\frac{1}{p}+ \frac{1}{p'} = 1$.
    Como $p/p' = p-1$, tem-se, pelo Teorema de Fubini (ver Teorema \ref{thm:fubini}), que
    \[
        \int_{\bR^{n-1}} |u_k(x',x_n)|^p \,dx' \leqslant c \left( \int_{\bR^{n-1}} |u_k(x',0)|^p \,dx' + x_n^{p-1} \int_{0}^{x_n} \int_{\bR^{n-1}} \Vert Du_k (x',t) \Vert^p  \,dx'dt \right).
    \]
    Por fim, como
    \[
        \Vert u_k |_{\bR^{n-1}} \Vert_{\cL^p(\bR^{n-1})} = \Vert Tu_k \Vert_{\cL^p(\bR^{n-1})} \to 0,
    \]
    quando $k \to \infty$ (ver \ref{thm:traco-1}), e utlizando o Teorema da Convergência Dominada (ver Teorema \ref{thm:teorema-da-convergencia-dominada}), concluímos. passando ao limite na desigualdade anterior, quando $k \to \infty$, que
    \begin{equation} \label{eq:uuuuu}
        \int_{\bR^{n-1}} |u(x',x_n)|^p \,dx' \leqslant  c x_n^{p-1}\int_0^{x_n} \int_{\bR^{n-1}} \Vert Du(x',t) \Vert^p \,dx'dt,
    \end{equation}
    pois $u_k \to u$ em $\cW^{1,p}(\bR^n_+)$, quando $k \to \infty$, o que implica em $u_k \to u$ e $Du_k \to Du$ em $\cL^p(\bR^n_+)$, quando $k \to \infty$, isso implica em $u_k(x) \to u(x)$ e $Du_k(x) \to u(x)$ qtp em $\overline{\bR^n_+}$, quando $k \to \infty$ (ver Teorema \ref{thm:teorema-do-brezis} e (\ref{eq:hh})).
    
    \begin{figure}
        \centering
        \begin{tikzpicture}
            \draw[thick, -stealth] (0,0) to (6,0);
            \filldraw (0,0) circle (0.035) node[below=2pt] {0};
            \filldraw (2,0) circle (0.035) node[below=2pt] {1};
            \filldraw (4,0) circle (0.035) node[below=2pt] {2};
            \node[below=2pt] at (6,0) {$\bR_+$};
        
            \node[above=2pt] at (1,0) {$\xi \equiv 1$};
            \node[above=2pt] at (3,0) {$0 \leq \xi \leq 1$};
            \node[above=2pt] at (5,0) {$\xi \equiv 0$};
        \end{tikzpicture}
        \caption{$\xi$ definido em (\ref{eq:xi}).}
        \label{fig:xi}
    \end{figure}
    Seja $\xi \in \cC^{\infty}_c(\bR_+)$ tal que
    \begin{equation} \label{eq:xi}
        \begin{aligned}
            &\xi \equiv 1 \text{ em } [0,1];\\
            &\xi \equiv 0 \text{ em } \bR_+ \setminus [0,2];\\
            &0 \leqslant \xi \leqslant 1,
        \end{aligned}
    \end{equation}
    (ver Figura \ref{fig:xi}) e defina $\xi_k(x) = \xi(kx_n)$ e $v_k(x) = u(x) (1 - \xi_k(x))$ para todo $x \in \bR^n_+$ e $k \in \bN$. Dessa forma, podemos escrever
    \[
        \begin{aligned}
            &\dfrac{\partial v_k}{\partial x_n}(x) = (1 - \xi_k(x))\dfrac{\partial u}{\partial x_n}(x) - ku\xi'(kx_n) \;\text{ e}\\
            &\dfrac{\partial v_k}{\partial x'}(x) = (1-\xi_k(x))\dfrac{\partial u}{\partial x'}(x).
        \end{aligned}
    \]
    Consequentemente, as seguintes desigualdades valem:
    \[
        \begin{aligned}
            \int_{\bR^n_+} \Vert Dv_k - Du \Vert^p \,dx &\leqslant c \int_{\bR^n_+} \left( \left\Vert \dfrac{\partial v_k}{\partial x'} - \dfrac{\partial u}{\partial x'} \right\Vert + \left| \dfrac{\partial v_k}{\partial x_n} - \dfrac{\partial u}{\partial x_n} \right| \right)^p dx\\
            &\leqslant c  \int_{\bR^n_+} \left( \xi_k\left\Vert \dfrac{\partial u}{\partial x'} \right\Vert + \xi_k \left| \dfrac{\partial u}{\partial x_n}\right| + k |u| |\xi'|  \right)^p dx,\\ 
        \end{aligned}
    \]
    onde $c$ é uma constante que depende de $p$ e $n$. Deste modo, chegamos a
    \begin{equation} \label{eq:asxa}
        \int_{\bR^n_+} \Vert Dv_k - Du \Vert^p \,dx \leqslant c \int_{\bR^n_+} \xi_k^p \Vert Du \Vert^p dx + ck^p \int_{\bR^n_+} |\xi'|^p |u|^p dx,
    \end{equation}
    onde utilizamos o fato de $(a + b)^p \leqslant 2^p (a^p + b^p)$.
    Observe que $\supp \xi' \subseteq \supp \xi \subseteq [0,2]$. Isto nos diz que $\xi'(kx_n) = 0$ quando $kx_n > 2$ ou $x_n > 2/k$.
    Logo, podemos escrever a última desigualdade como
    \begin{equation}
        \int_{\bR^n_+} \Vert Dv_k - Du \Vert^p \,dx \leqslant c \int_{\bR^{n}_+} \xi_k^p \Vert Du \Vert^p \,dx + ck^p \int_{0}^{\frac{2}{k}} \int_{\bR^{n-1}} |u|^p \,dx'dx_n,
    \end{equation}
    onde estimamos $\xi'$ pelo seu máximo em $[0,2]$.
    Note que
    \begin{equation} \label{eq:plus1}
        \begin{aligned}
            \int_{\bR^{n}_+} |\xi(kx_n)|^p \Vert Du \Vert^p \,dx &= \int_{0}^{\frac{2}{k}} |\xi(kx_n)|^p \int_{\bR^{n-1}} \Vert Du \Vert^p \,dx' dx_n\\
            &\leqslant c \int_{0}^{\frac{2}{k}} \int_{\bR^{n-1}} \Vert Du \Vert^p dx' dx_n \longrightarrow 0,
        \end{aligned}
    \end{equation}
    quando $k \to \infty$, onde estimamos $\xi$ pelo seu máximo em $[0,2]$ e usamos que $u \in \cW^{1,p}(\Omega)$ 
    Além disso, utlizando (\ref{eq:uuuuu}), podemos ecrever
    \begin{equation} \label{eq:plus2}
        \begin{aligned}
            ck^p \int_{0}^{\frac{2}{k}} \int_{\bR^{n-1}} |u|^p dx'dt &\leqslant ck^p \int_{0}^{\frac{2}{k}} t^{p-1} \int_{0}^{t} \int_{\bR^{n-1}} \Vert Du(x'\!,s) \Vert^p \,dx'\!ds dt\\ 
            &\leqslant ck^p\int_0^{\frac{2}{k}} t^{p-1} \int_0^{\frac{2}{k}}  \int_{\bR^{n-1}} \Vert Du(x'\!,s) \Vert dx'\!dsdt\\
            % &\leqslant \left( \int_{0}^\frac{2}{k} t^{p-1} \,dt \right) \left( \int_0^\frac{2}{k} \int_{\bR^{n-1}} \Vert Du(x'\!,s) \Vert^p dx'ds \right)\\
            &\leqslant c \int_0^{\frac{2}{k}} \int_{\bR^{n-1}} \Vert Du(x'\!,s) \Vert^p dx'ds \longrightarrow 0,
        \end{aligned}
    \end{equation}
    quando $k \to \infty$, pois $u \in \cW^{1,p}(\Omega)$.
    Portanto, por (\ref{eq:asxa}) (\ref{eq:plus1}) e (\ref{eq:plus2}), deduzimos que
    \[
        \int_{\bR^n_+} \Vert Dv_k - Du \Vert^p \,dx \to 0,
    \]
    quando $k \to \infty$,
    isto é, $\Vert Dv_k - Du \Vert_{\cL^p(\bR^n_+)} \to 0$ quando $k \to \infty$.

    Por fim, pela definição de $v_k$, inferimos que
    \[
        \Vert v_k - u \Vert_{\cL^p(\bR^n_+)}^p = \int_{\bR^n_+} |v_k - u|^p \,dx = \int_{\bR^n_+} \xi^p_k|u|^p \,dx.
    \]
    De forma análoga ao que foi feito anteriormente, chegamos a
    \begin{equation} \label{eq:plus3}
        \Vert v_k - u \Vert_{\cL^p(\bR^n_+)}^p = \int_{0}^{\frac{2}{k}} \xi(kx_n)^p \int_{\bR^{n-1}} |u(x)|^p \,dx'dx_n \leqslant c \int_{0}^{\frac{2}{k}} \int_{\bR^{n-1}} |u(x)|^p \, dx'dx_n \to 0,
    \end{equation}
    quando $k \to \infty$. Dessa forma,
    \[
        \Vert v_k - u \Vert_{\cW^{1,p}(\bR^n_+)}^p \leqslant \Vert v_k - u \Vert_{\cL^{p}(\bR^n_+)}^p + \Vert Dv_k - Du \Vert_{\cL^{p}(\bR^n_+)}^p \to 0.
    \]

    Defina $u_k = \eta_{\frac{1}{k}} * v_k$. Assim, $u_k \in \cC^{\infty}_c(\bR^n_+)$, para $k$ suficientemente grande (ver Teorema \ref{thm:aprox1}) e 
    \[
        \Vert u_k - u \Vert_{\cW^{1,p}(\bR^n_+)} \leqslant \Vert u_k - v_k \Vert_{\cW^{1,p}(\bR^n_+)} + \Vert v_k - u \Vert_{\cW^{1,p}(\bR^n_+)} \to 0,
    \]
    quando $k \to \infty$ (ver (\ref{eq:plus3})).
    Portanto, $u \in \cW^{1,p}_0(\bR^n_+)$.
\end{prf}

\section{Desigualdades de Sobolev}

Nosso objetivo nessa seção é descobrir formas de incorporar espaços de Sobolev em outros espaços.

Dividiremos o estudo dessas desigualdades em dois casos: $1 \leqslant p < n$ e $n < p \leqslant \infty$.
O caso $p = n$ não será apresentado nesse texto, aos interessados consultar \cite{evans-pde}, p.p. 275.

\subsection{Desigualdade de Gagliardo-Nirenberg-Sobolev}

Seja $1 \leqslant p < n$.
Queremos saber se é possível obter uma desigualdade do tipo\footnote{
    Lembrando que $D : \bR^n \to \bR^n$ representa o gradiente fraco, quando calculamos a norma do gradiente em $\cL^p(\Omega)$ estamos calculando a norma $\cL^p$ da norma Euclidiana do gradiente.
}
\begin{equation} \label{eq:quase-gns}
    \Vert u \Vert_{\cL^q(\bR^n)} \leqslant c \Vert Du \Vert_{\cL^p(\bR^n)},
\end{equation}
onde $c$ é uma constante positiva, $1 \leqslant q < \infty$ e $u \in \cC^\infty_c(\bR^n)$ é não nula, de forma que $c$ e $q$ não dependam de $u$.

Primeiramente, vamos mostrar que se uma desigualdade do tipo (\ref{eq:quase-gns}) é válida, o valor de $q$ não é arbitrário, mas sim admite uma forma especifica.
Para isso, seja $u \in \cC^\infty_c(\bR^n)$ não nula e $\lambda > 0$.
Sendo assim, definimos
\[
    u_\lambda(x) := u(\lambda x).
\]
Aplicando (\ref{eq:quase-gns}) a $u_\lambda$, obtemos
\begin{equation} \label{eq:ulgns}
    \Vert u_\lambda \Vert_{\cL^q(\bR^n)} \leqslant c \Vert Du_\lambda \Vert_{\cL^p(\bR^n)}.
\end{equation}
Note que, pelo Teorema de Mudança de Variáveis (ver Teorema \ref{thm:mudanca-de-variaveis}), podemos escrever
\[
    \Vert u_\lambda \Vert_{\cL^q(\bR^n)}^q = \int_{\bR^n} |u_\lambda|^q \,dx = \int_{\bR^n} |u(\lambda x)|^p \,dx = \frac{1}{\lambda^n} \int_{\bR^n} |u(y)|^q \,dy = \frac{1}{\lambda^n}\Vert u \Vert_{\cL^q(\bR^n)}^q
\]
e
\[
    \begin{aligned}
        \Vert Du_\lambda \Vert_{\cL^p(\bR^n)}^p = \int_{\bR^n} \Vert Du_\lambda \Vert^p \,dx &= \int_{\bR^n} \Vert D(u(\lambda x)) \Vert^p \,dx \\
        &= \int_{\bR^n} \Vert \lambda Du(\lambda x) \Vert^p \,dx = \frac{\lambda^p}{\lambda^n} \int_{\bR^n} \Vert Du(y) \Vert^p \,dy = \frac{\lambda^p}{\lambda^n}\Vert Du \Vert_{\cL^p(\bR^n)}^p.
    \end{aligned}
\]
Utilizando essas duas igualdades acima em (\ref{eq:ulgns}), observamos que
\[
    \frac{1}{\lambda^{\frac{n}{q}}} \Vert u \Vert_{\cL^q(\bR^n)} \leqslant c \frac{\lambda}{\lambda^{\frac{n}{p}}}\Vert Du \Vert_{\cL^p(\bR^n)},
\]
a qual podemos reescrever como
\begin{equation}
    \Vert u \Vert_{\cL^q(\bR^n)} \leqslant c\lambda^{1 - \frac{n}{p}  + \frac{n}{q}}\Vert Du \Vert_{\cL^p(\bR^n)}.
\end{equation}
Observe que se $1 - \frac{n}{p} + \frac{n}{q} > 0$, obtemos uma contradição quando $\lambda \to 0$, pois isso implicaria em $\Vert u \Vert_{\cL^q(\bR^n)} = 0$,
que só acontece se $u = 0$ (o que é uma contradição).
De forma análoga se $1 - \frac{n}{p} + \frac{n}{q} < 0$ obtemos uma contradição quando $\lambda \to \infty$.
Sendo assim, para que a igualdade (\ref{eq:quase-gns}) seja válida, precisamos que
\[
    1 - \frac{n}{p} + \frac{n}{q} = 0,
\]
ou seja,
\[
    q = \frac{np}{n - p}.
\]

Isso motiva a definição abaixo.
\begin{dbox}
    Se $1 \leqslant p < n$, o expoente conjugado de Sobolev de $p$ é dado por
    \[
        p^* = \frac{np}{n - p}.
    \]
\end{dbox}

Os cálculos no início da seção mostram que a desigualdade (\ref{eq:quase-gns}) somente é válida quando $q = p^*$. O resultado abaixo mostra que de fato a desigualdade é verídica.

\begin{tbox}[Desigualdade de Gagliardo-Nirenberg-Sobolev] Seja $1 \leqslant p < n$. Então, existe uma constante $c$, que depende apenas de $p$ e $n$, tal que
\begin{equation} \label{eq:gns}
    \Vert u \Vert_{\cL^{p^*}(\bR^n)} \leqslant c \Vert Du \Vert_{\cL^p(\bR^n)},
\end{equation}
para toda função $u \in \cC^1_c(\bR^n)$.
\end{tbox}
\begin{prf}
    Consideremos dois casos

    \underline{Caso 1:} Considere que $p = 1$ (ou seja, $p^* = \frac{n}{n-1}$).\\
    Como, por hipótese, $u$ tem suporte compacto, temos, pelo Teorema Fundamental do Cálculo, que
    \[
        u(x) = \int_{\m\infty}^{x_i} \dfrac{\partial u}{\partial x_i}(x_1,\dots,y_i,\dots,x_n) \, dy_i,
    \]
    e assim,
    \[
        |u(x)| \leqslant \int_{\m\infty}^{x_i} \left|\dfrac{\partial u}{\partial x_i}(x_1,\dots,y_i,\dots,x_n)\right| \, dy_i  \leqslant \int_{\m\infty}^{\infty} \Vert Du(x_1,\dots,y_i,\dots,x_n) \Vert \,dy_i.
    \]
    Elevando ambos os lados da desigualdade acima a $\frac{1}{n-1}$ e passando ao produtório de $1$ até $n$, obtemos
    \[
        |u(x)|^{\frac{1}{n-1}} \leqslant \prod_{i=1}^n \left( \int_{\m\infty}^{\infty} \Vert Du(x_1,\dots,y_i,\dots,x_n) \Vert \,dy_i \right)^{\frac{1}{n-1}}.
    \]
    Denotando $(x_1,\dots,y_i,\dots,x_n)$ por $X_i$ e integrando ambos os lados da desigualdade acima, em relação a $x_1$, de $-\infty$ a $\infty$, chegamos a
    \[
        \begin{aligned}
            \int_{\m\infty}^{\infty} |u(x)|^{\frac{1}{n-1}} \,dx_1 &\leqslant \int_{\m\infty}^{\infty} \prod_{i=1}^n \left( \int_{\m\infty}^{\infty} \Vert Du(X_i) \Vert \,dy_i \right)^{\frac{1}{n-1}}  dx_1\\ 
            &= \int_{\m\infty}^{\infty} \left( \int_{\m\infty}^{\infty} \Vert Du(X_1    ) \Vert \,dy_1 \right)^{\frac{1}{n-1}}  \prod_{i=2}^n \left(\int_{\m\infty}^{\infty} \Vert Du(X_i) \Vert \, dy_i\right)^{\frac{1}{n-1}} dx_1.
        \end{aligned}
    \]
    Porém, $Du(X_1)$ não depende de $x_1$, então a sua integral é constante em relação a $x_1$. Sendo assim,
    \[
        \int_{\m\infty}^{\infty} |u(x)|^{\frac{1}{n-1}} \,dx_1 \leqslant \left( \int_{\m\infty}^{\infty} \Vert Du(X_1)\Vert \,dy_1 \right)^{\frac{1}{n-1}}\int_{\m\infty}^{\infty}   \prod_{i=2}^n \left(\int_{\m\infty}^{\infty} \Vert Du(X_i) \Vert \, dy_i\right)^{\frac{1}{n-1}} dx_1.
    \]
    Por fim, utilizando a Desigualdade de Hölder Generalizada (ver Teorema \ref{thm:pre-desigualdade-de-holder-gen}) e o Teorema de Fubini (ver Teorema \ref{thm:fubini}), a desigualdade acima se torna
    \[
        \int_{\m\infty}^{\infty} |u(x)|^{\frac{1}{n-1}} \,dx_1 \leqslant \left( \int_{\m\infty}^{\infty} \Vert Du(X_1)\Vert \,dy_1 \right)^{\frac{1}{n-1}}\prod_{i=2}^n \left(\int_{\m\infty}^{\infty}   \int_{\m\infty}^{\infty} \Vert Du(X_i) \Vert \, dx_1dy_i\right)^{\frac{1}{n-1}}.
    \]
    Agora integrando a desigualdade acima em relação a $x_2$ de $-\infty$ a $\infty$, obtemos
    \[
        \int_{\m\infty}^{\infty}\int_{\m\infty}^{\infty} |u(x)|^{\frac{1}{n-1}} \,dx_1dx_2 \leqslant \int_{\m\infty}^{\infty}\!\!\left( \int_{\m\infty}^{\infty} \Vert Du(X_1)\Vert \,dy_1 \right)^{\frac{1}{n-1}}\prod_{i=2}^n \left(\int_{\m\infty}^{\infty} \!\int_{\m\infty}^{\infty} \Vert Du(X_i) \Vert \, dx_1dy_i\right)^{\frac{1}{n-1}} dx_2.
    \]
    Por conseguinte, resulta
    \[
        \int_{\m\infty}^{\infty}\int_{\m\infty}^{\infty} |u(x)|^{\frac{1}{n-1}} \,dx_1dx_2 \leqslant \int_{\m\infty}^{\infty} I_1^{\frac{1}{n-1}}I_2^{\frac{1}{n-1}}\prod_{i=3}^n I_i^{\frac{1}{n-1}} dx_2,
    \]
    onde
    \[
        I_1 = \int_{\m\infty}^{\infty} \Vert Du(X_1)\Vert \,dy_1 \text{ e } I_i = \int_{\m\infty}^{\infty} \!\int_{\m\infty}^{\infty} \Vert Du(X_i) \Vert \, dx_1dy_i \quad(i = 2,\dots,n).
    \]
    Porém, $I_2$ é constante em relação a $x_2$, então
    \[
        \int_{\m\infty}^{\infty}\int_{\m\infty}^{\infty} |u(x)|^{\frac{1}{n-1}} \,dx_1dx_2 \leqslant I_2^{\frac{1}{n-1}}\int_{\m\infty}^{\infty} I_1^{\frac{1}{n-1}}\prod_{i=3}^n I_i^{\frac{1}{n-1}} dx_2.
    \]
    Novamente, utilizando a Desigualdade de Hölder Generalizada e o Teorema de Fubini (ver Teoremas \ref{thm:pre-desigualdade-de-holder-gen} e \ref{thm:fubini}), inferimos
    {\small
    \[
        \begin{aligned}
            \int_{\m\infty}^{\infty}\int_{\m\infty}^{\infty} |u(x)|^{\frac{n}{n-1}} \,dx_1dx_2 \leqslant &\left( \int_{\m\infty}^{\infty} \int_{\m\infty}^{\infty} \Vert Du(X_1) \Vert \,dy_1 dx_2 \right)^{\frac{1}{n-1}}\\ &\left( \int_{\m\infty}^{\infty} \int_{\m\infty}^{\infty} \Vert Du(X_2) \Vert \,dx_1 dy_2 \right)^{\frac{1}{n-1}} \prod_{i=3}^n \left( \int_{\m\infty}^{\infty}\int_{\m\infty}^{\infty}\int_{\m\infty}^{\infty} \Vert Du(X_i) \Vert \,dx_1dx_2dy_i \right)^{\frac{1}{n-1}} \!\!.
        \end{aligned}
    \]\!}
    Indutivamente, repetindo esse processo de integração, chegamos a
    \[
        \begin{aligned}
            \Vert u \Vert_{\cL^{p^*}(\bR^n)}^{p^*} &= \int_{\bR^n} |u|^{\frac{n}{n-1}} \, dx \\
            &\leqslant \prod_{i=1}^n \left( \int_{\m\infty}^{\infty} \cdots \int_{\m\infty}^\infty \Vert Du \Vert dx_1\dots dy_i \dots dx_n \right)^{\frac{1}{n-1}}
            = \left(\int_{\bR^n} \Vert Du \Vert\,dx\right)^{\frac{n}{n-1}} = \Vert Du \Vert_{\cL^1(\bR^n)}^{p^*}.
        \end{aligned}
    \]
    Ou seja,
    \begin{equation} \label{eq:desigualdadegnss}
        \Vert u \Vert_{\cL^{p^*}(\bR^n)} \leqslant\Vert Du \Vert_{\cL^1(\bR^n)},
    \end{equation}
    como queriamos mostrar.

    \underline{Caso 2:} Assuma que $1 < p < n$.\\
    Considere a função $|u|^\gamma$, com $\gamma > 1$ a ser escolhido a seguir. Utilizando a desigualdade obtida no caso $p = 1$, podemos escrever
    \[
        \left( \int_{\bR^n} |u|^{\frac{\gamma n}{n - 1}}  \, dx\right)^{\frac{n-1}{n}} = \left( \int_{\bR^n} \Big[ |u|^\gamma \Big]^{\frac{n}{n-1}} \,dx \right)^{\frac{n-1}{n}} \leqslant \int_{\bR^n} \Vert D(|u|^{\gamma}) \Vert \,dx = \gamma \int_{\bR^n} |u|^{\gamma-1} \Vert Du \Vert \,dx.
    \]
    Utilizando a desigualdade de Hölder (ver Teorema \ref{thm:pre-desigualdade-de-holder}) na última integral, obtemos
    \begin{equation} \label{eq:bnbn}
        \left( \int_{\bR^n} |u|^{\frac{\gamma n}{n - 1}}  \, dx\right)^{\frac{n-1}{n}} \leqslant \gamma\left( \int_{\bR^n} |u|^{(\gamma-1)\frac{p}{p-1}} \,dx \right)^{\frac{p-1}{p}} \left( \int_{\bR^n} \Vert Du \Vert^p \,dx \right)^{\frac{1}{p}}.
    \end{equation}
    Escolhendo $\gamma$ de forma que $\displaystyle\frac{\gamma n}{n - 1} = (\gamma -1)\frac{p}{p-1}$, isto é,
    \[
        \gamma = \frac{p(n-1)}{n-p}.
    \]
    Nesse caso, $\displaystyle\frac{\gamma n}{n-1} = p^*$. Sendo assim, por (\ref{eq:bnbn}) podemos escrever
    \[
        \Vert u \Vert_{\cL^{p^*}(\bR^n)} = \left( \int_{\bR^n} |u|^{p^*} \,dx \right)^{\frac{1}{p^*}} \leqslant c \left( \int_{\bR^n} \Vert Du \Vert^p \,dx\right)^{\frac{1}{p}} = \Vert Du \Vert_{\cL^p(\bR^n)},
    \]
    finalizando a demonstração.
\end{prf}

\obs Note que o suporte compato é necessário, como exemplo tome a função $u(x) = 1$, para todo $x \in \bR^n$. Dessa forma $\Vert Du \Vert \equiv 0$. Consequentemente,
\[
    \Vert u \Vert_{\cL^{p^*}(\bR^n)} \leqslant 0 \implies u \equiv 0,
\]
que é uma contradição.

Agora, mostraremos que $\cW^{1,p}(\Omega) \subseteq \cL^{p^*}(\Omega)$, sobre certas condições de $p$ e $\Omega$.

\begin{tbox} \label{thm:desigualdade-teorema-2}
    Sejam $\Omega$ um aberto limitado, com fronteira de classe $\cC^1$ e $u \in \cW^{1,p}(\Omega)$. Então. $u \in \cL^{p^*}(\Omega)$ e, além disso,
    \[
        \Vert u \Vert_{\cL^{p^*}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)},
    \]
    onde $c > 0$ é uma constante que depende apenas de $n$, $p$ e $\Omega$.
\end{tbox}
\begin{prf}
    Utilizando o Teorema \ref{thm:extensao}, podemos considerar a extensão de $u$ $Eu = \bar u$ tal que
    \begin{equation} \label{eq:man}
        \begin{aligned}
            &\bar u = u \text{ qtp em } \Omega;\\
            &\bar u \text{ tem suporte compacto};\\
            &\Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c\Vert u \Vert_{\cW^{1,p}(\Omega)}.
        \end{aligned}
    \end{equation}
    Como $\bar u$ tem suporte compacto, sabemos que existe uma sequência $(u_k)$, dada por $\eta_{\frac{1}{k}} * \bar u$, tal que
    \begin{equation} \label{eq:mna}
        \Vert u_k - \bar u \Vert_{\cW^{1,p}(\Omega)} \to 0,
    \end{equation}
    quando $k \to \infty$,
    e para $k$ grande $u_k \in \cC^{\infty}_c(\bR^n)$ (ver Teorema \ref{thm:aprox1}).
    Pela Desigaldade de Gagliardo-Nirenberg-Sobolev (\ref{eq:gns}), concluímos que
    \begin{equation} \label{eq:iiii}
        \Vert u_k - u_\ell \Vert_{\cL^{p^*}(\bR^n)} \leqslant c \Vert Du_k - Du_\ell \Vert_{\cL^p(\bR^n)},
    \end{equation}
    para todo $k, \ell \in \bN$.
    Note que, por (\ref{eq:mna}), temos que
    \begin{equation} \label{eq:jjj}
        \Vert Du_k - D\bar u \Vert_{\cL^p(\bR^n)} \leqslant \Vert u_k - \bar u \Vert_{\cW^{1,p}(\bR^n)} \to 0, 
    \end{equation}
    quando $k \to \infty$.
    Isso mostra que $(Du_k)$ é convergente (e portanto, de Cauchy) em $\cL^p(\bR^n)$.
    Consequentemente, por (\ref{eq:iiii}), observamos que $(u_k)$ é de Cauchy em $\cL^{p^*}(\bR^n)$, o qual é um espaço completo (ver Teorema \ref{thm:lp-completo-pre}). Logo, existe $v \in \cL^{p^*}(\bR^n)$ tal que $u_k \to v$ em $\cL^{p^*}(\bR^n)$. Portanto, pelo Teorema \ref{thm:teorema-do-brezis}, a menos de uma subsequência $u_k(x) \to v(x)$ qtp em $\bR^n$, quando $k \to \infty$. Analogamente, por (\ref{eq:mna}) $u_k(x) \to \bar u(x)$ qtp em $\bR^n$, quando $k \to \infty$, desde que
    \begin{equation} \label{eq:jjjj}
        \Vert u_k - \bar u \Vert_{\cL^p(\bR^n)} \leqslant \Vert u_k - \bar u \Vert_{\cW^{1,p}(\bR^n)} \to 0,
    \end{equation}
    quando $k \to \infty$. Com isso, $v(x) = \bar u(x)$ qtp em $\bR^n$.
    Dessa forma,
    \[
        \Vert u_k - \bar u \Vert_{\cL^{p^*}(\bR^n)} \to 0,
    \]
    quando $k \to \infty$.
    A Desigualdade de Gagliardo-Nirenberg-Sobolev também implica em
    \[  
        \Vert u_k \Vert_{\cL^{p^*}(\bR^n)} \leqslant c \Vert Du_k \Vert_{\cL^p(\bR^n)},
    \]
    para todo $k \in \bN$.
    Passando ao limite, quando $k \to \infty$, obtemos, por (\ref{eq:jjj}) e (\ref{eq:jjjj}), que
    \[
        \Vert \bar u \Vert_{\cL^{p^*}(\bR^n)} \leqslant c \Vert D \bar u \Vert_{\cL^p(\bR^n)}.
    \]
    Essa desigualdade finaliza a demonstração, já que, por (\ref{eq:man}), vale
    \[
        \Vert u \Vert_{\cL^{p^*}(\Omega)} = \Vert \bar u \Vert_{\cL^{p^*}(\Omega)} \leqslant \Vert \bar u \Vert_{\cL^{p^*}(\bR^n)} \leqslant c \Vert D \bar u \Vert_{\cL^p(\bR^n)} \leqslant c \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)},
    \]
    como queriamos mostrar.
\end{prf}

Agora, vamos provar uma desigualdade de Sobolev que generaliza a famosa desigualdade de Poincaré.

\begin{tbox} \label{thm:poincaregen}
    Sejam $\Omega$ um aberto limitado e $u \in \cW^{1,p}_0(\Omega)$, com $1 \leqslant p < n$, então a desigualdade
    \begin{equation} \label{eq:poincaregen}
        \Vert u \Vert_{\cL^q(\Omega)} \leqslant c \Vert Du \Vert_{\cL^p(\Omega)},
    \end{equation}
    é válida para $1 \leqslant q \leqslant p^*$ e $c$ é uma constante que depende de $p, q$ e $n$.
\end{tbox}
\begin{prf} ~

    \underline{Caso 1:} Assuma $q = p^*$.\\
    Como $u \in \cW^{1,p}_0(\Omega)$, conseguimos uma sequência de funções $(u_k)$ em $\cC^{\infty}_c(\Omega)$ tal que $u_k \to u$ em $\cW^{1,p}(\Omega)$, quando $k \to \infty$.
    Além disso, podemos estender cada $u_k$ para ser $0$ em $\bR^n \setminus \Omega$.
    Sendo assim, aplicamos a Desigualdade de Gagliardo-Nirenberg-Sobolev (\ref{eq:gns}) para obter
    \begin{equation} \label{eq:passarolimite}
        \Vert u_k \Vert_{\cL^{p*}(\Omega)} \leqslant c \Vert Du_k \Vert_{\cL^p(\Omega)},
    \end{equation}
    para todo $k \in \bN$.
    Como $\Vert u_k - u \Vert_{\cW^{1,p}(\Omega)} \to 0$, quando $k \to \infty$, segue que $\Vert u_k - u \Vert_{\cL^p(\Omega)}$ e $\Vert Du_k - Du \Vert_{\cL^p(\Omega)} \to 0$, quando $k \to \infty$.
    Sendo assim, pelo Teorema \ref{thm:teorema-do-brezis}, passando a uma subsequência (se necessário), chegamos a
    \begin{equation} \label{eq:uku}
        u_k(x) \to u(x) \text{ qtp em } \Omega.
    \end{equation}
    Por outro lado, pela Desigualdade de Gagliardo-Nirenberg-Sobolev (\ref{eq:gns}), inferimos que
    \[
        \Vert u_k - u_\ell \Vert_{\cL^{p^*}(\Omega)} \leqslant c \Vert Du_k - Du_\ell \Vert_{\cL^p(\Omega)} \to 0,
    \]
    quando $k,\ell \to \infty$, pois $(Du_k)$ é convergente (em particular, de Cauchy) em $\cL^p(\Omega)$. Isto nos diz que $(u_k)$ é de Cauchy em $\cL^{p^*}(\Omega)$, que é um espaço completo (ver Teorema \ref{thm:lp-completo-pre}). Dito isso, existe $v \in \cL^{p^*}(\Omega)$ tal que $u_k \to v$ em $\cL^{p^*}(\Omega)$.
    Novamente, utilizando o Teorema \ref{thm:teorema-do-brezis}, passando a uma subsequência (se necessário), segue que
    \begin{equation} \label{eq:ukv}
        u_k(x) \to v(x) \text{ qtp em } \Omega.
    \end{equation}
    Logo, por (\ref{eq:uku}) e (\ref{eq:ukv}), $v \equiv u$ qtp em $\Omega$.
    Dessa forma,
    \[
        \Vert u_k - u \Vert_{\cL^{p*}(\Omega)} \to 0,
    \]
    quando $k \to \infty$.
    Passando ao limite em (\ref{eq:passarolimite}), quando $k\to\infty$, chegamos a
    \[
        \Vert u \Vert_{\cL^{p^*}}(\Omega) \leqslant c \Vert Du \Vert_{\cL^p(\Omega)}.
    \]
    Provando o caso em que $q = p^*$. 
    
    \underline{Caso 2:} Assuma que $1 < q < p^*$.\\
    Como $\Omega$ é limitado, temos, pelo Teorema \ref{thm:omega-limitado} e por (\ref{eq:gns}), que
    \[
        \Vert u \Vert_{\cL^q(\Omega)} \leqslant c\Vert u \Vert_{\cL^{p^*}(\Omega)} \leqslant c \Vert Du \Vert_{\cL^p(\Omega)}.
    \]
    Portanto, a desigualdade (\ref{eq:poincaregen}) é válida para todo $1 \leqslant p < n$ e $1 \leqslant q \leqslant p^*$.
\end{prf}

Um caso particular da desigualdade (\ref{eq:poincaregen}) é a Desigualdade de Poincaré que será apresentada no resultado abaixo.

\begin{cbox}[Desigualdade de Poincaré] \label{cl:poincare}
   Sejam $\Omega$ um aberto limitado e $u \in \cW^{1,p}_0(\Omega)$, com $1 \leqslant p \leqslant \infty$. Então, a desigualdade
   \[
        \Vert u \Vert_{\cL^p(\Omega)} \leqslant c\Vert Du \Vert_{\cL^p(\Omega)}
   \]
   é válida,
   onde $c$ é uma constante que depende de $p, q$ e $n$.
\end{cbox}
\begin{prf}
    Primeiramente considere $1 \leqslant p < n$.
    Por definição, $1 \leqslant p < p^*$. Além disso, pelo Teorema \ref{thm:desigualdade-teorema-2}, concluímos que
    \[
        \Vert u \Vert_{\cL^p(\Omega)} \leqslant c \Vert Du \Vert_{\cL^p(\Omega)}.
    \]

    Agora considere que $n \leqslant p < \infty$, e $1 \leqslant s < n$ tal que $p < s^*$ (isto é possível pois $s^* \to \infty$ se $s \to n^-$).
    Note que, pelo Teorema \ref{thm:omega-limitado}, podemos escrever
    \[
        \Vert u \Vert_{\cL^p(\Omega)} \leqslant \Vert u \Vert_{\cL^{s^*}(\Omega)} \leqslant c \Vert Du \Vert_{\cL^s(\Omega)} \leqslant c \Vert Du \Vert_{\cL^p(\Omega)},
    \]
    já que $1 \leqslant p < s^*$, $s < p$ e $\Omega$ é limitado.
    Por fim, considere $p = \infty$.
    Pelo Teorema \ref{thm:poincaregen}, temos que
    \[
        \Vert u \Vert_{\cL^{q^*}(\Omega)} \leqslant c \Vert Du \Vert_{\cL^{q}(\Omega)} \leqslant c \Vert Du \Vert_{\cL^\infty(\Omega)},
    \]
    para todo $1 \leqslant q < n$.
    Passando ao limite, quando $q \to n^-$, temos que $q^* \to \infty$ e, consequentemente pelo Teorema \ref{thm:omega-limitado}, $\Vert u \Vert_{\cL^\infty(\Omega)} \leqslant c \Vert Du \Vert_{\cL^\infty(\Omega)}$.
    Portanto,
    \[
        \Vert u \Vert_{\cL^p(\Omega)} \leqslant c\Vert Du \Vert_{\cL^p(\Omega)},
    \]
    para todo $1 \leqslant p \leqslant \infty$.
\end{prf}

Podemos mostrar que $\Vert u \Vert_{\cW_0^{1,p}(\Omega)} := \Vert Du \Vert_{\cL^p(\Omega)}$ é uma norma em $\cW^{1,p}_0(\Omega)$, equivalente a norma usual dos espaços de Sobolev $\Vert u \Vert_{\cW^{1,p}(\Omega)}$. Com efeito, pelo Corolário \ref{cl:poincare}, temos que
\[
    \Vert u \Vert_{\cW^{1,p}(\Omega)} = \Vert u \Vert_{\cL^p(\Omega)}^p + \Vert Du \Vert_{\cL^p(\Omega)}^p \leqslant c \Vert Du \Vert_{\cL^p(\Omega)}^p + \Vert Du \Vert_{\cL^p(\Omega)}^p \leqslant c \Vert Du \Vert_{\cL^p(\Omega)} = c \Vert u \Vert_{\cW^{1,p}_0(\Omega)}.
\]
para todo $u \in \cW^{1,p}_0(\Omega)$.
Por outro lado, é verdade que
\[
    \Vert u \Vert_{\cW^{1,p}_0(\Omega)} = \Vert Du \Vert_{\cL^p(\Omega)} \leqslant \Vert u \Vert_{\cW^{1,p}(\Omega)},
\]
para todo $u \in \cW^{1,p}_0(\Omega)$.
Portanto, as normas $\Vert \cdot \Vert_{\cW^{1,p}(\Omega)}$ e $\Vert \cdot \Vert_{\cW^{1,p}_0(\Omega)}$ são equivalentes em $\cW^{1,p}_0(\Omega)$.

Além disso, pelo Teorema \ref{thm:poincaregen} e pelo Corolário \ref{cl:poincare}, podemos qescrever 
\[
    \cW^{1,p}_0(\Omega) \hookrightarrow \cL^q(\Omega) \quad (1 \leqslant q \leqslant p^*) \;\text{ e }\; \cW^{1,s}_0(\Omega) \hookrightarrow \cL^{s^*}(\Omega) \quad (1 \leqslant s \leqslant \infty).
\]
Isto é o mesmo que dizer que $\cW^{1,p}_0(\Omega) \subseteq \cL^q(\Omega)$ com $1 \leqslant q \leqslant p^*$ e $1 \leqslant p < n$, $\cW^{1,s}(\Omega) \subseteq \cL^{s^*}(\Omega)$, com $1 \leqslant s \leqslant \infty$ e o operador inclusão $i$ (em cada um dos casos) é um operador linear limitado.

\subsection{Desigualdade de Morrey}

A próxima classe de desigualdades realiza uma conexão entre os espaços de Hölder (que veremos a definição a seguir) e os espaços de Sobolev.

\begin{dbox}
    Uma função $u : \Omega \to \bR$ é dita ser Hölder contínua, com expoente $\gamma \in (0,1]$, quando
    \[
        |u(x) - u(y)| \leqslant c \Vert x - y \Vert^\gamma,
    \]
    para todo $x,y \in \Omega$. Além disso, denotamos o espaço dessas funções por $\cC^{0,\gamma}(\overline\Omega)$.
\end{dbox}

\begin{dbox}
    Se $u : \Omega \to \bR$ é uma função contínua e limitada, escrevemos
    \[
        \Vert u \Vert_{\cC^{0,\gamma}(\overline\Omega)} = \Vert u \Vert_{\cC(\overline\Omega)} + [u]_{\cC^{0,\gamma}(\overline\Omega)},
    \]
    onde
    \[
        \Vert u \Vert_{\cC(\overline\Omega)} = \sup_{x \in \Omega} |u(x)| \;\text{ e }\; [u]_{\cC^{0,\gamma}(\overline\Omega)} = \sup_{\substack{x,y \in \Omega\\x \neq y}} \left\{ \frac{|u(x) - u(y)|}{\Vert x - y \Vert^\gamma} \right\},
    \]
    para denotar a norma de $u$ no espaço de Hölder $\cC^{0,\gamma}(\overline\Omega)$.
\end{dbox}

Com essas definições, estamos prontos para enunciar e demonstrar a Desigualdade de Morrey.

\begin{tbox}[Desigualdade de Morrey] \label{thm:holdersobolev1}
    Sejam $u \in \cC^1(\bR^n)$, $n < p \leqslant \infty$ e $\gamma = 1 - \frac{n}{p}$. Então,
    \[
        \Vert u \Vert_{\cC^{0,\gamma}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\bR^n)},
    \]
    onde $c$ é uma constante que depende apenas de $p$ e $n$.
\end{tbox}
\begin{prf}
    Primeiramente, escolha uma bola $B(x,r) \subseteq \bR^n$.
    Afirmamos que existe uma constante $c > 0$ dependendo apenas de $n$ tal que\footnote{A integral
    \[
        \sint_{B(x,r)} f\,dy := \frac{1}{\sigma(n)r^n}\int_{B(x,r)} f \,dy
    \]
    onde $\sigma(n)r^n$ é o volume da esfera $n$-dimensional, representa a média da função $f$ sobre $B(x,r)$.}
    \begin{equation} \label{eq:desigualdade-uyux}
        \sint_{B(x,r)} |u(y) - u(x)| \,dy \leqslant c \int_{B(x,r)} \frac{\Vert Du(y) \Vert}{\Vert y - x \Vert^{n-1}} \,dy.
    \end{equation}
    Com efeito, fixando $w \in \partial B(0,1)$ e $0 < s < r$, segue, do Teorema Fundamental do Cálculo e da Regra da cadeia, que
    \[
        |u(x + sw) - u(x)| = \left| \int_0^s \frac{du}{dt} (x + tw) \,dt \right| = \left|\int_0^s Du(x + tw) \cdot w \,dt \right| \leqslant \int_0^s \Vert Du(x + tw) \Vert \,dt,
    \]
    onde utilizamos a Desigualdade de Cauchy-Schwarz e o fato de $\Vert w \Vert = 1$. Logo, integrando ambos os lados da desigualdade acima sobre $\partial B(0,1)$ e aplicando o Teorema de Fubini (ver Teorema \ref{thm:fubini}), obtemos
    \[
        \begin{aligned}
            \int_{\partial B(0,1)} |u(x + sw) - u(x)|\,dS_w &\leqslant  \int_0^s \int_{\partial B(0,1)} \Vert Du(x + tw) \Vert \,dS_wdt\\ 
            &= \int_0^s \int_{\partial B(0,1)} \Vert Du(x + tw) \Vert \frac{t^{n-1}}{t^{n-1}} \,dS_wdt.
        \end{aligned}
    \]
    Seja $y = x + tw$, de forma que $t = \Vert x - y \Vert$. Assim, por meio de coordenadas polares e mudança de variáveis (ver Teoremas \ref{thm:coordenadas-polares} e \ref{thm:mudanca-de-variaveis}) obtemos
    \[
        \int_{\partial B(0,1)} |u(x + sw) - u(x)|\,dS_w \leqslant \int_0^s \int_{B(x,t)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dS_ydt =  \int_{B(x,s)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dy
    \]
    e, como $s < r$, tem-se
    \[
        \int_{\partial B(0,1)} |u(x + sw) - u(x)|\,dS_w \leqslant   \int_{B(x,r)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dy.
    \]
    Multiplicando a equação acima por $s^{n-1}$ e integrando de $0$ a $r$, com respeito a $s$, chegamos a
    \[
        \int_0^r s^{n-1} \int_{\partial B(0,1)} |u(x + sw) - u(x)| \,dS_wds \leqslant \int_0^r s^{n-1} \int_{B(x,r)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dyds.
    \]
    Fazendo a mudança de variáveis $y = x + sw$, obtemos
    \[
        \int_0^r \int_{\partial B(x,s)} |u(y) - u(x)|\, dS_yds \leqslant \left( \int_{B(x,r)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dy \right) \bigg( \int_0^r s^{n-1} ds \bigg).
    \]
    Utilizando coordenadas polares (ver Teorema \ref{thm:coordenadas-polares}) no lado esquerdo e resolvendo a última integral do lado direito da desigualdade acima, segue que
    \[
        \int_{B(x,r)} |u(y) - u(x)|\,dy \leqslant \frac{r^n}{n} \int_{B(x,r)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dy.
    \]
    Por fim, dividindo ambos os lados por $\sigma(n) r^n$ (volume da $n$-esfera de raio $r$), temos
    \[
        \sint_{B(x,r)} |u(y) - u(x)| \,dy \leqslant \frac{1}{n\sigma(n)} \int_{B(x,r)} \frac{\Vert Du(y) \Vert}{\Vert x-y \Vert^{n-1}} \,dy.
    \]
    Isso prova (\ref{eq:desigualdade-uyux}).

    Agora, fixe $x \in \bR^n$. Note que, podemos escrever
    \[
        |u(x)| = \frac{|u(x)|}{\sigma(n)}\int_{B(x,1)} dy = \sint_{B(x,1)} |u(x)| \,dy.
    \]
    Dito isso, deduzimos que
    \begin{equation} \label{eq:ux}
        |u(x)| \leqslant \sint_{B(x,1)} |u(x) - u(y)| \,dy + \sint_{B(x,1)} |u(y)|\,dy.
    \end{equation}
    Observe que, pela desigualdade de Hölder (ver Teorema \ref{thm:pre-desigualdade-de-holder}), inferimos
    \begin{equation} \label{eq:uylp}
        \begin{aligned}
            \sint_{B(x,1)} |u(y)| \,dy &= \frac{1}{\sigma(n)} \int_{B(x,1)} |u(y)| \,dy\\ 
            &\leqslant \frac{1}{\sigma(n)} \left( \int_{B(x,1)} |u(y)|^p\,dy \right)^{\frac{1}{p}} \left( \int_{B(x,1)} 1^{p'} \,dy \right)^{\frac{1}{p'}} \leqslant c \Vert u \Vert_{\cL^p(\bR^n)},
        \end{aligned}
    \end{equation}
    onde $p$ e $p'$ são expoentes conjugados.
    Além disso, utilizando a desigualdade de Hölder novamente, chegamos a
    \begin{equation} \label{eq:llk}
        \int_{B(x,1)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dy \leqslant \left( \int_{B(x,1)} \Vert Du \Vert^p \,dy \right)^{\frac{1}{p}} \left( \int_{B(x,1)} \frac{dy}{\Vert x - y \Vert^{(n-1)p'}} \right)^{\frac{1}{p'}},
    \end{equation}
    onde $p$ e $p'$ são expoentes conjugados e a última integral é finita.
    De fato, utilizando coordenadas polares (ver Teorema \ref{thm:coordenadas-polares}), concluímos que
    \[
        \begin{aligned}
            \int_{B(x,1)} \frac{dy}{\Vert x - y \Vert^{(n-1)p'}} &= \int_0^1 \int_{\partial B(x,r)} \frac{1}{r^{(n-1)p'}} dS_rdr\\
            &= n\sigma(n)\int_0^1 r^{(n-1)(1-p')} \,dr = n \sigma(n)  \frac{p-1}{p-n} < \infty,
        \end{aligned}
    \]
    pois $n < p$.
    Dito isso, por (\ref{eq:llk}), segue que
    \begin{equation} \label{eq:duxy}
        \int_{B(x,1)} \frac{\Vert Du(y) \Vert}{\Vert x - y \Vert^{n-1}} \,dy \leqslant c\Vert Du \Vert_{\cL^p(\bR^n)}.
    \end{equation}
    Dessa forma, por (\ref{eq:desigualdade-uyux}), (\ref{eq:ux}), (\ref{eq:uylp}) e (\ref{eq:duxy}), deduzimos que
    \[
        |u(x)| \leqslant c \Vert u \Vert_{\cW^{1,p}(\bR^n)}.
    \]
    Como $x$ é arbitrário, também obtemos
    \begin{equation} \label{eq:normac}
        \Vert u \Vert_{\cC(\bR^n)} = \sup_{x \in \bR^n} |u(x)| \leqslant c \Vert u \Vert_{\cW^{1,p}(\bR^n)}.
    \end{equation}

    \begin{figure}
        \centering
        \begin{tikzpicture}
            \def\CA{(0,0) circle (2)}
            \def\CB{(2,0) circle (2)}
            \draw[dashed, thick, black!45] \CA \CB;
            \begin{scope}
                \clip \CA;
                \fill[tangerine!40] \CB;
            \end{scope}     
            \begin{scope}
                \clip \CA;
                \draw[tangerine, dashed, very thick] \CB;
            \end{scope}
            \begin{scope}
                \clip \CB;
                \draw[tangerine, dashed, very thick] \CA;
            \end{scope}    
    
            \node[above=2pt] at (0,2) {$B(x,r)$};
            \node[above=2pt] at (2,2) {$B(y,r)$};
    
            \draw (0,0) to node[above] {$r$} (2,0);
    
            \filldraw (0,0) circle (0.05) node[below=2pt] {$x$};
            \filldraw (2,0) circle (0.05) node[below=2pt] {$y$};
        \end{tikzpicture}
        \caption{$B = B(x,r) \cap B(y,r)$.\\
        Fonte: Autoral.}
        \label{fig:B}
    \end{figure}
    Agora, considere $x, y \in \bR^n$ e denote $r = \Vert x - y \Vert$. Portando, seja $B = B(x,r) \cap B(y,r)$ (ver Figura \ref{fig:B}), sendo assim
    \begin{equation} \label{eq:abcd}
        |u(x) - u(y)| = \sint_{B} |u(x) - u(y)| \,dz \leqslant \sint_{B} |u(x) - u(z)| \,dz + \sint_B |u(y) - u(z)| \,dz.
    \end{equation}
    Calculando a primeira integral acima, obtemos, por (\ref{eq:desigualdade-uyux}), que
    \[
        \sint_B |u(x) - u(z)| \,dz \leqslant \sint_{B(x,r)} |u(z) - u(x)| \,dz \leqslant c \int_{B(x,r)} \frac{\Vert Du(z) \Vert}{\Vert z - x \Vert^{n-1}} \,dz.
    \]
    Analogamente a (\ref{eq:duxy}), inferimos que
    \[
        \sint_B |u(x) - u(z)| \,dz \leqslant cr^{1 - \frac{n}{p}} \Vert Du \Vert_{\cL^p(\bR^n)}.
    \]
    Da mesma forma, segue que
    \[
        \sint_B |u(y) - u(z)| \,dz \leqslant cr^{1 - \frac{n}{p}} \Vert Du \Vert_{\cL^p(\bR^n)}.
    \]

    Sendo assim, por (\ref{eq:abcd}), podemos escrever
    \[
        |u(x) - u(y)| \leqslant c \Vert x - y \Vert^{1 - \frac{n}{p}} \Vert Du \Vert_{\cL^p(\bR^n)}.
    \]
    Isso mostra que
    \begin{equation} \label{eq:seminormau}
        [u]_{\cC^{0,\gamma}(\bR^n)} = \sup_{\substack{x,y \in \bR^n\\x \neq y}} \left\{ \frac{|u(x) - u(y)|}{\Vert x - y \Vert^{\gamma}} \right\} \leqslant c \Vert Du \Vert_{\cL^p(\bR^n)}.
    \end{equation}
    Portanto, por (\ref{eq:normac}) e (\ref{eq:seminormau}), concluímos que
    \[
        \Vert u \Vert_{\cC^{0,\gamma}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\bR^n)}.
    \]
\end{prf}

Para demonstrar a próxima desigualdade de Sobolev, precisamos do seguinte resultado

\begin{tbox} \label{thm:holder-completo}
    O espaço de Hölder $(\cC^{0,\gamma}(\overline\Omega), \Vert \cdot \Vert_{\cC^{0,\gamma}(\overline\Omega)})$ é um espaço de Banach.
\end{tbox}
\begin{prf}
    Ver \cite{irina-holder.spaces}, p.p. 5.
\end{prf}

\begin{tbox}
    Seja $\Omega$ um aberto limitado, com $\partial\Omega$ de classe $\cC^1$.
    Considere $u \in \cW^{1,p}(\Omega)$ com $n < p \leqslant \infty$.
    Então, $u$ tem uma versão (coincide com $u$ qtp em $\Omega$) contínua $u^* \in \cC^{0,\gamma}(\overline\Omega)$, com $\gamma = 1 - \frac{n}{p}$, tal que
    \[
        \Vert u^*  \Vert_{\cC^{0,\gamma}(\overline\Omega)} \leqslant \Vert u \Vert_{\cW^{1,p}(\Omega)},
    \]
    onde $c$ é um constante que depende de $n$, $p$ e $\Omega$.
\end{tbox}
\begin{prf}
    Utilizando o Teorema \ref{thm:extensao}, podemos considerar a extensão de $u$, $Eu = \bar u$, tal que
    \begin{equation} \label{eq:oll}
        \begin{aligned}
            &\bar u = u \text{ qtp em } \Omega;\\
            &\bar u \text{ tem suporte compacto};\\
            &\Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant \Vert u \Vert_{\cW^{1,p}(\Omega)}.
        \end{aligned}
    \end{equation}
    Além disso, como $\supp \bar u$ é compacto, temos, pelo Teorema \ref{thm:aprox1}, que existe uma sequência $(u_k) \subseteq \cC^\infty_c(\bR^n) \subseteq \cC^1(\bR^n)$, para $k$ suficientemente grande, tal que
    \begin{equation} \label{eq:oll1}
        \Vert u_k - \bar u \Vert_{\cW^{1,p}(\bR^n)} \to 0,
    \end{equation}
    quando $k \to \infty$
    Além disso, pelo Teorema \ref{thm:holdersobolev1}, podemos escrever
    \[
        \Vert u_k -u_l \Vert_{\cC^{0,\gamma}(\bR^n)} \leqslant c \Vert u_k - u_l \Vert_{\cW^{1,p}(\bR^n)},
    \]
    para todo $k, \ell \in \bN$.
    Isto nos diz que $(u_k)$ é de Cauchy em $\cC^{0,\gamma}(\bR^n)$ (pois é de Cauchy em $\cW^{1,p}(\bR^n)$).
    Como $\cC^{0,\gamma}(\bR^n)$ é completo (ver Teorema \ref{thm:holder-completo}), existe uma função $u^* \in \cC^{0,\gamma}(\bR^n)$ tal que
    \begin{equation} \label{eq:oll2}
        \Vert u_k - u^* \Vert_{\cC^{0,\gamma}(\bR^n)} \to 0,
    \end{equation}
    quando $k \to \infty$
    Note que $u^* = \bar u$ qtp em $\bR^n$ (análogo ao que foi feito na demonstração do Teorema \ref{thm:desigualdade-teorema-2}) (por (\ref{eq:oll1}) e (\ref{eq:oll2})) e $u = \bar u$ qtp em $\Omega$ (por (\ref{eq:oll})).
    Logo, $u = u^*$ qtp em $\Omega$, ou seja, $u^*$ é uma versão contínua de $u$.
    O Teorema \ref{thm:holdersobolev1} também implica em
    \[
        \Vert u_k \Vert_{\cC^{0,\gamma}(\bR^n)} \leqslant c \Vert u_k \Vert_{\cW^{1,p}(\bR^n)},
    \]
    para todo $k \in \bN$.
    Passando ao limite, quando $k \to \infty$, chegamos, por (\ref{eq:oll1}) e (\ref{eq:oll2}), a
    \[
        \Vert u^* \Vert_{\cC^{0,\gamma}(\bR^n)} \leqslant c \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)}.
    \]
    Por fim, por (\ref{eq:oll}), é verdade que
    \[
        \Vert u^* \Vert_{\cC^{0,\gamma}(\overline \Omega)} \leqslant \Vert u^* \Vert_{\cC^{0,\gamma}(\bR^n)} \leqslant c \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    Portanto, concluímos que
    \[
        \Vert u^* \Vert_{\cC^{0,\gamma}(\overline\Omega)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)},
    \]
    como era desejado.
\end{prf}

\subsection{Desigualdades gerais de Sobolev}

Agora, vamos explorar algumas desigualdades em espaços de Sobolev com derivadas (fracas) de ordem superior.

\begin{tbox} \label{thm:geral-1}
    Sejam $\Omega$ um aberto limitado com fronteira de classe $\cC^1$ e $u \in \cW^{k,p}(\Omega)$.
    Se $kp < n$, então $u \in \cL^q(\Omega)$, onde
    \[
        \frac{1}{q} = \frac{1}{p} - \frac{k}{n}.
    \]
    Além disso, a desigualdade
    \[
        \Vert u \Vert_{\cL^q(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)}
    \]
    é valida, onde $c$ depende apenas de $k, p, n$ e $\Omega$.
\end{tbox}
\begin{prf}
    Como $u \in \cW^{k,p}(\Omega)$, com $1 \leqslant p \leqslant kp < n$, temos que $D^\alpha u \in \cL^p(\Omega)$, para todo multi-índice $\alpha$ com $|\alpha| \leqslant k$. 
    Como $\Omega$ é limitado e $\partial\Omega$ é de classe $\cC^1$, pelo Teorema \ref{thm:extensao}, podemos considerar uma extenão $\overline{D^\beta u}$ de $D^\beta u$ com $|\beta| \leqslant k -1$. 
    Utilizando a Desigualdade de Gagliardo-Nirenberg-Sobolev (\ref{eq:gns}), obtemos
    \[
        \Vert \overline{D^\beta u} \Vert_{\cL^{p^*}(\bR^n)} \leqslant c \Vert D (\overline{D^\beta u}) \Vert_{\cL^p(\bR^ n)}.
    \]
    Dessa forma, como $\overline{D^\beta u} = D^\beta u$ qtp em $\Omega$, podemos escrever
    \[
        \Vert D^\beta u \Vert_{\cL^{p^*}(\Omega)} = \Vert \overline{D^\beta u} \Vert_{\cL^{p*}(\Omega)} \leqslant \Vert \overline{D^\beta u} \Vert_{\cL^{p*}(\bR^n)} \leqslant c \Vert D (\overline{D^\beta}u) \Vert_{\cL^p(\bR^ n)} \leqslant c \Vert \overline{D^\beta u} \Vert_{\cW^{1,p}(\Omega)}.
    \]
    Porém a extensão acima é um operador linear limitado. Mais precisamente, temos que $\Vert \bar v \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert v \Vert_{\cW^{1,p}(\Omega)}$, para todo $v \in \cW^{1,p}(\Omega)$. Dito isso, inferimos que
    \[
        \Vert D^\beta u \Vert_{\cL^{p^*}(\Omega)} \leqslant c \Vert D^\beta u \Vert_{\cW^{1,p}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)}.
    \]
    Dessa forma, $u \in \cW^{k-1,p^*}(\Omega)$ e $\Vert u \Vert_{\cW^{k-1,p^*}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)}$.
    De forma análoga, inferimos que $u \in \cW^{k-2,p^{**}}(\Omega)$, onde
    \[
        \frac{1}{p^{**}} = \frac{1}{p^*} - \frac{1}{n} = \frac{1}{p} - \frac{1}{n} - \frac{1}{n} = \frac{1}{p} - \frac{2}{n}.
    \]
    Indutivamente, chegamos a $u \in \cW^{0,q}(\Omega) = \cL^q(\Omega)$, com $\frac{1}{q} = \frac{1}{p} - \frac{k}{n}$, e
    \[
        \Vert u \Vert_{\cW^{k,p}(\Omega)} \geqslant c \Vert u \Vert_{\cW^{k-1,p^*}(\Omega)} \geqslant c \Vert u \Vert_{\cW^{k-2,p^{**}}(\Omega)} \geqslant \cdots\geqslant c \Vert u \Vert_{\cW^{0,q}(\Omega)} = c\Vert u \Vert_{\cL^q(\Omega)}.
    \]
    Portanto,
    \[
        \Vert u \Vert_{\cL^q(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)},
    \]
    desde que $\frac{1}{q} = \frac{1}{p} - \frac{k}{n}$.
\end{prf}

Vejamos agora uma generalização dos espaços de Hölder $\cC^{0,\gamma}(\overline \Omega)$.

\begin{dbox}
    O espaço de Hölder $\cC^{k,\gamma}(\overline\Omega)$ é formado pelas funções $u \in \cC^k(\Omega) \cap \cC^{0,\gamma}(\overline\Omega)$. Esse espaço é munido da norma
    \[
        \Vert u \Vert_{\cC^{k,\gamma}(\overline\Omega)} := \sum_{|\alpha| \leqslant k} \Vert D^{\alpha}u \Vert_{\cC(\overline\Omega)} + \sum_{|\alpha| = k} [D^\alpha u]_{\cC^{0,\gamma}(\overline\Omega)}
    \] 
\end{dbox}

O próximo resultado estabelece uma relação entre os espaços de Hölder definidos acima e os espaços de Sobolev.

\begin{tbox} \label{thm:geral2}
    Sejam $\Omega$ um aberto limitado com fronteira de classe $\cC^1$, e $u \in \cW^{k,p}(\Omega)$. 
    Se $kp > n$, então $u \in \cC^{k - \ell - 1,\gamma}(\overline\Omega)$, onde $\ell = \left\lfloor \frac{n}{p} \right\rfloor$ e
    \[
        \gamma = \left\lfloor \frac{n}{p} \right\rfloor + 1 - \frac{n}{p}
    \]
    se $\frac{n}{p}$ não é um inteiro e $\gamma \in (0,1)$ se $\frac{n}{p}$ é um inteiro.
    Além disso a desigualdade
    \begin{equation} \label{eq:geral2}
        \Vert u \Vert_{\cC^{k - \ell - 1,\gamma}(\overline\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)}
    \end{equation}
    é valida, onde $c$ depende apenas de $k, p, n, \gamma$ e $\Omega$.
\end{tbox}
\begin{prf}
    Suponha que $\frac{n}{p}$ não é um inteiro (isto é, $\gamma = \left\lfloor \frac{n}{p} \right\rfloor + 1 - \frac{n}{p}$). Então, como visto na demonstração do Teorema \ref{thm:geral-1}, temos que $u \in \cW^{k-\ell,r}(\Omega)$ quando
    \begin{equation} \label{eq:111}
        \frac{1}{r} = \frac{1}{p} - \frac{\ell}{n},
    \end{equation}
    desde que $\ell p < n$ (veja que $r = p^{\overbrace{**\cdots*}^{\ell \text{ vezes}}}$). Sendo assim, $\ell$ é um inteiro tal que
    \begin{equation} \label{eq:222}
        \ell < \frac{n}{p} < \ell + 1,
    \end{equation}
    isto é, $\ell = \left\lfloor \frac{n}{p} \right\rfloor$.
    Consequentemente, temos por (\ref{eq:111}) e (\ref{eq:222}), que
    \begin{equation}
        r = \frac{pn}{n-p\ell} > n,
    \end{equation}
    pois $n - pl > 0$. Além disso, $D^\alpha u \in \cW^{1,r}(\Omega)$, para todo $|\alpha| \leqslant k - \ell -1$. Dito isso, pelo Teorema \ref{thm:extensao}, seja $\overline{D^\alpha u} \in \cW^{1,r}(\bR^n)$ uma extensão de $D^\alpha u$.
    Assim, pela Desigualdade de Morrey (ver Teorema \ref{thm:holdersobolev1}), podemos escrever
    \begin{equation} \label{eq:xx}
        \begin{aligned}
            \Vert D^\alpha u \Vert_{\cC^{0,\gamma}(\overline\Omega)} = \Vert \overline{D^\alpha u} \Vert_{\cC^{0,\gamma}(\overline\Omega)} &\leqslant \Vert \overline{D^\alpha u} \Vert_{\cC^{0,\gamma}(\bR^n)} \\
            &\leqslant c \Vert \overline{D^\alpha u} \Vert_{\cW^{1,r}(\bR^n)}\leqslant c \Vert D^\alpha u \Vert_{\cW^{1,r}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k-\ell,r}(\Omega)}.
        \end{aligned}
    \end{equation}
    pois $\overline{D^\alpha u} = D^\alpha u$ qtp em $\Omega$, $\supp \overline{D^\alpha u}$ é compacto, $\gamma = p + 1 - \frac{n}{p} = 1 - \frac{n}{r}$ e $\cC^\infty(\bR^n)$ é denso em $\cW^{k,p}(\bR^n)$ (pelo Teorema \ref{thm:aprox3}).
    % Isso mostra que $D^\alpha u \in \cC^{0,\gamma}(\overline\Omega)$, pois $u \in \cW^{k,\ell}(\Omega)$
    % Portanto, $u \in \cC^{k-\ell-1,\gamma}(\overline\Omega)$ e por (\ref{eq:xx}), inferimos 
    Portanto, por (\ref{eq:xx}), inferimos
    \[
        \begin{aligned}
            \Vert u \Vert_{\cC^{k-\ell-1,\gamma}(\overline\Omega)} &\leqslant \sum_{|\alpha| \leqslant k - \ell - 1} \left( \Vert D^\alpha u \Vert_{\cC(\overline\Omega)} + [D^\alpha u]_{\cC^{0,\gamma}(\overline\Omega)} \right)\\
            &\leqslant \sum_{|\alpha| \leqslant k - \ell - 1} \!\!\!2 \Vert D^\alpha u  \Vert_{\cC^{0,\gamma}(\overline\Omega)} \leqslant \sum_{|\alpha| \leqslant k - \ell - 1} \!\!\!c \Vert u  \Vert_{\cW^{k-\ell,r}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k-\ell,r} (\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)},
        \end{aligned}
    \]
    (ver demonstração do Teorema \ref{thm:geral-1}). Isto prova (\ref{eq:geral2}).

    Por fim, suponha que $\frac{n}{p}$ é um inteiro. Seja $\ell = \left\lfloor \frac{n}{p} \right\rfloor - 1 = \frac{n}{p} - 1$.
    Como anteriormente, temos que $u \in \cW^{k-\ell,r}(\Omega)$ (pois $\Omega$ é limitado), desde que (\ref{eq:111}) seja satisfeito, onde
    \[
        r = \frac{pn}{n - p\ell} = n \geqslant p.
    \]
    pois $\frac{n}{p}$ é um inteiro positivo.
    Isto nos diz que $D^\alpha u \in \cL^r(\Omega)$ para todo $|\alpha| \leqslant k - \ell$.
    Sejam $n < q < \infty$ e $1 \leqslant s = \frac{nq}{n + q} < n$. Dessa forma, $s^* = q$ e pela Desigualdade de Gagliardo-Nirenberg-Sobolev (\ref{eq:gns})  e por um argumento de densidade, temos, considerando uma extensão $\overline{D^\alpha u} \in \cL^q(\bR^n)$, que
    \[
        \begin{aligned}
            \Vert D^\alpha u \Vert_{\cL^q(\Omega)} = \Vert \overline{D^\alpha u}  \Vert_{\cL^q(\Omega)} \leqslant \Vert \overline{D^\alpha u} \Vert_{\cL^q(\bR^n)} &\leqslant c \Vert D \overline{D^\alpha u} \Vert_{\cL^s(\bR^n)}\\ &\leqslant c \Vert D D^\alpha u \Vert_{\cL^s(\Omega)} \leqslant c\Vert D D^\alpha u \Vert_{\cL^r(\Omega)} < \infty,
        \end{aligned}
    \]
    para todo $|\alpha| \leqslant k - \ell - 1$, pois $u \in \cW^{k-\ell,r}(\Omega)$, $s < r$ e $\Omega$ é limitado. Por isso,
    \[
        \Vert D^\alpha u \Vert_{\cL^q(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k-\ell,r}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)},
    \]
    para todo $|\alpha| \leqslant k - \ell - 1$. Isto nos diz que $D^\alpha u \in \cL^q(\Omega)$, para todo $|\alpha| \leqslant k - \ell - 1 = k - \frac{n}{p}$.
    Como $n < q < \infty$, utilizando a Desigualdade de Morrey (ver Teorema \ref{thm:holdersobolev1}), encontramos
    \[
        \Vert D^\alpha u \Vert_{\cC^{0,1-\frac{n}{q}}(\overline\Omega)} = \Vert \overline{D^\alpha u} \Vert_{\cC^{0,1-\frac{n}{q}}(\overline\Omega)} \leqslant \Vert \overline{D^\alpha u} \Vert_{\cC^{0,1 - \frac{n}{q}}(\bR^n)} \leqslant c \Vert \overline{D^\alpha u} \Vert_{\cW^{1,q}(\bR^n)} \leqslant c \Vert D^\alpha u \Vert_{\cW^{1,q}(\Omega)},
    \]
    para todo $|\alpha| \leqslant k - \ell - 2$ (por um argumento de densidade).
    Assim, tomando qualquer $\gamma \in (0,1)$, $q = \frac{n}{1 - \gamma}$ e $s_\gamma = \frac{np}{(1- \gamma)p + n}$, obtemos
    \[
        \Vert u \Vert_{\cC^{k-\ell-1,\gamma}(\overline\Omega)} \leqslant c\Vert u \Vert_{\cW^{k-\ell-1,q}(\Omega)} = c \Vert u \Vert_{\cW^{k-\frac{n}{p},q}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,s_\gamma}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{k,p}(\Omega)},
    \]
    pois $n < q < \infty$ e $\frac{1}{q} = \frac{1}{s_\gamma} - \frac{n/p}{n}$ (como na demonstração do Teorema \ref{thm:geral-1}, já que $q = s_\gamma^{\overbrace{**\cdots*}^{n/p \text{ vezes}}}$).
\end{prf}

\section{Compacidade}

Nessa seção, vamos estudar mergulhos compactos dos espaços de Sobolev em espaços de Lebesgue.
Para isso, precisamos entender entender a diferença entre um mergulho contínuo, como os que foram trabalhados na seção anterior, e um mergulho compacto.

\begin{dbox}
    Sejam $X, Y$ espaços de Banach com $X \subseteq Y$. Dizemos que $X$ está compactamente mergulhado em $Y$ e denotamos $X \doublehookrightarrow Y$,
    se para todo $x \in X$, tem-se
    \[
        \Vert x \Vert_{Y} \leqslant c \Vert x \Vert_X
    \]
    e se toda sequência limitada em $X$ é precompacta em $Y$, isto é, existe uma subsequência que converge em $Y$.
\end{dbox}

\obs Se um mergulho satisfaz apenas a primeira propiedade, dizemos que $X$ está continuamente mergulhado em $Y$ e denotamos por $X \hookrightarrow Y$. Na seção anterior vimos os seguintes mergulhos contínuos.
\begin{itemize}
    \item $\cW^{1,p}_0(\Omega) \hookrightarrow \cL^q(\Omega)$, com $1 \leqslant q \leqslant p^*$ e $1 \leqslant p < n$, pelo Teorema \ref{thm:poincaregen};
    \item $\cW^{1,p}_0(\Omega) \hookrightarrow \cL^{p^*}(\Omega)$, com $1 \leqslant s \leqslant \infty$, pelo Corolário \ref{cl:poincare};
    \item $\cW^{k,p}(\Omega) \hookrightarrow \cL^q(\Omega)$, com $kp < n$ e $\frac{1}{q} = \frac{1}{p} + \frac{k}{n}$, pelo Teorema \ref{thm:geral-1};
    \item $\cW^{k,p}(\Omega) \hookrightarrow \cC^{k-\ell-1\gamma}(\overline\Omega)$, com $kp > n$ e $\ell = \left\lfloor \frac{n}{p} \right\rfloor$, pelo Teorema \ref{thm:geral2}.
\end{itemize}

\begin{tbox}[Teorema de Rellich-Kondrachov] \label{thm:compacidade}
    Seja $\Omega \subseteq \bR^n$ um aberto limitado com fronteira de classe $\cC^1$.
    Então,
    \[
        \cW^{1,p}(\Omega) \doublehookrightarrow \cL^q(\Omega),
    \]
    com $1 \leqslant p < n$ e $1 \leqslant q < p^*$.
\end{tbox}
% \begin{prf}
%     Seja $1 \leqslant q < p^*$ fixo.
%     Como $\Omega$ é limitado, segue que $\Vert u \Vert_{\cL^q(\Omega)} \leqslant c \Vert u \Vert_{\cL^{p^*}(\Omega)}$ e pelo Teorema \ref{thm:desigualdade-teorema-2} temos $\Vert u \Vert_{\cL^{p^*}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}$. Logo $\cW^{1,p}(\Omega) \subseteq \cL^q(\Omega)$ e $\Vert u \Vert_{\cL^p(\Omega)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}$.
%     Resta mostrar que se $(u_k)_{k = 1}^\infty$ é uma sequência limitada em $\cW^{1,p}(\Omega)$, então existe uma subsequência $(u_{k_j})_{j=1}^\infty$ que converge em $\cL^q(\Omega)$.

%     Pelo Teorema de Extensão, podemos supor sem perda de generalidade que $\Omega = \bR^n$ e que para todo $k \in \bN$, $u_k$ tem suporte compacto em algum aberto limitado $V \subseteq \bR^n$. 
%     Também podemos supor que
%     \begin{equation} \label{eq:supfinito}
%         \sup_k \Vert u_k \Vert_{\cW^{1,p}(V)} < \infty
%     \end{equation}
%     poisa sequência é limitada

%     Primeiramente vamos estudar as funções suavizadas $u_k^\varepsilon = \eta_\varepsilon * u_k$ onde $\eta_\varepsilon$ é a função molificadora vista na Seção \ref{sec:aproximacoes}. Também podemos supor que para todo $k \in \bN$ e $\varepsilon > 0$ as funções $u_k^\varepsilon$ tem suporte em $V$. Afirmamos que
%     \begin{equation} \label{eq:convergenciaemlq}
%         \Vert u^\varepsilon_k - u_k \Vert_{\cL^q(V)} \to 0
%     \end{equation}
%     uniformemente em $k$, quando $\varepsilon \to 0$.
%     Com efeito, note que se $u_k$ é suave, então
%     \[
%         u_k^\varepsilon(x) - u_k(x) = \int_{B(0,\varepsilon)} \eta_\varepsilon(\tau) u_k (x - \tau) \,d\tau - u_k(x)  = \int_{B(0,\varepsilon)} \frac{1}{\varepsilon^n} \eta \left( \frac{\tau}{\varepsilon} \right) u_k (x - \tau) \,d\tau - u_k(x)
%     \]
%     Fazendo a substituição $\tau = \varepsilon y$ e lembrando que $\int_{B(0,1)} \eta(y) \,dy = 1$, obtemos
%     \[
%         u_k^\varepsilon(x) - u_k(x) = \int_{B(0,1)} \eta(y) \left( u_k(x - \varepsilon y) - u_k(x) \right) \,dy = \int_{B(0,1)} \eta(y) \int_0^1 \frac{d}{dt}u_k(x - \varepsilon t y) \,dt dy
%     \]
%     Para calcular essa derivada, seja $g(t) = x - \varepsilon t y$. Pela Regra da Cadeia temos que
%     \[
%         \frac{d}{dt} (u_k \circ g) = \sum_{j=1}^n \dfrac{\partial u_k}{\partial x_j} (g(t)) \, g_j'(t) = -\varepsilon\sum_{j=1}^{n} \dfrac{\partial u_k}{\partial x_j}(g(t)) \,y_j = -\varepsilon Du_k(x - \varepsilon ty) \cdot y
%     \]
%     Sendo assim
%     \[
%         u_k^\varepsilon(x) - u_k(x) = -\varepsilon \int_{B(0,1)} \eta(y) \int_0^1 Du_k(x - \varepsilon ty) \cdot y \,dtdy.
%     \]
%     Daí, passando o módulo em ambos os lados e Utilizando a Desigualdade de Hölder (Cauchy-Schwarz) obtemos
%     \[
%         |u_k^\varepsilon(x) - u_k(x)| \leqslant \varepsilon \int_{B(0,1)} \eta(y) \int_0^1 \Vert Du_k(x - \varepsilon ty) \Vert \,dtdy
%     \]
%     e integrando ambos os lados sobre $V$
%     \[
%         \begin{aligned}
%             \int_{V} |u_k^\varepsilon(x) - u_k(x)|\,dx &\leqslant \int_{V} \varepsilon \int_{B(0,1)} \eta(y) \int_0^1 \Vert Du_k(x - \varepsilon ty) \Vert \,dtdydx\\
%             &\leqslant \varepsilon \int_{B(0,1)} \eta(y) \int_0^1 \int_{V} \Vert Du_k(x - \varepsilon ty) \Vert \,dxdtdy \leqslant \varepsilon \int_{V} \Vert Du_k(z) \Vert    \,dz.
%         \end{aligned}
%     \]
%     Isto é
%     \[
%         \Vert u_k^\varepsilon - u_k \Vert_{\cL^1(V)} \leqslant \varepsilon \Vert Du_k \Vert_{\cL^1(V)} \leqslant \varepsilon c \Vert Du_k \Vert_{\cL^p(V)} \leqslant \varepsilon c \Vert u_k \Vert_{\cW^{1,p}(V)}
%     \]
%     Akém disso, utilizando (\ref{eq:supfinito}) e o Teorema da Convergência Dominada obtemos que
%     \begin{equation} \label{eq:eml1converge}
%         \Vert u_k^\varepsilon - u_k \Vert_{\cL^1(V)} \to 0
%     \end{equation}
%     quando $\varepsilon \to 0$ uniformemente em $k$. Como $1 \leqslant q < p^*$, podemos utilizar a Desigualdade de Interpolação das normas $\cL^p$
%     \[
%         \Vert u_k^\varepsilon - u_k \Vert_{\cL^q(V)} \leqslant \Vert u_k^\varepsilon - u_k \Vert_{\cL^1(V)}^\theta \Vert u_k^\varepsilon - u_k \Vert_{\cL^{p^*}(V)}^{1- \theta}
%     \]
%     onde $\frac{1}{q} = \theta + \frac{(1 - \theta)}{p^*}$ e $0 < \theta < 1$.
%     Ademais, por (\ref{eq:supfinito}) e pela Desigualdade de Gagliardo-Nirenberg-Sobolev, $\Vert u_k^\varepsilon - u_k \Vert_{\cL^{p^*}(V)}^{1- \theta}$ é finito. De fato
%     \[
%         \Vert u_k^\varepsilon - u_k \Vert_{\cL^{p^*}(V)}^{1 - \theta} \leqslant c \Vert Du_k^\varepsilon - Du_k \Vert_{\cL^p(V)}^{1 - \theta} \leqslant c \Vert u_k^\varepsilon - u_k \Vert_{\cW^{1,p}(V)}^{1- \theta} < \infty. 
%     \]
%     Assim por (\ref{eq:eml1converge})
%     \[
%         \Vert u_k^\varepsilon - u_k \Vert_{\cL^q(V)} \leqslant c \Vert u_k^\varepsilon - u_k \Vert_{\cL^1(V)}^\theta \to 0
%     \]
%     uniformemente em $k$, quando $\varepsilon \to 0$. Como era desejado.

%     Agora, afirmamos que, para cada $\varepsilon > 0$ fixo, a sequência $(u_k^\varepsilon)_{k=1}^\infty$ é uniformemente limitada e equicontínua.
%     Com efeito, se $x \in \bR^n$
%     \begin{equation} \label{eq:ufin}
%         |u_k^\varepsilon(x)| \leqslant \int_{B(x,\varepsilon)} \eta_\varepsilon (x - y) |u_k(y)| \,dy \leqslant \Vert \eta_\varepsilon \Vert_{\cL^\infty(\bR^n)} \Vert u_k \Vert_{\cL^1(V)} \leqslant \frac{c}{\varepsilon^n} < \infty
%     \end{equation}
%     onde por (\ref{eq:supfinito}) $c$ não depende de $k$. De forma análoga, mostramos que
%     \begin{equation} \label{eq:Dufin}
%         \Vert Du_k^\varepsilon(x) \Vert  \leqslant \frac{c}{\varepsilon^{n+1}} < \infty.
%     \end{equation}
%     Isso prova que $(u_k^\varepsilon)_{k=1}^\infty \subseteq \cW^{1,p}(V)$ é uniformemente limitada pois mostramos que $\Vert u_k^\varepsilon \Vert_{\cW^{1,p}(\Omega)}\leqslant M$ onde $M > 0$ não depende de $k$.
%     Ademais, $(u_k^\varepsilon)_{k=1}^\infty$ é equicontínua pois, dado $\tilde\varepsilon > 0$ existe $\delta < \tilde\varepsilon / L$ tal que, pela Desigualdade do Valor Médio
%     \[
%         \Vert x - y \Vert \leqslant \delta \implies |u_k^\varepsilon(x) - u_k^\varepsilon(y)| \leqslant L \Vert x - y \Vert < L \delta < \tilde\varepsilon.
%     \]
%     onde $L = \sup_{x \in V} \Vert Du_k(x) \Vert$, que existe por (\ref{eq:supfinito}) e (\ref{eq:Dufin}) e não depende de $k$ e $x$.

%     Agora seja $\delta > 0$ fixo. Mostremos que existe uma subsequência $(u_{k_j})_{j=1}^\infty \subseteq (u_k)_{k=1}^\infty$ tal que
%     \begin{equation} \label{eq:limsup1}
%         \limsup_{j,\ell \to \infty} \Vert u_{k_j} - u_{k_\ell} \Vert_{\cL^q(V)} \leqslant \delta.
%     \end{equation}
%     De fato, por (\ref{eq:convergenciaemlq}), conseguimos um valor de $\varepsilon > 0$ suficientemente pequeno tal que
%     \[
%         \Vert u_k^\varepsilon - u_k \Vert_{\cL^q(V)} \leqslant \frac{\delta}{2}
%     \]
%     para todo $k \in \bN$
%     Além disso, sabemos que para todo $k \in \bN$ e $\varepsilon > 0$ as funções $u_k$ e $u_k^\varepsilon$ tem suporte em um aberto limitado fixo $V \subseteq \bR^n$, podemos utilizar o fato da sequência $(u_k^\varepsilon)_{k=1}^\infty$ ser equicontínua e uniformemente limitada junto do Critério de Compacidade de Arzelà-Ascoli para obter uma subsequência $(u_{k_j}^\varepsilon)_{j=1}^\infty \subseteq (u_k^\varepsilon)_{k=1}^\infty$ que converge uniformemente em $V$.
%     Em particular
%     \[
%         \limsup_{j,\ell \to \infty} \Vert u_{k_j}^\varepsilon - u_{k_\ell}^\varepsilon \Vert_{\cL^q(V)} = 0.
%     \]
%     Dessa forma
%     \[
%         \begin{aligned}
%             \limsup_{j,\ell \to \infty} \Vert u_{k_j} - u_{k_\ell} \Vert_{\cL^q(V)} &\leqslant \limsup_{j,\ell \to \infty} \Vert u_{k_j} - u_{k_j}^\varepsilon \Vert_{\cL^q(V)} \\
%             &+ \limsup_{j,\ell \to \infty} \Vert u_{k_j}^\varepsilon - u_{k_\ell}^\varepsilon \Vert_{\cL^q(V)} + \limsup_{j,\ell \to \infty} \Vert u_{k_\ell}^\varepsilon - u_{k_\ell} \Vert_{\cL^q(V)} \leqslant \delta.
%         \end{aligned}
%     \]
%     como era desejado.
%     Por fim, escolhendo $\delta = 1,\frac{1}{2},\dots$ em (\ref{eq:limsup1}), conseguimos extrair uma subsequência $(u_{k_j})_{j=1}^\infty \subseteq (u_k)_{k=1}^\infty$ que satisfaz
%     \[
%         \limsup_{j,\ell \to \infty} \Vert u_{k_j} - u_{k_\ell} \Vert_{\cL^q(V)} = 0
%     \]
%     \textcolor{red}{por que isso é suficiente?}
% \end{prf}

\begin{prf}
    Seja $1 \leqslant q < p^*$ fixo.
    Como $\Omega$ é limitado, temos, pelo Teorema \ref{thm:omega-limitado}, que $\Vert u \Vert_{\cL^q(\Omega)} \leqslant c \Vert u \Vert_{\cL^{p^*}(\Omega)}$
    e, pelo Teorema \ref{thm:desigualdade-teorema-2}, segue que
    $\Vert u \Vert_{\cL^{p^*}(\Omega)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}$.
    Logo, $\cW^{1,p}(\Omega) \subseteq \cL^q(\Omega)$ e
    \[
        \Vert u \Vert_{\cL^q(\Omega)} \leqslant c \Vert u \Vert_{\cW^{1,p}(\Omega)}.
    \]
    Resta mostrar que se $(u_k)_{k=1}^\infty$ é uma sequência limitada em $\cW^{1,p}(\Omega)$, então existe uma subsequência $(u_{k_j})_{j=1}^\infty$ que converge em $\cL^q(\Omega)$.
    
    Como $(u_k)_{k=1}^\infty$ é limitada, existe $M > 0$ tal que $\Vert u_k \Vert_{\cW^{1,p}(\Omega)} \leqslant M$, para todo $k \in \bN$.
    Observe que, pelo Teorema \ref{thm:extensao}, temos que existe uma sequência $(\bar u_k)_{k=1}^\infty \subseteq \cW^{1,p}(\bR^n)$ tal que, para todo $k \in \bN$, $\bar u_k = u_k$ qtp em $\Omega$, $\bar u_k$ tem suporte compacto e $\Vert \bar u_k \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u_k \Vert_{\cW^{1,p}(\Omega)}$.
    Dessa forma, inferimos
    \[
        \Vert \bar u_k \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u_k \Vert_{\cW^{1,p}(\Omega)} \leqslant cM,
    \]
    para todo $k \in \bN$.
    Logo, $(\bar u_k)_{k=1}^\infty \subseteq \cW^{1,p}(\bR^n)$ é limitada.
    Com isso
    \begin{equation} \label{eq:supfinito}
        \sup_{k} \Vert \bar u_k \Vert_{\cW^{1,p}(\bR^n)} \leqslant cM.
    \end{equation}

    Primeiramente, vamos estudar as funções suavizadas $\bar u_k^\varepsilon = \eta_\varepsilon * \bar u_k$ (para $\varepsilon > 0$), onde $\eta_\varepsilon$ é a função molificadora vista na Seção \ref{sec:aproximacoes}.
    Também podemos supor que, para todo $k \in \bN$ e $\varepsilon > 0$, as funções $\bar u_k^\varepsilon$ tem suporte em um aberto limitado $V$.
    Afirmamos que
    \[
        \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^q(V)} \to 0,
    \]
    uniformemente em $k$, quando $\varepsilon \to 0$.
    Com efeito, considere $v_k \in \cC^{\infty}_c(\bR^n)$ e $v_k^\varepsilon = \eta_\varepsilon * v_k$ (para $\varepsilon > 0$ pequeno).
    Dessa forma, podemos escrever
    \[
        v_k^\varepsilon(x) - v_k(x) = \int_{B(0,\varepsilon)} \eta_\varepsilon(\tau) v_k (x - \tau) \,d\tau - v_k(x)  = \int_{B(0,\varepsilon)} \frac{1}{\varepsilon^n} \eta \left( \frac{\tau}{\varepsilon} \right) v_k (x - \tau) \,d\tau - v_k(x).
    \]
    Fazendo a substituição $\tau = \varepsilon y$ e lembrando que $\int_{B(0,1)} \eta(y) \,dy = 1$, obtemos, pelo Teorema Fundamental do Cálculo, que
    \[
        v_k^\varepsilon(x) - v_k(x) = \int_{B(0,1)} \eta(y) \left( v_k(x - \varepsilon y) - v_k(x) \right) \,dy = \int_{B(0,1)} \eta(y) \int_0^1 \frac{d}{dt}v_k(x - \varepsilon t y) \,dt dy.
    \]
    Para calcular a derivada acima, defina $g(t) = x - \varepsilon t y$. Pela regra da cadeia temos que
    \[
        \frac{d}{dt} (v_k \circ g)(t) = \sum_{j=1}^n \dfrac{\partial v_k}{\partial x_j} (g(t)) \, g_j'(t) = -\varepsilon\sum_{j=1}^{n} \dfrac{\partial v_k}{\partial x_j}(g(t)) \,y_j = -\varepsilon Dv_k(x - \varepsilon ty) \cdot y.
    \]
    Sendo assim, é verdade que
    \[
        v_k^\varepsilon(x) - v_k(x) = -\varepsilon \int_{B(0,1)} \eta(y) \int_0^1 Dv_k(x - \varepsilon ty) \cdot y \,dtdy.
    \]
    Logo, passando ao módulo em ambos os lados da igualdade acima e utilizando a desigualdade de Cauchy-Schwarz, deduzimos que
    \[
        |v_k^\varepsilon(x) - v_k(x)| \leqslant \varepsilon \int_{B(0,1)} \eta(y) \int_0^1 \Vert Dv_k(x - \varepsilon ty) \Vert \,dtdy.
    \]
    Integrando ambos os lados da desigualdade acima sobre $V$, e aplicando o Teorema de Fubini e o Teorema de Mudança de Variáveis (ver Teoremas \ref{thm:fubini} e \ref{thm:mudanca-de-variaveis}), chegamos a
    \[
        \begin{aligned}
            \int_{V} |v_k^\varepsilon(x) - v_k(x)|\,dx &\leqslant \int_{V} \varepsilon \int_{B(0,1)} \eta(y) \int_0^1 \Vert Dv_k(x - \varepsilon ty) \Vert \,dtdydx\\
            &\leqslant \varepsilon \int_{B(0,1)} \eta(y) \int_0^1 \int_{V} \Vert Dv_k(x - \varepsilon ty) \Vert \,dxdtdy \leqslant \varepsilon \int_{V} \Vert Dv_k(z) \Vert    \,dz,
        \end{aligned}
    \]
    (basta escolher $z = x - \varepsilon t y$).
    Isto é,
    \begin{equation} \label{eq:vekvek}
        \Vert v_k^\varepsilon - v_k \Vert_{\cL^1(V)} \leqslant \varepsilon \Vert Dv_k \Vert_{\cL^1(V)}
    \end{equation}
    para todo $k \in \bN$. Como $\bar u_k \in \cW^{1,p}(V) $ (pois $\bar u_k \in \cW^{1,p}(\bR^n)$), então existe uma sequência $(v^k_\ell) \subseteq \cC^{\infty}_c(V)$, dada por $v^k_\ell = \eta_{\frac{1}{\ell}} * \bar{u}_k$, tal que
    \[
        \Vert v^k_\ell - \bar{u}_k \Vert_{\cW^{1,p}(V)} \to 0,
    \]
    quando $\ell \to \infty$, para cada $k \in \bN$.
    Sendo assim, como $p \geqslant 1$ e $V$ é limitado (ver Teorema \ref{thm:omega-limitado}) concluímos que
    \begin{equation} \label{eq:xl}
        \Vert v^k_\ell - \bar{u}_k \Vert_{\cL^1(V)} \leqslant c \Vert v^k_\ell - \bar{u}_k \Vert_{\cL^p(V)} \leqslant c \Vert v^k_\ell - \bar{u}_k \Vert_{\cW^{1,p}(\Omega)} \to 0,
    \end{equation}
    e, de forma análoga,
    \begin{equation} \label{eq:xn}
        \Vert Dv^k_\ell - D\bar{u}_k \Vert_{\cL^1(V)}\leqslant c \Vert Dv^k_\ell - D\bar{u}_k \Vert_{\cL^p(V)} \leqslant c \Vert v^k_\ell - \bar{u}_k \Vert_{\cW^{1,p}(\Omega)} \to 0,
    \end{equation}
    ambos limites tomados quando $\ell \to \infty$. Dessa forma, inferimos, por (\ref{eq:xn}), que
    \begin{equation} \label{eq:xm}
        \Vert v^{k\varepsilon}_\ell - \bar u_k^{\varepsilon} \Vert_{\cL^1(V)} = \Vert \eta_\varepsilon * v^k_\ell - \eta_\varepsilon * \bar u_k \Vert_{\cL^1(V)} = \Vert \eta_\varepsilon  * (v^k_\ell - \bar u_k) \Vert_{\cL^1(V)} \leqslant \Vert v^k_\ell - \bar u_k \Vert_{\cL^1(V)} \to 0,
    \end{equation}
    quando $\ell \to \infty$, onde a última desigualdade vem de (\ref{eq:assss}).
    Por (\ref{eq:vekvek}), segue que
    \[
        \Vert v^{k\varepsilon}_\ell - v^k_\ell \Vert_{\cL^1(V)} \leqslant \varepsilon \Vert D v^k_\ell \Vert_{\cL^1(V)},
    \]
    para todo $k,\ell \in \bN$. Passando ao limite quando $\ell \to \infty$, obtemos por (\ref{eq:xl}), (\ref{eq:xn}) e (\ref{eq:xm}), que
    \[
        \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^1(V)} \leqslant \varepsilon \Vert D\bar u_k \Vert_{\cL^1(V)},
    \]
    para todo $k \in \bN$. Assim, por (\ref{eq:supfinito}), concluímos que
    \[
        \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^1(V)} \leqslant \varepsilon \Vert D\bar u_k \Vert_{\cL^1(V)} \leqslant \varepsilon c \Vert D\bar u_k \Vert_{\cL^p(V)} \leqslant \varepsilon c \Vert \bar u_k \Vert_{\cW^{1,p}(V)} \leqslant \varepsilon c M,
    \]
    para todo $k \in \bN$ (pois $p \geqslant 1$ e $V$ é limitado (ver Teorema \ref{thm:omega-limitado})). Consequentemente,
    \begin{equation} \label{eq:eml1converge2}
        \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^1 (V)} \to 0,
    \end{equation}
    uniformemente em $k$, quando $\varepsilon \to 0$. 
    
    Como $1 \leqslant q < p^*$, podemos utilizar a Desigualdade de Interpolação (ver Teorema \ref{thm:desigualdade-de-inteporlacao}) para obter
    \[
        \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^q(V)} \leqslant \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^1(V)}^\theta \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^{p^*}(V)}^{1- \theta},
    \]
    onde $\frac{1}{q} = \theta + \frac{(1 - \theta)}{p^*}$ e $0 < \theta < 1$.
    Ademais, por (\ref{eq:supfinito}), pela Desigualdade de Gagliardo-Nirenberg-Sobolev (\ref{eq:gns}) e por um argumento de densidade, deduzimos que $\Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^{p^*}(V)}^{1- \theta}$ é finito para todo $k \in\bN$. De fato, é verdade que
    \begin{equation} \label{eq:idk}
        \begin{aligned}
            \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^{p^*}(V)}^{1 - \theta} &\leqslant c \Vert D\bar u_k^\varepsilon - D\bar u_k \Vert_{\cL^p(V)}^{1 - \theta}\\ 
            &\leqslant c \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cW^{1,p}(V)}^{1- \theta} \leqslant c \big[\Vert \bar u_k^\varepsilon \Vert_{\cW^{1,p}(V)} + \Vert \bar u_k \Vert_{\cW^{1,p}(V)} \big]^{1-\theta} < cM.
        \end{aligned}
    \end{equation}
    Assim por (\ref{eq:eml1converge2}), deduzimos que
    \[
        \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^q(V)} \leqslant c \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^1(V)}^\theta \to 0,
    \]
    uniformemente em $k$, quando $\varepsilon \to 0$.

    Agora, afirmamos que, para cada $\varepsilon > 0$ fixo, a sequência $(\bar u_k^\varepsilon)_{k=1}^\infty$ é uniformemente limitada e equicontínua.
    Com efeito, se $x \in \bR^n$, tem-se pela desigualdade de Hölder (ver Teorema \ref{thm:pre-desigualdade-de-holder}) e por (\ref{eq:supfinito}), que
    \begin{equation} \label{eq:ufin}
        \begin{aligned}
            |\bar u_k^\varepsilon(x)| \leqslant \int_{B(x,\varepsilon)} \eta_\varepsilon (x - y) |\bar u_k(y)| \,dy &\leqslant \Vert \eta_\varepsilon \Vert_{\cL^\infty(\bR^n)} \Vert \bar u_k \Vert_{\cL^1(V)}\\ 
            &\leqslant \frac{c}{\varepsilon^n} \Vert \eta \Vert_{\cL^\infty(\bR^n)} \Vert \bar u_k \Vert_{\cL^p(V)} \leqslant \frac{cM}{\varepsilon^n} < \infty,
        \end{aligned}
    \end{equation}
    onde por (\ref{eq:supfinito}) $c$ não depende de $k$ (lembre que $\supp \bar u_k \subseteq V$, $p \geqslant 1$ e $V$ é limitado). De forma análoga, mostramos que
    \begin{equation} \label{eq:Dufin}
        \Vert D\bar u_k^\varepsilon(x) \Vert  \leqslant \frac{c}{\varepsilon^{n+1}} < \infty.
    \end{equation}
    Deste modo, $(\bar u_k^\varepsilon)_{k=1}^\infty$ é uniformemente limitada pois, mostramos que $\Vert \bar u_k^\varepsilon \Vert_{\cW^{1,p}(\Omega)}\leqslant M$ onde $M > 0$ não depende de $k$.
    Ademais, $(\bar u_k^\varepsilon)_{k=1}^\infty$ é equicontínua, pois, dado $\tilde\varepsilon > 0$ existe $\delta < \tilde\varepsilon / L$ tal que, pela Desigualdade do Valor Médio, encontramos
    \[
        \Vert x - y \Vert < \delta \implies |\bar u_k^\varepsilon(x) - \bar u_k^\varepsilon(y)| \leqslant L \Vert x - y \Vert < L \delta < \tilde\varepsilon,
    \]
    onde $L = \sup_{x \in \bR^n} \Vert D\bar u_k(x) \Vert$, o qual existe por (\ref{eq:supfinito}) e (\ref{eq:Dufin}) e não depende de $k$ e $x$.

    Por fim, afirmamos que existe uma subsequência $(\bar u_{k_j})_{j=1}^\infty$ de $(\bar u_k)_{k=1}^\infty$, tal que
    \[
        \Vert \bar u_{k_j} - \bar u_{k_\ell} \Vert_{\cL^q(V)} \to 0,
    \]
    quando $j,\ell \to \infty$.
    Com efeito, sabemos que
    \[
        \Vert \bar u_k^\varepsilon - \bar u_k \Vert_{\cL^q(V)} \to 0,
    \]
    uniformemente em $k$, quando $\varepsilon \to 0$ (ver (\ref{eq:idk})).
    Logo, para todo $\delta > 0$, existe $\varepsilon_0 > 0$ suficientemente pequeno tal que
    \begin{equation} \label{eq:cross1}
        \Vert \bar u_k^{\varepsilon_0} - \bar u_k \Vert_{\cL^q(V)} \leqslant \frac{\delta}{3},
    \end{equation}
    para todo $k \in \bN$.
    Por outro lado, $\supp \bar u_k, \supp \bar u_k^{\varepsilon_0} \subseteq V$. Além disso, provamos que $(\bar u_k^{\varepsilon_0})_{k=1}^\infty$ é uniformemente limitada e equicontínua.
    Logo, pelo Teorema de Arzelà-Ascoli (ver Teorema \ref{thm:arzela}), existe uma subsequência $(\bar u_{k_j}^{\varepsilon_0})_{j=1}^\infty$ de $(\bar u_k^{\varepsilon_0})_{k=1}^\infty$ que converge uniformente sobre $V$ (fora de $V$, $\bar u_k$ é nula). Em particular, esta subsequência é de Cauchy sobre $V$.
    Portanto,
    \[
        |\bar u_{k_j}^{\varepsilon_0}(x) - \bar u_{k_\ell}(x)| \to 0,
    \]
    uniformemente em $V$, quando $j,\ell \to \infty$.
    Logo, pelo Teorema da Convergência Dominada (ver Teorema \ref{thm:teorema-da-convergencia-dominada}), temos que
    \[
        \lim_{j,\ell \to \infty} \Vert \bar u_{k_j}^{\varepsilon_0} - \bar u_{k_\ell}^{\varepsilon_0} \Vert_{\cL^q(V)}^q = \lim_{j,\ell \to \infty} \int_V | \bar u_{k_j}^{\varepsilon_0}(x) - \bar u_{k_\ell}^{\varepsilon_0}(x)|^q \,dx = 0,
    \]
    pois $| \bar u_{k_j}^{\varepsilon_0}(x) - \bar u_{k_\ell}^{\varepsilon_0}(x)|^q \leqslant 2 cM \varepsilon_0^{-n} \Vert \eta \Vert_{\cL^1(\bR^n)} \in \cL^1(V)$ (lembre que $V$ é limitado).
    Consequentemente, para $j,\ell > 0$ suficientemente grandes, concluímos que
    \begin{equation} \label{eq:cross2}
        \Vert \bar u_{k_j}^{\varepsilon_0} - \bar u_{k_\ell}^{\varepsilon_0} \Vert_{\cL^q(V)} \leqslant \frac{\delta}{3}.
    \end{equation}
    Dessa forma, por (\ref{eq:cross1}) e (\ref{eq:cross2}), podemos escrever
    \[
        \Vert \bar u_{k_j} - \bar u_{k_\ell} \Vert_{\cL^q(V)} \leqslant \Vert \bar u_{k_j} - \bar u_{k_j}^{\varepsilon_0} \Vert_{\cL^q(V)} + \Vert \bar u_{k_j}^{\varepsilon_0} - \bar u_{k_\ell}^{\varepsilon_0} \Vert_{\cL^q(V)} + \Vert \bar u_{k_\ell}^{\varepsilon_0} - \bar u_{k_\ell} \Vert_{\cL^q(V)} \leqslant \delta,
    \]
    para $j, \ell \in \bN$ suficientemente grandes.
    Isto nos diz que $(\bar u_{k_j})_{j=1}^\infty$ é uma sequência de Cauchy em $\cL^q(\bR^n)$ (pois $\supp \bar u_{k_j} \subseteq V$).
    Dito isso, chegamos a
    \[
        \Vert u_{k_j} - u_{k_\ell} \Vert_{\cL^q(\Omega)} = \Vert \bar u_{k_j} - \bar u_{k_\ell} \Vert_{\cL^q(\Omega)} \leqslant \Vert \bar u_{k_j} - \bar u_{k_\ell} \Vert_{\cL^q(\bR^n)} \to 0,
    \]
    quando $j,\ell \to \infty$.
    Como $\cL^q(\Omega)$ é um espaço completo (ver Teorema \ref{thm:lp-completo-pre}), então $(u_{k_j})_{j=1}^\infty$ é uma sequência convergente em $\cL^q(\Omega)$, como era desejado.
\end{prf}

\obs Vimos no Teorema \ref{thm:compacidade} que $\cW^{1,p}(\Omega) \doublehookrightarrow \cL^q(\Omega)$, para todo $1 \leqslant q < p^*$ (se $\Omega$ é limitado com fronteira de classe $\cC^1$). Como $p^* > p$, então, $\cW^{1,p}(\Omega) \doublehookrightarrow \cL^p(\Omega)$, com $1 \leqslant p < n$ (se $\Omega$ é limitada e $\partial\Omega$ é de classe $\cC^1$).
Na verdade, temos que
\[
    \cW^{1,p}(\Omega) \doublehookrightarrow \cL^p(\Omega),
\]
para todo $1 \leqslant p \leqslant \infty$.
Com efeito, se $n < p \leqslant \infty$, então, pela desigualdade de Morrey (ver Teorema \ref{thm:holdersobolev1}), temos que, dada uma função $u \in \cW^{1,p}(\Omega)$, podemos escrever
\[
    \Vert \bar u \Vert_{\cC^{0,1-\frac{n}{p}}(\bR^n)} \leqslant c \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)},
\]
onde $\bar u \in \cW^{1,p}(\bR^n)$ é uma extensão de $u$. Logo,
\[
    \sup_{x \in \bR^n} |\bar u(x)| + \sup_{\substack{x,y \in \Omega\\x \neq y}} \left\{ \frac{|\bar u(x) - \bar u(y)|}{\Vert x - y \Vert^\gamma} \right\} \leqslant c \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)},
\]
isso implica em
\[
    |\bar u(x)| \leqslant c \Vert u \Vert_{\cW^{1,p}(\bR^n)},
\]
para todo $x \in \bR^n$ e
\[
    |\bar u(x) - \bar u(y)| \leqslant c \Vert x - y \Vert^\gamma \Vert \bar u \Vert_{\cW^{1,p}(\bR^n)},
\]
para todo $x, y \in \bR^n$.
Assim sendo, seja $(u_k) \subseteq \cW^{1,p}(\Omega)$ uma sequência limitada, isto é, $\Vert u_k \Vert_{\cW^{1,p}(\Omega)} \leqslant c$, para todo $k \in \bN$.
Logo,
\[
    \Vert \bar u_k \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert u_k \Vert_{\cW^{1,p}(\Omega)} \leqslant c,
\]
onde $\bar u_k \in \cW^{1,p}(\bR^n)$ é uma extensão de $u_k$, para todo $k \in \bN$.
Assim,
\[
    |\bar u_k(x)| \leqslant c \Vert \bar u_k \Vert_{\cW^{1,p}(\bR^n)} \leqslant c,
\]
para todo $x \in \bR^n$, e
\[
    | \bar u_k(x) - \bar u_k(y)| \leqslant c \Vert x - y \Vert^\gamma \Vert u_k \Vert_{\cW^{1,p}(\bR^n)} \leqslant c \Vert x - y \Vert^{\gamma},
\]
para todo $x,y \in \bR^n$.
Pelo Teorema de Arzelà-Ascoli (ver Teorema \ref{thm:arzela}), existe $(\bar u_{k_\ell})_{\ell=1}^\infty$ subsequência de $(\bar u_k)_{k=1}^\infty$, tal que
\[
    |\bar u_{k_\ell}(x) - v(x)| \to 0,
\]
quando $\ell \to \infty$, para todo $x \in K \subseteq \bR^n$ compacto.
Por outro lado, pelo Teorema da convergência dominada (ver Teorema \ref{thm:teorema-da-convergencia-dominada}), obtemos
\[
    \Vert \bar u_{k_j} - \bar u_{k_\ell} \Vert_{\cL^p(\bR^n)} = \int_{V} |\bar u_{k_j}(x) - \bar u_{k_\ell}(x)|^p \,dx \to 0,
\]
quando $j,\ell \to \infty$.
Como $\cL^p(\bR^n)$ é um espaço completo (ver Teorema \ref{thm:lp-completo-pre}), então existe $v \in \cL^p(\bR^n)$, tal que
\[
    \Vert \bar u_{k_\ell} - v \Vert_{\cL^p(\bR^n)} \to 0,
\]
quando $\ell \to \infty$, para todo $n < p \leqslant \infty$.
Por fim,
\[
    \Vert u_{k_\ell} - v \Vert_{\cL^p(\Omega)} = \Vert \bar u_{k_\ell} - v \Vert_{\cL^p(\Omega)} \leqslant \Vert \bar u_{k_\ell} - v \Vert_{\cL^p(\bR^n)} \to 0.
\]
Isto é,
\[
    \cW^{1,p}(\Omega) \doublehookrightarrow \cL^p(\Omega),
\]
para todo $1 \leqslant p \leqslant \infty$, $p \neq n$, onde $\Omega$ é limitado com fronteira de classe $\cC^1$.

Agora, seja $1 \leqslant s < n$ tal que $1 \leqslant n < s^*$ (isto implica em $s^* \to \infty$ quando $s \to n^-$).
Pelo Teorema \ref{thm:compacidade}
\[
    \cW^{1,s}(\Omega) \doublehookrightarrow \cL^n(\Omega).
\]
Seja $(u_k) \subseteq \cW^{1,n}(\Omega)$ limitada, isto é, $\Vert u_k \Vert_{\cW^{1,n}(\Omega)} \leqslant c$, para todo $k \in \bN$.
Logo,
\[
    \Vert u_k \Vert_{\cW^{1,s}(\Omega)} \leqslant \Vert u_k \Vert_{\cW^{1,n}(\Omega)} \leqslant c,
\]
para todo $k \in \bN$.
Assim sendo, existe uma subsequência $(u_{k_\ell})_{\ell=1}^\infty$ de $(u_k)_{k=1}^\infty$ tal que
\[
    \Vert u_{k_\ell} - u \Vert_{\cL^n(\Omega)} \to 0,
\]
quando $k \to \infty$, para alguma função $u \in \cL^n(\Omega)$.
Consequentemente, $\cW^{1,n}(\Omega) \doublehookrightarrow \cL^n(\Omega)$ e portanto
\[
    \cW^{1,p}(\Omega) \doublehookrightarrow \cL^p(\Omega),
\]
para todo $1 \leqslant p \leqslant \infty$.